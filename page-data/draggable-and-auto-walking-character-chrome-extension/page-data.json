{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/draggable-and-auto-walking-character-chrome-extension/","result":{"data":{"site":{"siteMetadata":{"title":"조성개발실록"}},"markdownRemark":{"id":"2ecda88e-bede-5c6f-87b0-d86f1727be4a","excerpt":"♚♚햄부기♚♚크롬확장프로그램♜♜즉시설치☜☜평생무료획득♜♜깃허브★스타 환영★10…","html":"<blockquote>\n<p>♚♚햄부기♚♚크롬확장프로그램♜♜<a href=\"(https://chromewebstore.google.com/detail/bugi/cidndoahplamogkfaimmahedcnakjnag?hl=ko)\">즉시설치</a>☜☜평생무료획득♜♜<a href=\"https://github.com/sungpaks/bugi_friends\">깃허브</a>★스타 환영★100%오픈소스§§</p>\n</blockquote>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 59px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b025babeab9857bf3b03ccf6923ad0c0/ee850/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 115.2542372881356%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAXCAIAAACEf/j0AAAACXBIWXMAAAsTAAALEwEAmpwYAAACZklEQVR42mP4TwFgGHya/6KCf//+EaUZqA6oGkijCWLqZ8C0EKLo1r0n5y/fOn/pxoWrd67ffvjl6w+IETg1Q+TeffyybfO2kmif/GDb5vTgtgT3wmi/udNmf/v5G00/A5rOl28+TGooWVvp/XlXw+fdbb8PNP/ZXPLvbP/6vuw5kyd/R9XPgKzz5++/zZXFh6st/u+r+Hy479Oi0HfT3d/s7nm9seT/wcoN1QFz5y4FKf6LqvnPnz9Acv367RMjjH4vj3gxK+D70tCj7QF3Z4R9XBH3cWnE41lhx3pCZxa579l7FBI06JrnzFk+3V/n9+qYz8sjVtcEFVZN8LGy+L4m6tOKyK7aypSkkjhTuS2bt8PVo2hesmRTjb7S9xmB/1fGbi7xl5QwCLEzXV/ntb7eN8HdUkvVMNXeYNumfSiaIR7+8uFrTGGiuZtKvonhbG+7qwV+pzuCH8+PW1/tt7bK4/X8kO2FnrH+JnElqW9ff4DoQmh+8eiNfpitdbt+YL6hdqmZu65iSaBJUZBRobd+gY9RSbBpuJ2OarGKR5P70wevQd6GaIY7Y+b8Vb1JBk9WBMnryFbaC2+tl16dz7+zVOjyUvMdFbKTkxSEZVQ37dyHPcAWLFq7INvi/MxIC06ZRFGlXAWFDAmFIiuVqcHquZLimUIS9qL6t+4+RNcMcfnzF68r0pJctDSjNFX7PA363A2meBu2OetUWWt0uRvW+jr3tvT++v0HrB5bCnv97tP2XYfmzpg3a+q83s5pvZ1TpkwAchZNm7rk7LnrOJMnrqyDRwEDpvQfHODvn7/4ctXQKcMACaV/LbJ1f1IAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"햄부기\"\n        title=\"\"\n        src=\"/static/b025babeab9857bf3b03ccf6923ad0c0/ee850/image.png\"\n        srcset=\"/static/b025babeab9857bf3b03ccf6923ad0c0/ee850/image.png 59w\"\n        sizes=\"(max-width: 59px) 100vw, 59px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>혹시 이 친구 보셨나요? 제 블로그에 돌아다니는데<br>\n이름은 햄부기로 했습니다.<br>\n그냥 갑자기 블로그에 귀엽고 특별한 것을 넣고싶어서 만들어봤어요<br>\n햄버거인 이유는 그냥 제가 햄버거를 좋아해서 그렇습니다</p>\n<p>아무튼 이 친구가 어떤 기능이 있고 어떻게 구현했는지 쓰려고 해요<br>\n그리고 이거 크롬 익스텐션으로도 만들어서 게시했는데요, 그 여정까지 쓰겠습니다<br>\n나중에는 부기와 친구들 머 이런식으로 계속 캐릭터도 추가하고, 그러고 싶습니다<br>\n막 오픈소스처럼 다른 사람들이 캐릭터도 기능도 추가하고 어쩌구저쩌구 하게 하고싶은데 점점 귀찮고 그럴 사람이 있을지는 모르곘어용</p>\n<p>아무튼 시작합시다<br>\n그냥 기능이 뭐있나 궁금하시면 목차에서 대제목 1,2,3만 보세요</p>\n<h1 id=\"1-드래그-앤-드롭으로-잡아-옮길-수-있습니다\" style=\"position:relative;\"><a href=\"#1-%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%95%A4-%EB%93%9C%EB%A1%AD%EC%9C%BC%EB%A1%9C-%EC%9E%A1%EC%95%84-%EC%98%AE%EA%B8%B8-%EC%88%98-%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4\" aria-label=\"1 드래그 앤 드롭으로 잡아 옮길 수 있습니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. 드래그 앤 드롭으로 잡아 옮길 수 있습니다</h1>\n<p>햄부기를 잡고, 드래그하여 다른 곳으로 옮겨버릴 수 있습니다<br>\n얘때문에 글을 못 읽으면 안되잖아요?</p>\n<p>마침 JAVA수업 때 SWING 쓰면서 이런거는 또 전문이었습니다<br>\n게다가 얼마전에 회사 업무에서도 canvas 쓸 일이 있었는데 거기서도 그 수업 때 했던걸 톡톡히 썼네요<br>\n아. 그립읍니다 교수님.<br>\n그래픽스 수업도 좀 들을걸 그랬어요</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 276px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/989d199cffa78b2126ec2dfa46187238/f2d11/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACw0lEQVR42g3QXW/aVgCAYYMhEIMxxsafxz72OccHbIxtbCckQPgoUJaGliVNRLVMaGsStVvXqbfbZS4m7XLS9n+XP/A+0ssgaKMkM3aHqB8Q7DYHi+rmC3e2Pxod2NFBHN4cj5/KH//h840OLBMTE3mGiw2XqMhjLNtR/FSa73zqIGhoOqx5Q371U3X5WLt/lkcHbvYoZNsWjVXTrL2+F0dvALBNRHWXMgbEtut6ECDXApbVJlFLtzWvJ52+Fq4exMFao4GBPZn02o4nQFLXLNl0NIj56TWjQk+3kO24ENoqcCrLQwNFQJXBSwoYFrQkxzte/KD4ifLC2KDGN8tcg1dNfnbLiCiubj8rQa7bWIdYtYmiWpqmAwhNhG0INQu1koUMSb/vby63cXbaFMVyTRBMl5HJoD6943sTyfVNyzYMoOiWKivNk3Vtef9CAxdDYKkGzNN4Op0OkwiqbYblqnyb0elAJCkXjGWaKN1UDs/apiNotoR7cmegOwi4VMEh6obDyH81u1ieJHZb1Pl6k4SM2Dmp+6N6cN6kKXe+q775pAIiGER+2WZC3SGqnxbe/jq5+XHS9yeRfx6QAJhEEivBiKlsPpYv9g2ayzRv0VyimeL0eIPydk9CoeIEWiepd4d3T1/jOCJAj7HlSc2G6hTdM6a8fqyevhNQIuJBC0UyTiQ35nSv9N1TbfZBNjs6TQXF+fTH893Dl1USjXudRlvLtnvRXzIsHlfQ8BgNeZzXorXQHTfduAHD42Be8ed1nLfDcZGOfvn7393D1zSK68hnvOwoW5fDDVPoXxXplMWTEp0dHZ4roz0H82xxtXl7HV1cTi5vdz//Vr3/8/Nf/wVhUjJcBsesf1YIxuz2G8Oufi92VwU6L9BFKb9hw02Rzjk6SV5d56vb88s9HO2YwTu0fC91kpJ/UiZpye6w2ffs4tv/3xt70ldFipwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"여전히 가르침을 주시는군요\"\n        title=\"\"\n        src=\"/static/989d199cffa78b2126ec2dfa46187238/f2d11/image-1.png\"\n        srcset=\"/static/989d199cffa78b2126ec2dfa46187238/c26ae/image-1.png 158w,\n/static/989d199cffa78b2126ec2dfa46187238/f2d11/image-1.png 276w\"\n        sizes=\"(max-width: 276px) 100vw, 276px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>영화 아이언맨2</figcaption>\n</figure>\n<h2 id=\"html요소를-드래그-앤-드롭하기\" style=\"position:relative;\"><a href=\"#html%EC%9A%94%EC%86%8C%EB%A5%BC-%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%95%A4-%EB%93%9C%EB%A1%AD%ED%95%98%EA%B8%B0\" aria-label=\"html요소를 드래그 앤 드롭하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>HTML요소를 드래그 앤 드롭하기</h2>\n<p>웹 API에는 <a href=\"https://developer.mozilla.org/en-US/docs/Web/API/DragEvent\">DragEvent</a>가 이미 존재하지만 어떤 요소를 자유롭게 드래그 앤 드롭으로 옮기고 싶다면 꽤 한계가 있습니다<br>\n모던 자바스크립트 튜토리얼의 <a href=\"https://ko.javascript.info/mouse-drag-and-drop\">mouse-drag-and-drop</a>에서도 이에 대한 내용이 나옵니다<br>\n대신에 <code class=\"language-text\">mousedown, mousemove, mouseup</code> 이 세 이벤트만으로 드래그 앤 드롭을 구현해봅시다</p>\n<p><code class=\"language-text\">const [isDragging, setIsDragging] = useState(false)</code>처럼 드래깅 여부를 나타낼 상태를 하나 선언하고 시작합시다.<br>\n이제 아래와 같은 단계를 생각해볼 수 있습니다 :</p>\n<ol>\n<li>원하는 요소에서, 마우스 버튼을 누르면(<code class=\"language-text\">mousedown</code>) 드래깅을 시작 (<code class=\"language-text\">setIsDragging(true)</code>)</li>\n<li><code class=\"language-text\">isDragging === true</code>인 동안 마우스를 움직이면(<code class=\"language-text\">mousemove</code>), 요소의 위치를 현재 마우스 위치로 업데이트</li>\n<li>마우스 버튼을 떼면(<code class=\"language-text\">mouseup</code>), 드래깅을 종료 (<code class=\"language-text\">setIsDragging(false)</code>)</li>\n</ol>\n<p>그럼 요소의 위치를 나타낼 <code class=\"language-text\">[position, setPosition]</code> 같은 상태값이 필요하겠습니다.<br>\n위치가 변함에 따라 요소가 다시 그려지게 해야 하니까요<br>\n또한 그 요소의 CSS <code class=\"language-text\">position</code> 속성은 <code class=\"language-text\">fixed</code>로 지정하여 자유로운 위치선정을 가능하게 해야겠습니다.<br>\n모던 자바스크립트 튜토리얼에서는 <code class=\"language-text\">absolute</code>로 구현하긴 합니다. <code class=\"language-text\">absolute</code>도 레이아웃 배치 흐름에서 제외된다는 사실은 매한가지니까요</p>\n<p>아무튼 그럼 이런 식으로 될 것 같아요</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleMouseDown</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>e<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>MouseEvent<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setIsDragging</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleMouseMove</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>e<span class=\"token operator\">:</span> MouseEvent <span class=\"token operator\">|</span> React<span class=\"token punctuation\">.</span>MouseEvent<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isDragging<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>buttons <span class=\"token operator\">!==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 왼쪽버튼만</span>\n    <span class=\"token function\">setPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      left<span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>clientX<span class=\"token punctuation\">,</span>\n      top<span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>clientY\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleMouseUp</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setIsDragging</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이제 요소에 등록합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mousemove\"</span><span class=\"token punctuation\">,</span> handleMouseMove<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mousemove\"</span><span class=\"token punctuation\">,</span> handleMouseMove<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>isDragging<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span>\n    <span class=\"token attr-name\">style</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> position<span class=\"token operator\">:</span> <span class=\"token string\">\"fixed\"</span><span class=\"token punctuation\">,</span> top<span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>top<span class=\"token punctuation\">,</span> left<span class=\"token operator\">:</span> position<span class=\"token punctuation\">.</span>left <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">onMouseDown</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleMouseDown<span class=\"token punctuation\">}</span></span>\n    <span class=\"token attr-name\">onMouseUp</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>handleMouseUp<span class=\"token punctuation\">}</span></span>\n  <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이 때, <code class=\"language-text\">mousemove</code>는 꼭 <code class=\"language-text\">useEffect</code>를 활용하여 document에 등록해줘야 합니다.<br>\n전체 문서를 기준으로 마우스 이벤트를 받아야하기 때문입니다</p>\n<p>근데 여기까지만 하면 드래그가 잘 안될건데<br>\n막 커서가 not-allowed로 바뀌고 드래깅이 멈추고..<br>\n이게 기본 드래깅 이벤트때문인데<br>\n드래그 앤 드롭하는 요소의 props에 <code class=\"language-text\">draggable={false}</code>한 줄 추가해주면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\"><span class=\"token deleted-arrow deleted\"><span class=\"token prefix deleted\"><</span>div\n</span>\tstyle={{ position: \"fixed\", top: position.top, left: position.left}}\n\tonMouseDown={handleMouseDown}\n\tonMouseUp={handleMouseUp}\n<span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>\tdraggable={false}\n</span>\t/></code></pre></div>\n<h3 id=\"드래그를-시작하면-커서-위치로-요소가-순간이동해요\" style=\"position:relative;\"><a href=\"#%EB%93%9C%EB%9E%98%EA%B7%B8%EB%A5%BC-%EC%8B%9C%EC%9E%91%ED%95%98%EB%A9%B4-%EC%BB%A4%EC%84%9C-%EC%9C%84%EC%B9%98%EB%A1%9C-%EC%9A%94%EC%86%8C%EA%B0%80-%EC%88%9C%EA%B0%84%EC%9D%B4%EB%8F%99%ED%95%B4%EC%9A%94\" aria-label=\"드래그를 시작하면 커서 위치로 요소가 순간이동해요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>드래그를 시작하면 커서 위치로 요소가 순간이동해요</h3>\n<p>지금 이 상태로도 드래그 앤 드롭이 잘 되긴 하지만<br>\n드래그를 시작하면 요소의 위치가 현재 커서 위치로 순간적으로 바뀌어서 살짝 어색해보입니다<br>\n<a href=\"https://ko.javascript.info/mouse-drag-and-drop#ref-319\">모던 자바스크립트 튜토리얼 > 드래그 앤 드롭 > 올바른 위치 지정</a>에서 자세한 설명과 예시를 볼 수 있습니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 259px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/44df4f302cdedd7902cfeb07b41e4df5/a2ead/image-9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 75.31645569620254%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAADnElEQVR42iWQaVMaBwCG9w90Juln5WaXRfAMghIUiYlVPIlinLbxiLVJ1JLDidZMatrYQ20xOsSACRGdNCKCGGQEjUfEJEaJyA17r5R0ppM/Uad9vj/zPvMCPz/5Q28xDBoMA1OWX+ccQwbj2Mys2b0RSIYJYh8jwn/9TZLHyVeb7vd+X+ojTqfR4zRGp1CKTgI279xv5sE7+ge39CN9E1P3TTOmlTXj0uZhJJhMvKOOk5F4eOCnu01tLZeutIw8HjXNTz9dMG/vruNEDKCo0Ot935R1xehYnbQ6DS+cpiWP03cYI/BEwh+PhXpu9FQ2NyjUquqv6pu+aXkwPqw3j1sWn+FkDIjFg7FEdHffdxQLkikaoyiUJMk0iZF4Ev2w7LKyuAwOlyMQQjn5ObAIsr+04mk0ioQoGgM21hdti3OWWdOi0/Jmb/Xtnndvf/3Av0nTZCpNh6NHJWXFpz8/nZmRIYThU6c+m3v+9NOnfyiSpCgKCBzuWBdmLLNG75oTQY78/t3tLY/H69rZfXMYCMXi8T7dl1KpCBbCHA7zSuflUPiAPiYIAj8BQNDIUfD9qw33xtbq3PPZ9o7Oi43a2gbNF+qaKnV9T69Oq6m82tU6MTliX56naJSmcZxACALFMBRIJIOuFZvd8Wev7qpUUXq2rFxeopTKikTiXJ3uVt/tbmGWaGDgun/r2TufM47EcQwj/gPDMSCJhBxLL7xrLxub6rPzC85IZcKcHK4AzpPI5mcM1eUSoQj+ZajLNf39wqP+nR0PQVIoiv7fffJ2wONddq3YNZoGHo8ngEUgBDMYLFV5pWv+UadGmVsgvt/XbBxq0/c3O21mnCSQJIKdRKMoEIl+cK8ujY4Nn79wnsVi80GIDwrYHF7BmcKph/eGerXt2vLf+zXjd2oeDl4MHG6nPlI4fiKiCIIAGB6dmByFswQ8CGQxWQwmlw/CPC4kEguVCskP3Zrh7+omb1aM31BNj+ncXpdj2e73H5wsJxIJYGt7rVguA0GIzWIzmJlciM0G2eI8QWVNiaRIVKOWnjsraLwgatUUV9eeU6jKJLIi+5KNosloNAa0d3zN5XGysoSZmUyJAv72boX6ckHPjxXX7lW13la23Sxtvqaq7Siqaiuua5XnyXKEouxp82OSxiKRMACBAh4o4PDBTDY7g8Pki7mCXG69VtF1vUGuLMyXC7MLodIKeU1LnfpSXUVttUKp6u7VIQgWjSb+BSTA3e9dy0UhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"잔상입니다만\"\n        title=\"\"\n        src=\"/static/44df4f302cdedd7902cfeb07b41e4df5/a2ead/image-9.png\"\n        srcset=\"/static/44df4f302cdedd7902cfeb07b41e4df5/c26ae/image-9.png 158w,\n/static/44df4f302cdedd7902cfeb07b41e4df5/a2ead/image-9.png 259w\"\n        sizes=\"(max-width: 259px) 100vw, 259px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이건 <code class=\"language-text\">mousedown</code> 위치와 요소가 원래 있던 위치의 차이(offset)를 저장해두면 됩니다<br>\n이건 어차피 딱히 렌더링에 필요한 정보는 아니라서, 참조로 저장했습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleMouseDown</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>e<span class=\"token operator\">:</span> React<span class=\"token punctuation\">.</span>MouseEvent<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setIsDragging</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  shift<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n    x<span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>clientX <span class=\"token operator\">-</span> ref<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>offsetLeft<span class=\"token punctuation\">,</span>\n    y<span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>clientY <span class=\"token operator\">-</span> ref<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>offsetTop\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleMouseUp</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">setIsDragging</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">handleMouseMove</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>e<span class=\"token operator\">:</span> MouseEvent<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>isDragging <span class=\"token operator\">&amp;&amp;</span> ref<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">.</span>buttons <span class=\"token operator\">!==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setPosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      left<span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>clientX <span class=\"token operator\">-</span> shift<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>x<span class=\"token punctuation\">,</span>\n      top<span class=\"token operator\">:</span> e<span class=\"token punctuation\">.</span>clientY <span class=\"token operator\">-</span> shift<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">.</span>y\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 커서 위치에서, 햄버거의 왼쪽위 좌표를 빼주면 => shift\n그럼 이제 left, top을 최신화할 때, shift를 빼줘서 보정해주면 됩니다</p>\n<h2 id=\"터치로-드래그-앤-드롭하기\" style=\"position:relative;\"><a href=\"#%ED%84%B0%EC%B9%98%EB%A1%9C-%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%95%A4-%EB%93%9C%EB%A1%AD%ED%95%98%EA%B8%B0\" aria-label=\"터치로 드래그 앤 드롭하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>터치로 드래그 앤 드롭하기</h2>\n<p>클릭과 터치는 비슷해보이지만 은근 다릅니다<br>\n생각해보면, 마우스는 항상 화면 위에 존재하는데 반해, 터치는 그렇지 않습니다<br>\n터치는 여러 손가락에 의한 이벤트도 다뤄야 하고, 게다가 손가락은 점이 아니라 면이고, ..<br>\nhover를 테스트할 때도, 크롬 개발자모드로 반응형 모드를 켜면 커서가 터치모드가 되어서<br>\n커서를 올리는 것 만으로는 hover가 트리거되지 않는 것을 볼 수 있습니다</p>\n<p>이렇게 마우스 클릭과 화면 터치는 은근히 다르고 이벤트도 따로 존재합니다<br>\n<code class=\"language-text\">touchstart, touchmove, touchend</code>처럼요<br>\n마우스 이벤트는 <code class=\"language-text\">e.clientX</code>처럼 바로 좌표값을 가져올 수 있었는데, 터치 이벤트는 그렇지 않습니다<br>\n먼저 <code class=\"language-text\">TouchEvent.touches[0]</code>으로 <code class=\"language-text\">Touch</code>이벤트의 목록 중 가장 첫 번째를 가져옵니다.<br>\n이제 여기서 <code class=\"language-text\">clientX,Y</code>를 꺼냅니다</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 225px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f6b8a097944ac229adfbfa7afff31768/3684f/image-10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEmElEQVR42g2OSWwbVQBA/6z2eBvbM+NxvC8zdSZxnDpe48Qeb/USO4mXOrVdO7bTJnHlqEloQ5PWbakSmkKBblJbQQRqUQHBBQkkDohTuYF6Q3BDAiFx4IaEeiTS07u+B5RqTqp2ERpBpnFjqjFUPkpqPSTt1jJuinarKUGlFdS0oKRP4FobprGgSjOM6xBEQxAsYI1pqSWLW4uEo4wZSxA9R9oW9HxphKsYnYsmW5a1pPRcluGzSnuCMIVRnRdWjKKYQ6nkgYqOYyNJ3FKQWMpSS0ViLivtFcZZ0/HtY5u4JZu7YfLUaGdBpo/iOh+kGQcyHiMcGg0PpHScMOQl1orM1lA5W/TYOdrdozyrCm5NYmzIDEuk6TRlK2u4ityUkTMhhTaoID1q7ZiOEgCqz0sMZdzSkLnWSM8WGbqsnL0iDw7h0S3ceZ5ztZPedj2+lot0aXNWwc6ombBG66N1HpYZB4SpRFibqPM84tnEZt+WpB4QhY+g7BMkcov2vTHrHyzFB1uVvRutGzHvEkIdn4eklF+hm1LRk4DhS9oTLfnEBj59fWTh49WDnw6e/mLvfgMyj5Wh6xFxt18Z7rUOLtevV1OrCJPAmTilj6rYEEZNAcRck3ItwrstEQ/F7rd//fnf639f13ZegdQRHDyUT97kg3vB2d1oZM89uQ7pFhE2j+lEjImgdBBgtjrhaEs8A0y8Nd788vuXf//62z/zF3/G0s/wwB1o9Bof2JMbNoCsL1N3dM621FSUG7IqS05qEAFuKhL2s7LxPuTfkuceFDZ/vPn+K/fSCy53FEg9tJ7c7c3dWC68m4juz4tDA7dCWU8z9gXWWmQdGYAyadgwT7qa1Mk+Gx+K618M9n+YKN33xG/PiAdj02+dyd07OPf8ZudRKbWvt29brCsmx5KCSWn0MYCoRFibxvUFqaOpDm5Glo8WB59bY9ds01do77bdezUvvldffNqtPhb8+4jlEkz39M661ZFnzbMAUkRhMglTOWA4LR1dqaw/K/aOZELf6NtweAfxqav9zP2d1vN48hEbfIfxDUl+1eE5OzPTiMxWASQLw6SIsnOQpYFYG821o07nidJ61nHygn20lQhtri/e3WzeS8091QQeGhKPTcGLo962z1/2+QoAUQRw9hRqKVNc0+isuPhaI34pMLEuhK6EYpfCE72auH1140Wv/zUwb8LCZdi8TFmLU8GS318EiMwLq+MyXd7jLARP5DOB+pnMtobMMfZO98JnK427O2sfvjj6fanzCWDaqKmLGGqYcU5tP2VwZQGCuhHpjGkk4+Mz1elGJ31+UN7tZTc5ZzNVuevyrZUbD7769I/k/G3AVBDdIkynIU0cqKOAigIACzgRFrhsLlwtB6r1cG052WqJPZe9ap7syk0Fv7jzwZ2XucohzOQAk4I0MVg1cwxQBAEA43pdMjpZnuISAYfYmmlea7xZinUgLExaqjIqny0eDoffZRf2UTYHRjIQnYaVMVQdh8jjMhhRK+1mxjmi5wR+yu8KxidnE96EVM6jhABjvN4STWXO2bgEInfBagFR8hBuQ6VOhHD+DwGkDchWAUmRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"뉴럴라이저\"\n        title=\"\"\n        src=\"/static/f6b8a097944ac229adfbfa7afff31768/3684f/image-10.png\"\n        srcset=\"/static/f6b8a097944ac229adfbfa7afff31768/c26ae/image-10.png 158w,\n/static/f6b8a097944ac229adfbfa7afff31768/3684f/image-10.png 225w\"\n        sizes=\"(max-width: 225px) 100vw, 225px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>영화 맨인블랙</figcaption>\n</figure>\n<p>근데 리액트를 사용하신다면 위 내용은 다 잊어두셔도 됩니다<br>\n<a href=\"https://ko.react.dev/reference/react-dom/components/common#react-event-object\">React 이벤트 객체</a>가 알아서 추상화해주거든요. \"<strong>합성 이벤트</strong>\"라고도 합니다<br>\n예를 들어, <code class=\"language-text\">onMouseDown</code>에서 진짜 자바스크립트 이벤트인 <code class=\"language-text\">mousedown</code>은 <code class=\"language-text\">e.nativeEvent</code>에 들어있습니다<br>\n이외에는 다 리액트 이벤트로 한 겹 래핑하여 제공됩니다.<br>\n덕분에 <code class=\"language-text\">TouchEvent</code>든, <code class=\"language-text\">MouseEvent</code>든 상관 없이 <code class=\"language-text\">e.clientX</code>만으로 충분합니다</p>\n<p>그래서 아까 마우스 이벤트로 했던 것과 동일하게, <code class=\"language-text\">onTouchStart={onMouseDown}</code>처럼 재활용하면 됩니다<br>\n<code class=\"language-text\">touchmove</code>이벤트도 <code class=\"language-text\">mousemove</code>처럼 useEffect에서 <code class=\"language-text\">document</code>에 등록해주시구요.</p>\n<h1 id=\"2-클릭-시-또는-가만히-서있다가-아무-때나-걷기를-시작합니다\" style=\"position:relative;\"><a href=\"#2-%ED%81%B4%EB%A6%AD-%EC%8B%9C-%EB%98%90%EB%8A%94-%EA%B0%80%EB%A7%8C%ED%9E%88-%EC%84%9C%EC%9E%88%EB%8B%A4%EA%B0%80-%EC%95%84%EB%AC%B4-%EB%95%8C%EB%82%98-%EA%B1%B7%EA%B8%B0%EB%A5%BC-%EC%8B%9C%EC%9E%91%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"2 클릭 시 또는 가만히 서있다가 아무 때나 걷기를 시작합니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. 클릭 시, 또는 가만히 서있다가 아무 때나 걷기를 시작합니다</h1>\n<p>지 혼자 움직이게끔 만들고 싶었어요<br>\n그리고 또한 클릭하면 움직이게요. 건들면 도망간다는 느낌으로?<br>\n그래서 먼저 <code class=\"language-text\">startWalk</code>라는 함수를 정의했습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">startWalk</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isWalking<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 화면 내 좌표 중 랜덤으로 targetX, targetY를 선정 (걸어가려는 목표지점)</span>\n    <span class=\"token function\">setIsWalking</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setPose</span><span class=\"token punctuation\">(</span>walking01<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token function\">setIsFlipped</span><span class=\"token punctuation\">(</span>position<span class=\"token punctuation\">.</span>left <span class=\"token operator\">-</span> targetX <span class=\"token operator\">></span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    animationFrameId<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>timestamp <span class=\"token operator\">=></span>\n      <span class=\"token function\">animateWalk</span><span class=\"token punctuation\">(</span>timestamp<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> targetX<span class=\"token punctuation\">,</span> targetY<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>움직이는 중이 아니라면 먼저 화면 내에서 아무 지점을 목표점으로 잡습니다.<br>\n그 다음 이미지를 걷는 모션 프레임으로 바꾸고, 가려는 방향이 왼쪽이면 이미지를 뒤집습니다<br>\n이제 비로소 애니메이션을 시작해야 하는데 :</p>\n<h2 id=\"requestanimationframe으로-애니메이션-설정하기\" style=\"position:relative;\"><a href=\"#requestanimationframe%EC%9C%BC%EB%A1%9C-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\" aria-label=\"requestanimationframe으로 애니메이션 설정하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>requestAnimationFrame으로 애니메이션 설정하기</h2>\n<p>애니메이션은 <a href=\"https://developer.mozilla.org/ko/docs/Web/API/Window/requestAnimationFrame\"><code class=\"language-text\">requestAnimationFrame</code></a>으로 구현합니다.<br>\n<code class=\"language-text\">requestAnimationFrame</code>은 첫 번째 인자로 콜백을 받습니다.<br>\n자세히는, 브라우저에게 콜백을 넘기고, 다음 리페인트 바로 전에 브라우저가 이 콜백을 호출하도록 요청합니다.<br>\n그리고 콜백함수는 <code class=\"language-text\">timestamp</code>라는 인수를 하나 받습니다. 이는 애니메이션이 요청된 이후의 timestamp입니다</p>\n<blockquote>\n<p><code class=\"language-text\">requestAnimationFrame</code>은 하나의 프레임을 요청합니다. 따라서 다음 리페인트에서 다음 애니메이션 프레임을 적용하려면 콜백 루틴이 스스로 <code class=\"language-text\">requestAnimationFrame()</code>을 다시 호출해야 합니다.</p>\n</blockquote>\n<p>그리고 이외에도 필요한 값들(목표 지점인 <code class=\"language-text\">targetX, targetY</code> 등.)을 인자로 넘겨 갖고다니겠습니다<br>\n이제 매 애니메이션마다 targetX, targetY에 가까워지는 방향으로 움직이면 될 것 같아요</p>\n<p>그런데 의문이 있습니다<br>\n왜 <code class=\"language-text\">setInterval</code>이 아닌 <code class=\"language-text\">requestAnationFrame</code>(이하 rAF)인가요?</p>\n<ul>\n<li>같은 비동기처리라도 rAF는 별도의 큐에서 관리되므로 콜백 실행이 밀리는 현상을 최소화할 수 있다</li>\n<li>setInterval은 주어진 간격을 지키려할 뿐 주사율에 관심이 없다. 그러나 rAF는 부드럽고 최적화된 애니메이션을 위해 디스플레이 주사율을 따른다</li>\n<li>setInterval과는 달리 rAF는 <strong>다음 리페인트가 준비되었을 때 콜백을 호출</strong>하므로, 각 프레임 간격을 지키며 실행됨을 보장할 수 있다</li>\n<li>rAF는 탭이 비활성화되면 애니메이션을 중단해두므로 배터리와 리소스 소모를 최소화한다</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9db96085870b7815ed5755cd16543e83/f2793/image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAABSElEQVR42m1S226DMAzt//9UK1XV+lCpLy2kGahQLhELqFxKRkPCdoi3bp3mB3Ls+NjHDosPZ9ZaIcT5fH5zBneaJsQnZ/8C2IIOY0yvlFVKd50aBqSMxgxaz1fW3u93AnocAfClyKLvwVJw/NMp5Vwwtt1sRJLkUfSyWsmiSMNwu15XZRkytlku6+uVHw6vjM3kcUQPAyW3262qqlaILAjaslSg+X5f112aZpy/13VzuVwYm0Ecd1X1I9t+2wMDjE4kRWhO6xBNPpPpKIoiCAIpJVyt9RzE2FoTzRpD6iZrUfFR64sMmud5jDGsgNr+loAckCnoKtinbT+saZo8z2mZbdtC0YDlO2kw6zonSYLnfCKTBDz1brdDHnAURcCUB137/b7DQyoFABfgLxm/Ci4455gc+Hg8AmMWdAPOsgycOI7DMJRSfgK0NTlNV4y/KgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"requestAnimationFrame\"\n        title=\"\"\n        src=\"/static/9db96085870b7815ed5755cd16543e83/f058b/image-3.png\"\n        srcset=\"/static/9db96085870b7815ed5755cd16543e83/c26ae/image-3.png 158w,\n/static/9db96085870b7815ed5755cd16543e83/6bdcf/image-3.png 315w,\n/static/9db96085870b7815ed5755cd16543e83/f058b/image-3.png 630w,\n/static/9db96085870b7815ed5755cd16543e83/f2793/image-3.png 743w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>조잡하게 그려봤는데 딱히 도움이 될 것 같지는 않아 보입니다 ㅜㅜ</p>\n<p>아무튼 그래서 애니메이션 각 프레임에 전달할 콜백인 <code class=\"language-text\">animateWalk</code>를 이렇게 작성했습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> <span class=\"token function-variable function\">animateWalk</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>\n    timestamp<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n    count <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span>\n    targetX<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">,</span>\n    targetY<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span>\n  <span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>startTimestamp<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 걷기가 시작될 때의 타임스탬프를 기록 : elapsed 계산을 위함</span>\n      startTimestamp<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> timestamp<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">const</span> elapsed <span class=\"token operator\">=</span> timestamp <span class=\"token operator\">-</span> startTimestamp<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>elapsed <span class=\"token operator\">></span> <span class=\"token number\">5000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsWalking</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setPose</span><span class=\"token punctuation\">(</span>sitting<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span>animationFrameId<span class=\"token punctuation\">.</span>current<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      animationFrameId<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n      startTimestamp<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n      <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>count <span class=\"token operator\">%</span> <span class=\"token number\">30</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 이미지를 바꿔 모션을 연출하기 }</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>count <span class=\"token operator\">%</span> <span class=\"token number\">10</span> <span class=\"token operator\">===</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">// 매번 실행하니까 너무 빨라서 .. 10번에 한번씩만</span>\n      <span class=\"token comment\">// targetX, targetY로 조금 이동하기</span>\n    <span class=\"token punctuation\">}</span>\n    <span class=\"token comment\">// 다음 애니메이션 프레임 요청</span>\n    animationFrameId<span class=\"token punctuation\">.</span>current <span class=\"token operator\">=</span> <span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>timestamp <span class=\"token operator\">=></span>\n      <span class=\"token function\">animateWalk</span><span class=\"token punctuation\">(</span>timestamp<span class=\"token punctuation\">,</span> count <span class=\"token operator\">+</span> <span class=\"token number\">1</span><span class=\"token punctuation\">,</span> targetX<span class=\"token punctuation\">,</span> targetY<span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>그런데 <a href=\"https://developer.mozilla.org/ko/docs/Web/API/Window/requestAnimationFrame\">MDN 문서</a>에서 이런 경고를 발견했습니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 565px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/44bc466fd52b8697bff9c8a751008fab/07eba/image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.848101265822784%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAABD0lEQVR42j2OW26DMBREWQgEG4yQKmJCW2Li2DwMBJrEvPPRn3b/u+gFpEqjq/EZeTRGYCJqY9DxgEPkhtiltgMCTxFcZycnh2zQAUhXgt8s26iOnuZ5L7I744uq56LquHwmYswU3EEWvcgfyfW7uXfXVF/WCMxXfIkxMRj2nlwOaaG51CLtZa4hY1xDXSKaOGnPlzEvgfSy2Hkn8yFVjPgGc/wHFwWNhkzBt1nVncig7lW3S3nTPJ3WOTUYiKDlpxvnbWBkYYMhr40TGAlaimrKy0XdXuVtykpYOGXqtxvXNFWvsqlOn7HtnhFhiEQmMqiFT8h9d7xd0b/BBDjcD+JH2xMUHnBg2keQhQIL/QHPRk4E0AtT8QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"rAF 경고\"\n        title=\"\"\n        src=\"/static/44bc466fd52b8697bff9c8a751008fab/07eba/image-4.png\"\n        srcset=\"/static/44bc466fd52b8697bff9c8a751008fab/c26ae/image-4.png 158w,\n/static/44bc466fd52b8697bff9c8a751008fab/6bdcf/image-4.png 315w,\n/static/44bc466fd52b8697bff9c8a751008fab/07eba/image-4.png 565w\"\n        sizes=\"(max-width: 565px) 100vw, 565px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>저는 이동이 너무 빠르게 되는 것을 막고자 10프레임마다 한번씩 하려고 count값을 유지했습니다<br>\n그런데 이것말고 <code class=\"language-text\">timestamp</code>를 기반으로 이를 구현해야 했겠네요<br>\n저처럼 하면 주사율에 따라, 주사율이 높으면 그만큼 애니메이션 진행이 빨라진다고 경고하는 것입니다</p>\n<p>그럴만한게, 주사율이 초당 60번이면 1초 간 콜백이 60번 실행되고, 그 중 6회가 실제로 이동을 트리거하는 반면<br>\n주사율이 촏아 120번이면, 1초 간 콜백이 120번 실행되고, 그 중 12회가 실제로 이동을 트리거합니다.<br>\n그럼 같은 애니메이션이지만 디스플레이 주사율 차이로 인해 이동 애니메이션의 속도가 2배 차이가 나겠네요</p>\n<p>그리고 맨 처음에 <code class=\"language-text\">startTimestamp</code>라는 참조값에 <code class=\"language-text\">timestamp</code>를 저장하고, 애니메이션이 끝날 때 이를 삭제해주는데요<br>\n이는 <strong>애니메이션이 시작된 후로 지난 시간</strong>(elapsedTime)을 계산하기 위함입니다<br>\n이게 가장 최초로 rAF를 호출할 때는 timestamp가 0부터 시작하는데,<br>\n그 후로는 다시는 timestamp가 0이 되지 않습니다 (애니메이션이 끝날 때 <code class=\"language-text\">cancelAnmationFrame</code>을 호출해도)<br>\n따라서 이러한 값을 유지해줘야합니다<br>\nMDN 문서에서도 예제에 아래와 같이 썼습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">function</span> <span class=\"token function\">step</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">timestamp</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>start <span class=\"token operator\">===</span> <span class=\"token keyword\">undefined</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    start <span class=\"token operator\">=</span> timestamp<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">const</span> elapsed <span class=\"token operator\">=</span> timestamp <span class=\"token operator\">-</span> start<span class=\"token punctuation\">;</span>\n\n  <span class=\"token operator\">...</span>\n\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>elapsed <span class=\"token operator\">&lt;</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// 애니메이션 진행은 2초가 지나기 전까지만</span>\n    window<span class=\"token punctuation\">.</span><span class=\"token function\">requestAnimationFrame</span><span class=\"token punctuation\">(</span>step<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"랜덤으로-애니메이션을-시작하기\" style=\"position:relative;\"><a href=\"#%EB%9E%9C%EB%8D%A4%EC%9C%BC%EB%A1%9C-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%EC%9D%84-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\" aria-label=\"랜덤으로 애니메이션을 시작하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>랜덤으로 애니메이션을 시작하기</h2>\n<p>useEffect를 사용하여 마운트 시 일정 간격마다 랜덤 숫자를 뽑는 interval을 설정합시다.<br>\n이 랜덤 숫자를 이용하여 분기처리하여 확률을 정의합니다.\n예를 들어, 매 초 랜덤을 뽑고 10퍼센트 확률로 애니메이션을 트리거하게 하려면 :</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> intervalId <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token comment\">// walking 중이 아니고, dragging 중이 아닐 때 10% 확률로 walking 시작</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>isWalking <span class=\"token operator\">&amp;&amp;</span> <span class=\"token operator\">!</span>isDragging <span class=\"token operator\">&amp;&amp;</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">startWalk</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2초마다 확률 체크</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>intervalId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 컴포넌트 언마운트 시 interval 정리</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span>isWalking<span class=\"token punctuation\">,</span> isDragging<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// isWalking, isDragging 상태에 의존</span></code></pre></div>\n<p>이런 식으로 2초마다 10% 확률로 걷는 모션을 시작하게 설정할 수 있습니다.</p>\n<h2 id=\"onclick이벤트로-startwalk를-등록하되-드래그했으면-트리거하지-않기\" style=\"position:relative;\"><a href=\"#onclick%EC%9D%B4%EB%B2%A4%ED%8A%B8%EB%A1%9C-startwalk%EB%A5%BC-%EB%93%B1%EB%A1%9D%ED%95%98%EB%90%98-%EB%93%9C%EB%9E%98%EA%B7%B8%ED%96%88%EC%9C%BC%EB%A9%B4-%ED%8A%B8%EB%A6%AC%EA%B1%B0%ED%95%98%EC%A7%80-%EC%95%8A%EA%B8%B0\" aria-label=\"onclick이벤트로 startwalk를 등록하되 드래그했으면 트리거하지 않기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>onClick이벤트로 <code class=\"language-text\">startWalk</code>를 등록하되 드래그했으면 트리거하지 않기</h2>\n<p>그리고 클릭 시에도 걷기 모션을 트리거하기로 했으니까, 간단히 <code class=\"language-text\">onClick={startWalk}</code>와 같이 설정해주면 됩니다</p>\n<p>그런데 문제가 있어요<br>\n<code class=\"language-text\">mousedown</code>과 <code class=\"language-text\">mouseup</code>이 트리거되면 그 후에는 <code class=\"language-text\">click</code>이벤트가 트리거돼요<br>\n순서가 <code class=\"language-text\">mousedown</code> -> <code class=\"language-text\">mouseup</code> -> <code class=\"language-text\">click</code> 순으로 트리거되는 셈입니다<br>\n이는 <code class=\"language-text\">mousedown</code> 이후에 <code class=\"language-text\">mousemove</code>가 트리거되는 드래그 상황에도 똑같아요<br>\n이 때문에, 드래그(햄부기를 잡고 옮김)후에도 마우스 클릭 이벤트가 트리거되어서 걷기 모션을 시작해버립니다.</p>\n<p>그래서 <code class=\"language-text\">dragged</code>값을 하나 유지하고, <code class=\"language-text\">mousemove</code> 이벤트핸들러에서 햄부기의 위치가 변할 때 true로 이 값을 <code class=\"language-text\">true</code>로 변경해주도록 했습니다<br>\n그리고 <code class=\"language-text\">mousedown</code> 이벤트에서 이 <code class=\"language-text\">dragged</code>값을 <code class=\"language-text\">false</code>로 변경하구요<br>\n이제 <code class=\"language-text\">startWalk()</code>함수에서는 이 <code class=\"language-text\">dragged</code>값이 true면 걷기를 시작하지 않도록 합니다.</p>\n<p>음 근데 이렇게만 하면 드래그 후에 다시는 랜덤으로 걷기 모션이 시작되지 않아요<br>\n<code class=\"language-text\">dragged</code>가 true로 남기 때문인데요<br>\n그래서 아래와 같이 최종적으로 수정했습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">const</span> startWalk <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span>method<span class=\"token operator\">:</span> <span class=\"token string\">\"click\"</span> <span class=\"token operator\">|</span> <span class=\"token string\">\"auto\"</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>method <span class=\"token operator\">===</span> <span class=\"token string\">\"click\"</span> <span class=\"token operator\">&amp;&amp;</span> dragged<span class=\"token punctuation\">)</span> <span class=\"token operator\">||</span> isWalking<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n    <span class=\"token operator\">...</span> <span class=\"token comment\">//걷기모션 시작</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>걷기 모션이 트리거된 사유를 인자로 받습니다.<br>\n<code class=\"language-text\">click</code>에 의한 것이라면, dragged여부를 확인하도록이요<br>\n이러면 이제 드래그 이후에도 걷기 모션이 시작되는 일을 막을 수 있습니다</p>\n<h1 id=\"3-말풍선으로-감정을-표현합니다\" style=\"position:relative;\"><a href=\"#3-%EB%A7%90%ED%92%8D%EC%84%A0%EC%9C%BC%EB%A1%9C-%EA%B0%90%EC%A0%95%EC%9D%84-%ED%91%9C%ED%98%84%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"3 말풍선으로 감정을 표현합니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>3. 말풍선으로 감정을 표현합니다</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 124px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9aa17303a4fb6740179a0d917a701086/d6e54/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.35483870967741%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbklEQVR42qVTS2sTURi9P8RlN63tQlRwpUXBblrSatpoGougRRAfi6KCVPAPCCq04qpSRGtNYkWswRhcugjSEGxak0yeM3k1aTIzd155epKLIa+F4OFwufd73POdOwxRpFI/qVhU5ZKhSDoVqXg4sAYkAzs1KoolMcFn0pmcoWn/2oxOXZEO83nX5tqX1YcfVx798GwrlA5uRnUnFbFYKpW2158lXi+qjkXRfmPn6fT3rTeGrsvFQk8xMVTapq7ItbKWFYT71tl3y2bHsunJLZv0fOLt46Vao2FQsazSTpJ4JNxmlAtm+eQnz+cLlpNrt8+8vDu+cn18yXrs8s2pwK9AIsZFuVAsEm6TzHdjwWabMpvPHh9+ZR1avzp079SRBwsn7lw7Z5qxXLFZ561dJLO9MM9ZLplOn58eG50ZG5kZPjoxMnpxcnLOYpk1m3tKiaMPdmDLueH4sGF3gJtO53t7K9gH0vgPkFqtVq/X+xOVSmV/f5/n+YFttRaayvl8PhqNJroRDocVRcnlchzHJZPJzlQsFlNVtaksy7Lf7z84OMhkMtkWsEmn0+hkIsViMdMCy+I6QRACgUBTOZfNQgRFbPi2BYxdrVaZqU5fbL+7uwtxIuDbcxyzgepQKASfMBKPx0VRRBxq3F/giBqswWCQF1LkxerK3t4eu1WSJK/Xiwk9Hk+5XMbwbrcbpqDjcrmQajfjIu/PHfLtqwuvyuaBeCQSwRX4NxApFArwhqOu6z6fD0/FBsQKvWSSJ1SWkUCF0gKlFGZQjY1hGNDBXm2BZTVNS6VSbNjmp0IIVn93ALOwlaEniOeAqUaj8Qdr+bKRjPzBhQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"말풍선\"\n        title=\"\"\n        src=\"/static/9aa17303a4fb6740179a0d917a701086/d6e54/image-2.png\"\n        srcset=\"/static/9aa17303a4fb6740179a0d917a701086/d6e54/image-2.png 124w\"\n        sizes=\"(max-width: 124px) 100vw, 124px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>랜덤으로 또는 마우스 호버 시 말풍선을 띄웁니다.<br>\n말풍선 내부 감정표현은 랜덤으로 바뀌어요<br>\n드래그 시에는 당황한 표정을 짓습니다 ㅋㅋㅋ</p>\n<p>이거는 딱히 사실 설명할게 없긴한데요<br>\n아까 걷는 모션을 랜덤으로 시작하게 interval을 설정했던 것처럼<br>\n가끔 2초 간 말풍선을 띄우게 했습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">let</span> timeoutId<span class=\"token operator\">:</span> NodeJS<span class=\"token punctuation\">.</span>Timeout <span class=\"token operator\">|</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> intervalId <span class=\"token operator\">=</span> <span class=\"token function\">setInterval</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>tooltipVisible <span class=\"token operator\">&amp;&amp;</span> Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> <span class=\"token number\">0.1</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setTooltipVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token function\">setEmotionIndex</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">floor</span><span class=\"token punctuation\">(</span>Math<span class=\"token punctuation\">.</span><span class=\"token function\">random</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span> emotions<span class=\"token punctuation\">.</span>length<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      timeoutId <span class=\"token operator\">=</span> <span class=\"token function\">setTimeout</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n        <span class=\"token function\">setTooltipVisible</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token number\">2000</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 2초마다 확률 체크</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span>intervalId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>timeoutId<span class=\"token punctuation\">)</span> <span class=\"token function\">clearTimeout</span><span class=\"token punctuation\">(</span>timeoutId<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 컴포넌트 언마운트 시 interval 정리</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>그리고 랜덤으로 말풍선을 띄우는 타이밍에, 말풍선 내용물도 바꿉니다.(<code class=\"language-text\">emotionIndex</code>)</p>\n<h1 id=\"크롬-확장프로그램으로-만들려고-하는데요\" style=\"position:relative;\"><a href=\"#%ED%81%AC%EB%A1%AC-%ED%99%95%EC%9E%A5%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8%EC%9C%BC%EB%A1%9C-%EB%A7%8C%EB%93%A4%EB%A0%A4%EA%B3%A0-%ED%95%98%EB%8A%94%EB%8D%B0%EC%9A%94\" aria-label=\"크롬 확장프로그램으로 만들려고 하는데요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>크롬 확장프로그램으로 만들려고 하는데요..</h1>\n<p>이제 이 리액트 코드로 작성된 햄부기를 크롬 확장 프로그램으로 만들고 싶습니다<br>\n다만 그러면 리액트 코드 그대로 쓸 수는 없겠고 자바스크립트를 사용해야 합니다<br>\n리액트로 코드를 작성하고 자바스크립트로 변환을 거쳐도 되지만,<br>\n이왕 하는거 그냥 같은 기능을 하는 자바스크립트 코드로 바꿔버렸습니다<br>\n변환은 그냥 지피티 시켰습니다</p>\n<p>그리고 혹시 아예 나중에 인스턴스를 여럿 끼울 수도 있어서 클래스로 만들었어요<br>\n부기를 화면에 둘, 셋, 넷, ... 추가하고 싶을 수도요</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">class</span> <span class=\"token class-name\">Bugi</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isWaling <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 각종 변수들..</span>\n\n    <span class=\"token comment\">// 햄부기 요소를 만들고, 이벤트리스너를 추가하고, 랜덤 모션을 추가</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">createElements</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">addEventListeners</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setupAutoWalk</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setupTooltip</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">createElements</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>img <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"img\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 햄부기 이미지 초기세팅..</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tooltip <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">createElement</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"div\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 말풍선 초기세팅..</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token function\">addEventListeners</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mousedown\"</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleMouseDown</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"mousemove\"</span><span class=\"token punctuation\">,</span> <span class=\"token parameter\">e</span> <span class=\"token operator\">=></span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">handleMouseMove</span><span class=\"token punctuation\">(</span>e<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token comment\">// 이외 필요한 이벤트리스너들 모두 등록</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">/*\n  이벤트핸들러들을 정의하고, 이외 유틸함수들을 작성하기\n  */</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">const</span> bugi <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">Bugi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>대충 쓰면 이런 식으로 나옵니다</p>\n<h2 id=\"크롬-확장프로그램-개발-세팅하기\" style=\"position:relative;\"><a href=\"#%ED%81%AC%EB%A1%AC-%ED%99%95%EC%9E%A5%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8-%EA%B0%9C%EB%B0%9C-%EC%84%B8%ED%8C%85%ED%95%98%EA%B8%B0\" aria-label=\"크롬 확장프로그램 개발 세팅하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>크롬 확장프로그램 개발 세팅하기</h2>\n<p>이제 이 코드를 다듬기 전에 먼저 크롬 확장프로그램을 어떻게 만드는지 필요한만큼만 이해해봅시다<br>\n<a href=\"https://support.google.com/chrome/a/answer/2714278?hl=ko\">크롬 확장프로그램 시작하기 가이드</a>를 보며 시작하면 됩니다</p>\n<h3 id=\"manifest-파일-정의하고-개발자모드에서-프로그램을-추가하기\" style=\"position:relative;\"><a href=\"#manifest-%ED%8C%8C%EC%9D%BC-%EC%A0%95%EC%9D%98%ED%95%98%EA%B3%A0-%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%AA%A8%EB%93%9C%EC%97%90%EC%84%9C-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8%EC%9D%84-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"manifest 파일 정의하고 개발자모드에서 프로그램을 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>manifest 파일 정의하고, 개발자모드에서 프로그램을 추가하기</h3>\n<p>제일 먼저 <code class=\"language-text\">manifest.json</code>이 필요해요<br>\npackage.json처럼 프로젝트를 정의하는 문서입니다</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\"><span class=\"token punctuation\">{</span>\n  <span class=\"token property\">\"manifest_version\"</span><span class=\"token operator\">:</span> <span class=\"token number\">3</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"name\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"Bugi\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"version\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"1.0.0\"</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"permissions\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"activeTab\"</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"scripting\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"content_scripts\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"action\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"default_icon\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"images/logo.png\"</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token property\">\"background\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"service_worker\"</span><span class=\"token operator\">:</span> <span class=\"token string\">\"scripting.js\"</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">manifest_version</code>은 2 또는 3을 쓰는데 버전별로 명세가 다릅니다.<br>\n<code class=\"language-text\">name</code>과 <code class=\"language-text\">version</code>은 각각 확장프로그램의 이름과 버전이 됩니다<br>\n<code class=\"language-text\">permissions</code>에서는 프로그램이 사용하는 권한을 명시해요. <code class=\"language-text\">activeTab</code>은 현재 활성 탭에 대한 접근을, <code class=\"language-text\">scripting</code>은 <code class=\"language-text\">executeScript()</code>에 대한 권한입니다<br>\n우리는 자바스크립트를 실행할거라서 <code class=\"language-text\">scripting</code>권한이 필요해요<br>\n<code class=\"language-text\">action</code>의 <code class=\"language-text\">default_icon</code> 프로퍼티는 확장프로그램의 아이콘입니다</p>\n<p>이제 우리가 할 일로는 가장 중요한게 <code class=\"language-text\">\"background\": {\"service_worker\": \"scripting.js\"}</code>입니다<br>\n이 <a href=\"https://developer.chrome.com/docs/extensions/reference/manifest/background?hl=ko\">백그라운드 메니페스트</a>는 자바스크립트 파일을 서비스 워커로 지정하게 합니다.<br>\n이 자바스크립트 파일을 어떻게 정의하는지는 아래에서 봅시다</p>\n<p>아무튼 일단 <code class=\"language-text\">manifest.json</code>을 만들었으면 개발을 위해 크롬 익스텐션 개발자모드로 이동합시다\n크롬 주소창에 <code class=\"language-text\">chrome://extensions</code>를 입력하고,<br>\n오른쪽 상단의 \"개발자 모드\"를 켭니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/97917ab10d951818d683997795dc553f/31493/image-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.44303797468354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAAA80lEQVR42q2QW0vDQBSE8zts09zvsaktVmtqjEWflOIltFTwQl/Ud+kvKP7tz56FlRYEEXwYmJ0zZ3Z2Ddvx6VguadZleDRSXDTL9gijlDjJCcJEcdcL8YMYz4/Qe0Wvz+TiUu36QYThuAFmx6Ecn/H49EyS7qsw0a6up3ysVry+vTNfPFCfT5jNF0xvbsnyglbb4mW5ZP255n7WMDweYchNGkVvoIy6pTQrxxUnZUUUZ6R5l4PBIf0N5Nw27c3slLumoaprpe0ESisdpp+917JUE+EyE48EaV/bdL73xLMT+BPkSwTbXJ+1tu3/NfCv+PfALwIyzygqX+3zAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"개발자모드 켜기\"\n        title=\"\"\n        src=\"/static/97917ab10d951818d683997795dc553f/f058b/image-5.png\"\n        srcset=\"/static/97917ab10d951818d683997795dc553f/c26ae/image-5.png 158w,\n/static/97917ab10d951818d683997795dc553f/6bdcf/image-5.png 315w,\n/static/97917ab10d951818d683997795dc553f/f058b/image-5.png 630w,\n/static/97917ab10d951818d683997795dc553f/31493/image-5.png 664w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그럼 이제 상단에 *\"압축 해제된 확장프로그램을 로드합니다\"*라는 버튼이 생기는데,<br>\n이걸 클릭해서 폴더를 선택해줍시다</p>\n<h3 id=\"활성-탭에-스크립트-삽입하기\" style=\"position:relative;\"><a href=\"#%ED%99%9C%EC%84%B1-%ED%83%AD%EC%97%90-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%82%BD%EC%9E%85%ED%95%98%EA%B8%B0\" aria-label=\"활성 탭에 스크립트 삽입하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>활성 탭에 스크립트 삽입하기</h3>\n<p>이제 서비스 워커로 지정한 <code class=\"language-text\">scripting.js</code> 파일을 작성할건데요<br>\n<a href=\"https://developer.chrome.com/docs/extensions/get-started/tutorial/scripts-activetab?hl=ko\">활성 탭에 스크립트 삽입하기</a> 문서를 참고합시다<br>\n주의할 점은, <code class=\"language-text\">action</code>의 <code class=\"language-text\">default_popup</code>이 있을 때는 <code class=\"language-text\">background</code>의 <code class=\"language-text\">service_worker</code>를 사용할 수 없습니다<br>\n크롬 익스텐션 튜토리얼에서 <code class=\"language-text\">default_popup</code>예제를 보여주는데 만약 이걸 따라했었다면 이건 지워줍시다</p>\n<p>아무튼 <code class=\"language-text\">scripting.js</code> 파일에 <code class=\"language-text\">chrome.action.onClicked.addListener()</code>와 같이 이벤트핸들러를 추가해줍시다<br>\n이는 확장프로그램 아이콘이 클릭될 때 트리거될 것이고<br>\n첫 번째 인자로 <code class=\"language-text\">tab</code>을 받는데 이는 현재 탭 정보입니다</p>\n<p>저는 일단 아래처럼, 익스텐션이 ON 또는 OFF일 때 라벨을 추가하게 하고<br>\n<code class=\"language-text\">mountBugi</code>라는 임시 함수를 <code class=\"language-text\">executeScript</code>로 실행하게 하겠습니다<br>\n이는 그냥 간단한 HTML요소를 추가하여 우리의 햄부기를 잘 마운트할 수 있는지를 체크하려는 함수입니다</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">chrome<span class=\"token punctuation\">.</span>action<span class=\"token punctuation\">.</span>onClicked<span class=\"token punctuation\">.</span><span class=\"token function\">addListener</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">async</span> <span class=\"token parameter\">tab</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> prevState <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>action<span class=\"token punctuation\">.</span><span class=\"token function\">getBadgeText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">const</span> nextState <span class=\"token operator\">=</span> prevState <span class=\"token operator\">===</span> <span class=\"token string\">\"ON\"</span> <span class=\"token operator\">?</span> <span class=\"token string\">\"OFF\"</span> <span class=\"token operator\">:</span> <span class=\"token string\">\"ON\"</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// Set the action badge to the next state</span>\n  <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>action<span class=\"token punctuation\">.</span><span class=\"token function\">setBadgeText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id<span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">text</span><span class=\"token operator\">:</span> nextState\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  chrome<span class=\"token punctuation\">.</span>scripting\n    <span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n      <span class=\"token keyword\">function</span><span class=\"token operator\">:</span> mountBugi\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">then</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">log</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Bugi injected\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">.</span><span class=\"token function\">catch</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">error</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      console<span class=\"token punctuation\">.</span><span class=\"token function\">error</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"Failed to inject bugi:\"</span><span class=\"token punctuation\">,</span> error<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">mountBugi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// 임시 HTML요소와 CSS 스타일 추가 : 화면 중앙 50%를 채우는 반투명 div</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>스크립트를 실행하려면 <code class=\"language-text\">chrome.scripting.executeScript({target, function or file})</code>를 호출합니다</p>\n<ul>\n<li><code class=\"language-text\">target</code>은 스크립트를 실행할 대상 탭인데, <code class=\"language-text\">tab.id</code>로 현재 탭을 대상으로 해줍니다</li>\n<li><code class=\"language-text\">function</code> 또는 <code class=\"language-text\">file</code>을 추가합니다. 지금처럼 <code class=\"language-text\">function</code>을 넘겨도 되고, 특정 <code class=\"language-text\">file</code>을 넘겨도 되지만 둘 다는 안됩니다. 하나만 해야함</li>\n</ul>\n<p>이제 개발자모드에서 익스텐션을 리로드하고, 익스텐션 아이콘을 클릭하여 실행하면 아래와 같이 나옵니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dec2f3d75663945b1ea634cb079dc852/2c5fd/image-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 148.1012658227848%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAeCAYAAAAsEj5rAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFC0lEQVR42nVW+U8bVxD2/9srGB+YGEjI0fwLlSpVPRL1UJKmKQQSqVEkKuWHQBGlHLbXa6+99+H1etcn5uvMmDUkIZY+z9v33szOPZtRVRUnNQUHr7eg/PM3Gi0djYaKZrNJtDGHYRiwLAumacJxHFQqFdTrdRwfH6NtWKioBlETmcFggF7cx4G6h8ivYDiaIkkSxISo10MYdhB0OphMJuDf+fm50F4cI4p68oLJFOgOIDTT7UbQNA2GaaAThqSZRho1mRVXfywoxXQ6na8vXzJ7zvRIC4VUb7VacF0X1WoNilJ/73K6vu734VnmUxendJHNZG3OCExlfzp7AZ+Nx+PZ+dmZQDSMyBdVtYG61kLbtKCoTXpuotXWodRqaLfbqBHloDSbDUFDnQWpUq2SZW2B7/vgeGSSJKYNEtDShJlNN/Q2nLAPOwa8BGh3gWR8DqMH6G4Ine5pdM8jISZFXteNS5OjZATFCKEaHbTtLk4bDrb/2sHWq9fY3HqFF9svsbX9ivASGy8Imy/w7Nkf2N7eFs1rikJBbUlKiUC/E+JU0aAZLoaTc5hOgGKpjGx2EflcDrkLLBLyOdrL55BdXMTy8rLk53A4ElMZInA8HiGOe2Aq+UVRf/Dga9y6dQvr6+u4ffv2FawL+Ozu3buwbfujSGdGFKkoigTD4VDovXv3sLKygrW1tWuxuroqL+OknkV+eikwCAIpI1afncxVcv/+fWFkrVibFKmmvL5z587cb+9pOKZ86iV9xP2+mNukqmEN8vk8CoUCSqUSlpaWBOleSk9OTsQim2qbrROBXG6HRyeoKqqU3eHhIQUhj4WFBWIqCuM8MIs5EcZr3j86OqZa71KFOeiTQiKQJXu+B8d24LmedBmOIPuQzWIT2V8peI8p+/naoHBXcRwXnueBG4Wu61gjH2VFmwKKRUaRtFucm5vNZsUFbDLzWpZJvN2ZwIT853k+lU4g/uBqYR+ywCIxsQ9Z46WLdbE482W5XKYmoggPB5aDKQLTYmea5iGbw0KvSxmO8CpnAJmdRnk0GhNGlMsTZEJqkl1CSObG/YF03ZXVNRRIk6XS8rUoLpVws7xCgawLz7u9fRydnEKn5pKxfOqHZgTV6qFleXRQQS5fxFc3FkRogZiZFj8hMBkM0SFlur1YILWsWw5sL4AfRmhobZRXVlFavonlm2WhH4KF8p3ahUCxMhXoBh20yMwatf06CXu3f4DPvvgSnxMWqEFwcD7EjYUsWVFAhYbbRwIj+ksoKVu6if9Oq6hQgj9++ju++fY7PPrlV/z2+Al+ePgI3//0ED8++hlPnj7D8z838HxjE4ZlS5W9J5D/ojiB5foizCHTe+RoPXCgBTQ2Q5eaLU0+ckdM2gw4mpMzjAhxMpgLutSQhAVUPhpp6FIu+kEIj9zgUG6alLQ2UV47gQ87oIrqzKjp0xlVWHAlICKQ1WXopo0mtXLb9UVLjdbNtiFzhqlO9araOnTPQcPRKSta0GxWooNUBkP64YgSks0QU+iZ6eRsCu5Ek7Mra96/iot95me+Ibkjw+OQs3xETYIpj0Om3DR4TKbtfSwvHkvLZ0a+M6BgpneZzgc9D5kmwSTzuINwx6nTNw9/wygXQ8gmf2qUXmw+p5lLzeT0tCITjycg9wB+aYYnF3fsf6m37e3v4+3bt3jz5g12dnawu7srH0T8QVVTajLlFMo9ntf8Ij5LaY32q9Uq/gdkkRWBvztW4AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"임시 scripting\"\n        title=\"\"\n        src=\"/static/dec2f3d75663945b1ea634cb079dc852/f058b/image-6.png\"\n        srcset=\"/static/dec2f3d75663945b1ea634cb079dc852/c26ae/image-6.png 158w,\n/static/dec2f3d75663945b1ea634cb079dc852/6bdcf/image-6.png 315w,\n/static/dec2f3d75663945b1ea634cb079dc852/f058b/image-6.png 630w,\n/static/dec2f3d75663945b1ea634cb079dc852/40601/image-6.png 945w,\n/static/dec2f3d75663945b1ea634cb079dc852/2c5fd/image-6.png 1006w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>화면에 반투명 div 영역을 채웠습니다<br>\n이게 되는거면 당연히 bugi도 추가할 수 있습니다<br>\n다만 <code class=\"language-text\">function</code>을 실행하는게 아닌 <code class=\"language-text\">file: bugi.js</code>와 같이 파일을 실행하게 하겠습니다<br>\n이제 우리는 <code class=\"language-text\">bugi.js</code>를 잘 다듬어서 동작하게 만드는게 목표입니다</p>\n<h3 id=\"이미지-가져오려면\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B0%80%EC%A0%B8%EC%98%A4%EB%A0%A4%EB%A9%B4\" aria-label=\"이미지 가져오려면 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이미지 가져오려면</h3>\n<p>이미지를 그냥 <code class=\"language-text\">require('images/bugi.png')</code> 이런식으로 가져올 수는 없습니다<br>\n대신 크롬 런타임에서 가져오도록 해야하는데요<br>\n먼저 manifest에 <code class=\"language-text\">web_accessible_resources</code>를 설정합니다</p>\n<div class=\"gatsby-highlight\" data-language=\"json\"><pre class=\"language-json\"><code class=\"language-json\">...\n<span class=\"token property\">\"web_accessible_resources\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span>\n  <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">\"resources\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"*.png\"</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">,</span>\n    <span class=\"token property\">\"matches\"</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"&lt;all_urls>\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span></code></pre></div>\n<p>이렇게 하여 런타임에 액세스 가능한 리소스를 명시해주고<br>\n<code class=\"language-text\">bugi.js</code>에서 이미지에 접근할 때는 <code class=\"language-text\">chrome.runtime.getURL</code>로 가져옵니다.<br>\n아래처럼요</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\">assets <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token literal-property property\">sitting</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">getURL</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"images/bugi/sitting.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">standing</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">getURL</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"images/bugi/standing.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">walking01</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">getURL</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"images/bugi/walking00.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">walking02</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">getURL</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"images/bugi/walking01.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span>\n  <span class=\"token literal-property property\">walking03</span><span class=\"token operator\">:</span> chrome<span class=\"token punctuation\">.</span>runtime<span class=\"token punctuation\">.</span><span class=\"token function\">getURL</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"images/bugi/walking02.png\"</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>한 번에 갖고있고자 Bugi클래스 내에 이렇게 asset으로 저장했습니다<br>\n그리고 밑에서 살펴보겠지만, 변수가 중복으로 선언되는 문제가 발생해서 그렇기도 합니다</p>\n<h2 id=\"익스텐션-끌-때는-스크립트를-제거하기\" style=\"position:relative;\"><a href=\"#%EC%9D%B5%EC%8A%A4%ED%85%90%EC%85%98-%EB%81%8C-%EB%95%8C%EB%8A%94-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%A0%9C%EA%B1%B0%ED%95%98%EA%B8%B0\" aria-label=\"익스텐션 끌 때는 스크립트를 제거하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>익스텐션 끌 때는 스크립트를 제거하기</h2>\n<p>익스텐션을 끌 때는 응당 햄부기가 사라져줘야합니다</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/88ee549296de077f252290d5c2892eea/f7616/image-11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAACIElEQVR42m3P22/SYBgG8CJOYjzELEMEObaDAqWlB3oAUijtB18ppbQwYATZxkDZxG0eYgzRa733YomJuzLe+FeKy7awyJvv4r34fnmeF/F4PG632xvwYwThDYRSDJdiuThN/XsMjbMMSqXJOJZK42g2+Szs37i7ce96EMTlQhDk8ebmVuB5BE9m5UJS4hI8TRZ5tpjjeJIhE1wSy6RRlEC9IR/y/9x/+CCMbzMlQVSEgsyWi7QmEhpPAJECfEbJEXkK58l4JOJffnbdMNdlss/7xNDEliY5MteUeVXTdtvNTgPUC6RRpGtiVhVIjV/GB5GrrisYD/nGemEICwMgvZofn37/sbj4tTj/2TWrhkjpEg0lCopkNh65he9crgQWft2r75vlUaN00LPff/325fefD+cX1uhlmaYMkYY8ZUg0i8fWYDIenfeNsVU5tNQhEA9a0NrpBxP0o63o0wCqMFQjz5h5jsOxNTgdC87bcGaDmQOmLbAH5TqfjUYSaQwH7FKyBk+18iyPozeXrtSOhc96jXm7duxUZ7Y2NbV9XXlRLQ1BsVcSdpV8z9RtCOir5Ns4m0A/juw3Hf2ko88deOTAmVWdmmBQyc+H3XeLz2rdqKgqgcbWYAbHPo2c0279rGu87ZtnPfNkpzGz4bLCxNJNy5IyxEAWiunttbVDR3btsKFOm2BigkmzNm5WxxbcM7QRVOo52hBYRxa4eHQV/wU9Wn6SBJzxeAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"없어져볼게\"\n        title=\"\"\n        src=\"/static/88ee549296de077f252290d5c2892eea/f058b/image-11.png\"\n        srcset=\"/static/88ee549296de077f252290d5c2892eea/c26ae/image-11.png 158w,\n/static/88ee549296de077f252290d5c2892eea/6bdcf/image-11.png 315w,\n/static/88ee549296de077f252290d5c2892eea/f058b/image-11.png 630w,\n/static/88ee549296de077f252290d5c2892eea/f7616/image-11.png 766w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>내가 없어져볼게</figcaption>\n</figure>\n<p>근데 우리는 각종 이벤트리스너도 추가했기도 하고, 정리를 위해 작성할 코드가 좀 됩니다<br>\n따라서 Bugi클래스에 아래와 같이 <code class=\"language-text\">destroy</code>함수를 추가했습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">_destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// DOM에서 요소들을 제거</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>img<span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>img<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tooltip<span class=\"token punctuation\">)</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tooltip<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 이벤트 리스너 제거</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">'mousemove'</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>handleMouseMove<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token operator\">...</span> <span class=\"token comment\">//등등</span>\n\n  <span class=\"token comment\">// interval 제거</span>\n  <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>autoWalkInterval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">clearInterval</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>tooltipInterval<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n  <span class=\"token comment\">// 애니메이션 중지</span>\n  <span class=\"token function\">cancelAnimationFrame</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>walkRAF<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 <code class=\"language-text\">scripting.js</code>에서는 off될 때 이 함수만 호출하면 됩니다</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// scripting.js에서, chrome.aciton.onClicked.addEventListener 내부</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextState <span class=\"token operator\">===</span> <span class=\"token string\">\"OFF\"</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Remove the Bugi element</span>\n  <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token function-variable function\">function</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      bugi<span class=\"token punctuation\">.</span><span class=\"token function\">_destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n  chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">insertCSS</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"bugi.css\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n    <span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n    <span class=\"token literal-property property\">files</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">[</span><span class=\"token string\">\"bugi.js\"</span><span class=\"token punctuation\">]</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>OFF로 넘어가는 경우에는 이렇게 파괴함수를 호출합니다.</p>\n<h2 id=\"익스텐션을-껐다-켜면-스코프에-변수들이-중복으로-생성되는-오류가-발생해요\" style=\"position:relative;\"><a href=\"#%EC%9D%B5%EC%8A%A4%ED%85%90%EC%85%98%EC%9D%84-%EA%BB%90%EB%8B%A4-%EC%BC%9C%EB%A9%B4-%EC%8A%A4%EC%BD%94%ED%94%84%EC%97%90-%EB%B3%80%EC%88%98%EB%93%A4%EC%9D%B4-%EC%A4%91%EB%B3%B5%EC%9C%BC%EB%A1%9C-%EC%83%9D%EC%84%B1%EB%90%98%EB%8A%94-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%B4%EC%9A%94\" aria-label=\"익스텐션을 껐다 켜면 스코프에 변수들이 중복으로 생성되는 오류가 발생해요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>익스텐션을 껐다 켜면 스코프에 변수들이 중복으로 생성되는 오류가 발생해요</h2>\n<p>일단 OFF 시 bugi 인스턴스 내부를 정리하긴 했습니다<br>\n근데 bugi 변수 자체는 남아있는데요<br>\n이제 다시 ON으로 켜면 <code class=\"language-text\">const bugi = new Bugi()</code>를 실행하려 하기 때문에<br>\nbugi라는 변수가 중복으로 생성되어 오류가 발생합니다<br>\n그리고 <code class=\"language-text\">class Bugi</code>도 마찬가지인데 똑같은 Bugi라는 이름의 클래스가 또 생겨버려요</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 256px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/688ed32b958ce9c8611522263fb3d857/6f3f2/image-12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.21518987341771%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGElEQVR42q1SDWuDMBDt//9jMhFdZZv7UCdO1JmaNuarJjHbqS2WDVbKfBzh3XEveUdu8/UPbNYUW2tvFg/DYIwZJthrWMRzUlWV4zhhGGZZFgQBnK7rxnH8t5fxZa11nucfE5IkSdO0KIooioDUdV1dAFLoxBjPl45iSinkZVkSQn5M/tsw5xwhtIiFEPMLbdvS7gxCTnFRYYw1TYOaZhGP9wnBpKScE8YJpRAdcM47IUABhIgpHRuY0vo882RGVSXz7o7Jax89sK0vH7fy+emYvMl7v3+JJFRCnwden7/TwAMySLF8lZFC7ZAmB7PHmnaGdYYcFG77PAOiodgi9Vlrsld4Bz3W6LU2DMyP/u2JXI31d/sm8TfWu2izaY9/GwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"중복\"\n        title=\"\"\n        src=\"/static/688ed32b958ce9c8611522263fb3d857/6f3f2/image-12.png\"\n        srcset=\"/static/688ed32b958ce9c8611522263fb3d857/c26ae/image-12.png 158w,\n/static/688ed32b958ce9c8611522263fb3d857/6f3f2/image-12.png 256w\"\n        sizes=\"(max-width: 256px) 100vw, 256px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그래서 일단 Bugi클래스는 전역객체인 window의 프로퍼티로 Bugi클래스를 선언하고, 없을 때만 새로 생성하게 했습니다<br>\n또한 bugi 인스턴스도 window의 프로퍼티로 선언하고, OFF 시에는 이를 아예 제거해버립니다</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token comment\">// bugi.js</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>window<span class=\"token punctuation\">.</span>Bugi<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">class</span> <span class=\"token class-name\">Bugi</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n  <span class=\"token punctuation\">}</span>\n  window<span class=\"token punctuation\">.</span>Bugi <span class=\"token operator\">=</span> Bugi<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\nwindow<span class=\"token punctuation\">.</span>bugi <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">window<span class=\"token punctuation\">.</span>Bugi</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token comment\">// scripting.js</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>nextState <span class=\"token operator\">===</span> <span class=\"token string\">'OFF'</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// Remove the Bugi element</span>\n  <span class=\"token keyword\">await</span> chrome<span class=\"token punctuation\">.</span>scripting<span class=\"token punctuation\">.</span><span class=\"token function\">executeScript</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\t<span class=\"token literal-property property\">target</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">tabId</span><span class=\"token operator\">:</span> tab<span class=\"token punctuation\">.</span>id <span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token function-variable function\">function</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t  window<span class=\"token punctuation\">.</span>bugi<span class=\"token punctuation\">.</span><span class=\"token function\">_destroy</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t  <span class=\"token keyword\">delete</span> window<span class=\"token punctuation\">.</span>bugi<span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 해서 중복 선언을 막을 수 있습니다<br>\n나중에는 햄부기를 화면에 여럿 추가하려면 배열로 선언해서 <code class=\"language-text\">window.bugi.push(new Bugi())</code> 이렇게 해도 괜찮겠네요</p>\n<h2 id=\"이제-터치-이벤트를-따로-관리해줘야-합니다\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EC%A0%9C-%ED%84%B0%EC%B9%98-%EC%9D%B4%EB%B2%A4%ED%8A%B8%EB%A5%BC-%EB%94%B0%EB%A1%9C-%EA%B4%80%EB%A6%AC%ED%95%B4%EC%A4%98%EC%95%BC-%ED%95%A9%EB%8B%88%EB%8B%A4\" aria-label=\"이제 터치 이벤트를 따로 관리해줘야 합니다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이제 터치 이벤트를 따로 관리해줘야 합니다</h2>\n<p>리액트일 때는 알아서 추상화된 이벤트를 썼지만, 이제 아닙니다<br>\n그래서 터치 이벤트에 대해 따로 구현해줘야 합니다</p>\n<p>위에서 잠깐 살펴봤듯이, 터치 이벤트에 의한 이벤트 객체에서는 바로 <code class=\"language-text\">clientX, clientY</code>를 가져올 수 없습니다<br>\n대신에 <code class=\"language-text\">e.touches[0].clientX</code>와 같이 써줘야 합니다<br>\n나머지는 비슷하긴 한데, 미묘하게 다릅니다<br>\n아래에서 <code class=\"language-text\">mousedown</code>과 <code class=\"language-text\">touchstart</code>, <code class=\"language-text\">mousemove</code>와 <code class=\"language-text\">touchmove</code>를 같이 뒀으니 비교해보세요<br>\n<code class=\"language-text\">mouseup</code>과 <code class=\"language-text\">touchend</code>는 다른게 없습니다 사실상</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token function\">handleMouseDown</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// isDragging, pose 등 변수 업데이트는 동일</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shiftX <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>clientX <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>img<span class=\"token punctuation\">.</span>offsetLeft<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shiftY <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>clientY <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>img<span class=\"token punctuation\">.</span>offsetTop<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">handleTouchStart</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token comment\">// isDragging, pose 등 변수 업데이트는 동일</span>\n  <span class=\"token keyword\">const</span> touch <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>touches<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shiftX <span class=\"token operator\">=</span> touch<span class=\"token punctuation\">.</span>clientX <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>img<span class=\"token punctuation\">.</span>offsetLeft<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shiftY <span class=\"token operator\">=</span> touch<span class=\"token punctuation\">.</span>clientY <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>img<span class=\"token punctuation\">.</span>offsetTop<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">handleMouseMove</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isDragging<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>moved <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// onclick 방지를 위한 moved 변수 업데이트</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>left <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>clientX <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shiftX<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>top <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>clientY <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shiftY<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updatePosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token function\">handleTouchMove</span><span class=\"token punctuation\">(</span><span class=\"token parameter\">e</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>isDragging<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span><span class=\"token punctuation\">;</span>\n  e<span class=\"token punctuation\">.</span><span class=\"token function\">preventDefault</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 기본 터치 이벤트를 막아줘야 함</span>\n  <span class=\"token keyword\">const</span> touch <span class=\"token operator\">=</span> e<span class=\"token punctuation\">.</span>touches<span class=\"token punctuation\">[</span><span class=\"token number\">0</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>left <span class=\"token operator\">=</span> touch<span class=\"token punctuation\">.</span>clientX <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shiftX<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span>top <span class=\"token operator\">=</span> touch<span class=\"token punctuation\">.</span>clientY <span class=\"token operator\">-</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>shiftY<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">updatePosition</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>매우 비슷하긴합니다. <code class=\"language-text\">clientX, clientY</code>를 가져오는 방법과 move에서 한 줄씩 차이가 나네요<br>\n<code class=\"language-text\">mousemove</code>에서는 onclick까지 트리거되는 현상을 방지하기 위한 변수 업데이트를 진행했습니다<br>\n<code class=\"language-text\">touchmove</code>에서는 기본 터치 이벤트를 막아주기 위해 <code class=\"language-text\">e.preventDefault()</code>를 호출했습니다</p>\n<h2 id=\"이만하면-된-것-같은데요\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%A7%8C%ED%95%98%EB%A9%B4-%EB%90%9C-%EA%B2%83-%EA%B0%99%EC%9D%80%EB%8D%B0%EC%9A%94\" aria-label=\"이만하면 된 것 같은데요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이만하면 된 것 같은데요</h2>\n<p>이제 제출하고싶은데요<br>\n먼저 프로젝트 폴더를 압축해서 <code class=\"language-text\">.zip</code>파일로 만들어야 합니다<br>\n그 다음 <a href=\"https://chrome.google.com/u/2/webstore/devconsole\">크롬 웹 스토어 개발자 대시보드</a>로 접속합시다<br>\n근데 개발자등록하려면 5달러를 내야했어요 ㅜㅜ</p>\n<p>아무튼 가서 개발자 등록까지 되었으면 \"새 항목\"버튼을 누릅시다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/94ccd2a29a357df4650a0e15d9707404/b97f6/image-7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB9ElEQVR42oWTy27TQBSG/Wo8BRI7uqBV4sbxJb6nC1Z9gVYVRbRJeAEkYMNFSOzYEFeUVYLUQlI3apwLVW0nSn7mnMShVWqI9OnM8WS+OXPGljTdhFJSsV0qQ94uoygrKCkalLLOkVC1CnTDugOto+c0r+sVyAUZGxtPIGmGC81wYFouKqbDmBxt2I63xM/BgyNQDQ+PCxYKig1J1Uyxo83CDJJqYlde4Pq52ALf97GluHjw0MSjTQdSdoTbQhJl438JM1zPR1WIPRGlyrKiv8LFEV1/B351R/y5yos8kdNGLklEtOxF9Zbtwlq2hnLpdmUENbqs6ihubUJWdM6Lcomf0cWpmiEuQhWXJi7DMFdSGpN0Tbi3f4Cj4xoO9vfw4qiG41qD81q9IcZ11Divo954iWeHzxe9pIqX7bkjpGO02z+QJAmm0ynyfvP5nGOv1+PqqAWOeCvuFbbabUwmEwyHQ1z1+xgOBoivB0gEgyhCvx9hNBrxpp1OZ/VqsTivQqqOhOHFBX52e3j7pYvXgvNfIcIw5Lk0TYWwu5LlClutFu8+Ho+RxjcIo2vsvonw9FXE4zS5EXO/EccxV2haDnOvkDg7O+f+zGaz//bw8rK3EmWsCd+9/4Bvp9/RbAYIghPma3NBlgdBgObJKT5++rz2Nf0BANLUAOlQkIYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"개발자 대시보드 새 항목\"\n        title=\"\"\n        src=\"/static/94ccd2a29a357df4650a0e15d9707404/f058b/image-7.png\"\n        srcset=\"/static/94ccd2a29a357df4650a0e15d9707404/c26ae/image-7.png 158w,\n/static/94ccd2a29a357df4650a0e15d9707404/6bdcf/image-7.png 315w,\n/static/94ccd2a29a357df4650a0e15d9707404/f058b/image-7.png 630w,\n/static/94ccd2a29a357df4650a0e15d9707404/40601/image-7.png 945w,\n/static/94ccd2a29a357df4650a0e15d9707404/b97f6/image-7.png 958w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그럼 이제 ZIP파일을 업로드하여 등록을 시작할 수 있습니다\n이제 시키는대로 하고 심사를 제출하면 됩니다<br>\n저는 계속 막 거부되길래... 왜 자꾸 거부하냐고 막 재제출하고 컴플레인하고 그랬는데<br>\n알고보니 실수로 파일을 잘못 올렸습니다. 머쓱;;;<br>\n아무튼 이제 잘 게시되었습니다<br>\n저는 권한을 쓰는 것도 적고, 수집하는 정보도 없어서 심사가 빨리 이루어졌습니다</p>\n<p>👉<a href=\"https://chromewebstore.google.com/detail/bugi/cidndoahplamogkfaimmahedcnakjnag?hl=ko\">햄부기 다운로드하러 가기</a>👈 §§즉시시작§§</p>\n<p>동영상도 다시 찍고, 설명도 다시 쓰고, 버그도 고치고, 이름도 Bugi And Friends 이런식으로 바꿔서 또 게시해야겠어요</p>\n<hr>\n<p>햄부기 많이 사랑해주시고, 귀여워해주시고, 아껴주시고, 격려해주시고, 염려해주시고, 근심해주시고, 성원해주시고, 신경써주시고, 보살펴주시고, 밀어주시고, 근심해주시고, 보태주시고, 응원해주시고, 믿어주시고, 걱정해주시고, 용기를 주시고,</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6a2f3ca2d42077a601a66609f80fde11/5a46d/image-8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AIqSlomTo2Rud1ZdX2JkdxokSxgoW3NpqWFXeD06SjM7dFZr1trX9Ofi7vTv9cbH8kZj2DNPzWyD4cu1+ACIkZWGk6JjbXZbX2KEgpIvRIkcN4c2MkAxJh00KCIxJiFES3rQ0fXRyOvYyu+or+83WN00UM09Us6/qPEAh5KVhZKhYm11V1pbWVtmMj1eIjFXSTYzmWlYqHhpgmlbT0hc5d/72NHs1Mfy29nwY3XgOVPSg3/c2b37AIeRlIaQn2FqdVtdXGprbEZPYUBBU41lWqt2ZpprXpt1ZoBnceTa+ci77Lym8tbC+cGr9bei8Ne9+9vC+wCGj5KFkKBibXVaXltvbm9CSF1fVlzHi23IhG2kbmKxgGape3ajjdiei9utluO0nOy+pu/Gr/HJsPDQuO4AhY6SiJWjbnmFWlxab29wSEtaQ0ddtYZ9yIFppGlfm3FbrpK6vaX5tJvpuqLuxKvyzrL31Lf42Lv45sT+AHyMkYaQnH6ImmBjX21ublFUYDI+ZXxojqtzW5tpVoRlXIh/l5OGrqiXy8Kr69q7/sSp7cOq7tm667+u0ACfgYiAjpSIk6d4e31rbGZucHBISk9BPkKVb2WNW0WDZm9XVlo/QTxMUFBkZmeDfK47SMEsQbyHfdBVRlIAu0dHoG1vhJKbf4OGbGtjamplTEtGPz9BYE9ch2JnfGN6R0JMNDQ4NDM5MzY0OkJXQ1GaO0ycWmGrpo6sAGskJn4/QoaQlW1zclxbVlhXVE1NSjU2OGFWZZuDnpJ7lFRMVzAwNjQzOS8uNTxAQV1iXV1gXVlfXFddXwBaICNyOj+Gj5RtdXRSUExMS0tDQ0EzMzZQSlaciaGbg51cU18uMTUzMzkqKS8vMDZdYmhtc3hnb3Nmam87PkQD4ss+2QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"아껴주시고\"\n        title=\"\"\n        src=\"/static/6a2f3ca2d42077a601a66609f80fde11/5a46d/image-8.png\"\n        srcset=\"/static/6a2f3ca2d42077a601a66609f80fde11/c26ae/image-8.png 158w,\n/static/6a2f3ca2d42077a601a66609f80fde11/5a46d/image-8.png 300w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>엄용수 옹.. (라디오스타에서)</figcaption>\n</figure>","frontmatter":{"title":"🍔 ദി=´∀｀) 안녕하새용저는햄부기애용","date":"November 09, 2024","description":"드래그 앤 드롭, 애니메이션 등을 리액트로 구현하고, JS로 바꿔서 크롬 확장 프로그램으로 만들기","tag":["React","JavaScript","Chrome Extension"]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#1-%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%95%A4-%EB%93%9C%EB%A1%AD%EC%9C%BC%EB%A1%9C-%EC%9E%A1%EC%95%84-%EC%98%AE%EA%B8%B8-%EC%88%98-%EC%9E%88%EC%8A%B5%EB%8B%88%EB%8B%A4\">1. 드래그 앤 드롭으로 잡아 옮길 수 있습니다</a></p>\n<ul>\n<li>\n<p><a href=\"#html%EC%9A%94%EC%86%8C%EB%A5%BC-%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%95%A4-%EB%93%9C%EB%A1%AD%ED%95%98%EA%B8%B0\">HTML요소를 드래그 앤 드롭하기</a></p>\n<ul>\n<li><a href=\"#%EB%93%9C%EB%9E%98%EA%B7%B8%EB%A5%BC-%EC%8B%9C%EC%9E%91%ED%95%98%EB%A9%B4-%EC%BB%A4%EC%84%9C-%EC%9C%84%EC%B9%98%EB%A1%9C-%EC%9A%94%EC%86%8C%EA%B0%80-%EC%88%9C%EA%B0%84%EC%9D%B4%EB%8F%99%ED%95%B4%EC%9A%94\">드래그를 시작하면 커서 위치로 요소가 순간이동해요</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%ED%84%B0%EC%B9%98%EB%A1%9C-%EB%93%9C%EB%9E%98%EA%B7%B8-%EC%95%A4-%EB%93%9C%EB%A1%AD%ED%95%98%EA%B8%B0\">터치로 드래그 앤 드롭하기</a></p>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#2-%ED%81%B4%EB%A6%AD-%EC%8B%9C-%EB%98%90%EB%8A%94-%EA%B0%80%EB%A7%8C%ED%9E%88-%EC%84%9C%EC%9E%88%EB%8B%A4%EA%B0%80-%EC%95%84%EB%AC%B4-%EB%95%8C%EB%82%98-%EA%B1%B7%EA%B8%B0%EB%A5%BC-%EC%8B%9C%EC%9E%91%ED%95%A9%EB%8B%88%EB%8B%A4\">2. 클릭 시, 또는 가만히 서있다가 아무 때나 걷기를 시작합니다</a></p>\n<ul>\n<li><a href=\"#requestanimationframe%EC%9C%BC%EB%A1%9C-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98-%EC%84%A4%EC%A0%95%ED%95%98%EA%B8%B0\">requestAnimationFrame으로 애니메이션 설정하기</a></li>\n<li><a href=\"#%EB%9E%9C%EB%8D%A4%EC%9C%BC%EB%A1%9C-%EC%95%A0%EB%8B%88%EB%A9%94%EC%9D%B4%EC%85%98%EC%9D%84-%EC%8B%9C%EC%9E%91%ED%95%98%EA%B8%B0\">랜덤으로 애니메이션을 시작하기</a></li>\n<li><a href=\"#onclick%EC%9D%B4%EB%B2%A4%ED%8A%B8%EB%A1%9C-startwalk%EB%A5%BC-%EB%93%B1%EB%A1%9D%ED%95%98%EB%90%98-%EB%93%9C%EB%9E%98%EA%B7%B8%ED%96%88%EC%9C%BC%EB%A9%B4-%ED%8A%B8%EB%A6%AC%EA%B1%B0%ED%95%98%EC%A7%80-%EC%95%8A%EA%B8%B0\">onClick이벤트로 <code class=\"language-text\">startWalk</code>를 등록하되 드래그했으면 트리거하지 않기</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#3-%EB%A7%90%ED%92%8D%EC%84%A0%EC%9C%BC%EB%A1%9C-%EA%B0%90%EC%A0%95%EC%9D%84-%ED%91%9C%ED%98%84%ED%95%A9%EB%8B%88%EB%8B%A4\">3. 말풍선으로 감정을 표현합니다</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%81%AC%EB%A1%AC-%ED%99%95%EC%9E%A5%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8%EC%9C%BC%EB%A1%9C-%EB%A7%8C%EB%93%A4%EB%A0%A4%EA%B3%A0-%ED%95%98%EB%8A%94%EB%8D%B0%EC%9A%94\">크롬 확장프로그램으로 만들려고 하는데요..</a></p>\n<ul>\n<li>\n<p><a href=\"#%ED%81%AC%EB%A1%AC-%ED%99%95%EC%9E%A5%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8-%EA%B0%9C%EB%B0%9C-%EC%84%B8%ED%8C%85%ED%95%98%EA%B8%B0\">크롬 확장프로그램 개발 세팅하기</a></p>\n<ul>\n<li><a href=\"#manifest-%ED%8C%8C%EC%9D%BC-%EC%A0%95%EC%9D%98%ED%95%98%EA%B3%A0-%EA%B0%9C%EB%B0%9C%EC%9E%90%EB%AA%A8%EB%93%9C%EC%97%90%EC%84%9C-%ED%94%84%EB%A1%9C%EA%B7%B8%EB%9E%A8%EC%9D%84-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\">manifest 파일 정의하고, 개발자모드에서 프로그램을 추가하기</a></li>\n<li><a href=\"#%ED%99%9C%EC%84%B1-%ED%83%AD%EC%97%90-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8-%EC%82%BD%EC%9E%85%ED%95%98%EA%B8%B0\">활성 탭에 스크립트 삽입하기</a></li>\n<li><a href=\"#%EC%9D%B4%EB%AF%B8%EC%A7%80-%EA%B0%80%EC%A0%B8%EC%98%A4%EB%A0%A4%EB%A9%B4\">이미지 가져오려면</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9D%B5%EC%8A%A4%ED%85%90%EC%85%98-%EB%81%8C-%EB%95%8C%EB%8A%94-%EC%8A%A4%ED%81%AC%EB%A6%BD%ED%8A%B8%EB%A5%BC-%EC%A0%9C%EA%B1%B0%ED%95%98%EA%B8%B0\">익스텐션 끌 때는 스크립트를 제거하기</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%9D%B5%EC%8A%A4%ED%85%90%EC%85%98%EC%9D%84-%EA%BB%90%EB%8B%A4-%EC%BC%9C%EB%A9%B4-%EC%8A%A4%EC%BD%94%ED%94%84%EC%97%90-%EB%B3%80%EC%88%98%EB%93%A4%EC%9D%B4-%EC%A4%91%EB%B3%B5%EC%9C%BC%EB%A1%9C-%EC%83%9D%EC%84%B1%EB%90%98%EB%8A%94-%EC%98%A4%EB%A5%98%EA%B0%80-%EB%B0%9C%EC%83%9D%ED%95%B4%EC%9A%94\">익스텐션을 껐다 켜면 스코프에 변수들이 중복으로 생성되는 오류가 발생해요</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%9D%B4%EC%A0%9C-%ED%84%B0%EC%B9%98-%EC%9D%B4%EB%B2%A4%ED%8A%B8%EB%A5%BC-%EB%94%B0%EB%A1%9C-%EA%B4%80%EB%A6%AC%ED%95%B4%EC%A4%98%EC%95%BC-%ED%95%A9%EB%8B%88%EB%8B%A4\">이제 터치 이벤트를 따로 관리해줘야 합니다</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%9D%B4%EB%A7%8C%ED%95%98%EB%A9%B4-%EB%90%9C-%EA%B2%83-%EA%B0%99%EC%9D%80%EB%8D%B0%EC%9A%94\">이만하면 된 것 같은데요</a></p>\n</li>\n</ul>\n</li>\n</ul>"},"previous":{"fields":{"slug":"/til/how-to-threejs-3/"},"frontmatter":{"title":"Three.js 공식문서로 시작해보기. - 3"}},"next":null},"pageContext":{"id":"2ecda88e-bede-5c6f-87b0-d86f1727be4a","previousPostId":"c2ac7ab5-bffe-50b4-9e17-af0053bac78e","nextPostId":null}},"staticQueryHashes":["2841359383"],"slicesMap":{}}