{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/table-of-contents-in-gatsby-blog/","result":{"data":{"site":{"siteMetadata":{"title":"조성개발실록"}},"markdownRemark":{"id":"24daf5c3-6700-56ae-b679-164d986fcc9a","excerpt":"저저 빨간색 화살표 쳐 놓은 저런거 있잖아요?? Table Of Contents라고 한다고 하네요. 암튼 목차입니다. 저런게 좀 있어야 조금 더 블로그다울 것 같습니다. 먼저 Table Of Contents 정보를 받아옵시다 그럼 일단.. 마크다운이 HTML…","html":"<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b71480d50e5b49e1808a50e7df3988dc/701e9/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.632911392405056%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAABt0lEQVR42oWST26CYBDFcWViFBUUFKqCQuu/miCtCxfuvIYrr9LudKUrE6/iFdoDqDcw1pXVxevMtBC7aEryEvLxzW/ePEbp9XpwXReO46Cg68jn8/9K0zRRoVCAZVlU62IQBui2HqCoqopsNotcLieXDcOIVSwWpShSdK5T4wjKNVyrqt8MhT9GYngQBBiNRnh+esJgMEDY7yMMQ3S6XYzHYwyHQ9i2LXcF+APWdI0YGpSoE4s7VCoVOBSBfWfDokKd3ZFTwzRQKpdhmiad6aj5DRTJrckx3DBioP6Tn1uvo9cP0Op28Ei5NNtt3DebKNsW6bsJ32dYjmpckkPidz0CMsiybIG+vryAn8PhgI/jEZ/nM97f3iTnXz+FsyPZ5Lpeq6JSrYr7G6AluczncwGeTieB8rPdbiUOvsvgTCYTT1QqldBoNOB5HkxyHY9sGCYSiQRms5lAFosFJpMJrtcr9vs9UqkUmjT6er2G7/vxVpTJIcMY/CtDXgdFUWKHm80Gq9VK3ne7nTjj1Vkul5hOp9KAXZoEEnc0Ljf4E3i5XMRdNHK0b8lkEul0GrdReb5Hy12Thl8ytERoKp1jswAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"벨로그\"\n        title=\"\"\n        src=\"/static/b71480d50e5b49e1808a50e7df3988dc/f058b/image.png\"\n        srcset=\"/static/b71480d50e5b49e1808a50e7df3988dc/c26ae/image.png 158w,\n/static/b71480d50e5b49e1808a50e7df3988dc/6bdcf/image.png 315w,\n/static/b71480d50e5b49e1808a50e7df3988dc/f058b/image.png 630w,\n/static/b71480d50e5b49e1808a50e7df3988dc/40601/image.png 945w,\n/static/b71480d50e5b49e1808a50e7df3988dc/78612/image.png 1260w,\n/static/b71480d50e5b49e1808a50e7df3988dc/701e9/image.png 1780w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>Velog를 만드신 velopert님의 블로그 글</figcaption>\n</figure>\n<p>저저 빨간색 화살표 쳐 놓은 저런거 있잖아요??<br>\nTable Of Contents라고 한다고 하네요. 암튼 목차입니다.<br>\n저런게 좀 있어야 조금 더 블로그다울 것 같습니다.</p>\n<h1 id=\"먼저-table-of-contents-정보를-받아옵시다\" style=\"position:relative;\"><a href=\"#%EB%A8%BC%EC%A0%80-table-of-contents-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EB%B0%9B%EC%95%84%EC%98%B5%EC%8B%9C%EB%8B%A4\" aria-label=\"먼저 table of contents 정보를 받아옵시다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>먼저 Table Of Contents 정보를 받아옵시다</h1>\n<p>그럼 일단.. 마크다운이 HTML로 파싱되고나면..<br>\n각 헤더 요소들(<code class=\"language-text\">h1, h2, ... , h6</code>)을 가져다가..<br>\n그에 상응하는 <code class=\"language-text\">&lt;a href=\"#id\"></code>를 만들고..<br>\n각 헤더 요소들에도 그에 상응하는 <code class=\"language-text\">id</code>를 넣어줘야 하고..</p>\n<p>를 하지 않아도 Gatsby에서 다 이미 지원합니다<br>\n각 포스트들은, 제 경우에는 <code class=\"language-text\">gatsby-transformer-remark</code>라는 플러그인 이 파싱해서 HTML로 만드는데 (<code class=\"language-text\">gatsby-starter-blog</code>로 시작한 경우 이 플러그인을 사용)<br>\n아주 편하게도 그 파싱 결과에 <code class=\"language-text\">tableOfContents</code>가 이미 준비되어 있어서, 달라고 하면 바로 줍니다.</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 277px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/82230b61bfba574883f8057827dd82a5/2a985/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.82278481012659%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACZ0lEQVR42mP4+/fvP1Tw58+f////Hzt6XFNDT0lRXVFBzdjI4vbtu0BBoBSySgY0zUAuRHNiYgo3J6+cpLSshCQ/t8CsWXOAgr9//0bXDBRFFgLZ8PdfZHCImYqCnISYqoy0GC9vVnomUByiGA4YIKr/QSX+/fjx48njx0CRnKT4WFtTaRHhFGcHfyO9uNg4LJr/wgDElAcP7i2aP+fNqxeLFiwQ4ObWkJZSlZYU5eMJ8Pb6+uULRD/C2ZAwAIrevHnz2uFdKzvrs2JjClMzGisrpEWFM5wcrNVURIQEhDk5p02aAFT269cvhGYgBvLrKiottbQ2N5ccm9CQ7uboYmmhIiMtws8tISxgqKIItFycl8fdyfH7z5/IljMAOZs3bBDi4LLT0To9q+tAf/2GjuoUD1sBdnZ+bo6CYK9z/c2bawq05WU9DHVurVn05c0rSACD/AzE3a2t8qJiGvLyCytzry2aeHpmr6OBJgcLk5O+1o3Vc28umHx7zsR11blrMsKLXGwC3NxevnwJ0Q/SvGHVKi05eU1FZWN1tQx/D08zAzE+bi4W5swgr7tbVpyY0nm2t/FYd62TjrqksIgUH19zTTXE8QyQJNXV3KwtrygvJt5QX+fu4ijIycbLwd6aGX93+YzT07suzehc11CkKiWuJSunKilhZ2z0/u1bkLMh6ennjx+L583fsWULMPACvb0EuDgE+bjtjbT7shMWVeS2JUdYqinLiohoyctryso5mJq+fvUKGs//kOL53bt3Blpawry84oL8fJxsYgJ8ShISYnx8QtzcsiKiqjIySuKSUYGBkCQJACTX1ueIPMcxAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"강도예요\"\n        title=\"\"\n        src=\"/static/82230b61bfba574883f8057827dd82a5/2a985/image-2.png\"\n        srcset=\"/static/82230b61bfba574883f8057827dd82a5/c26ae/image-2.png 158w,\n/static/82230b61bfba574883f8057827dd82a5/2a985/image-2.png 277w\"\n        sizes=\"(max-width: 277px) 100vw, 277px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>\n안녕하세요저는강도애요저에게목차를주새요 \n</figcaption>\n</figure>\n<p>근데 꺼내는건 알아서 꺼내야합니다 언제까지나 밥상 차려주길 기대할 수는 없겠죠?\n<strong>GraphQL</strong>을 적당히 이용해서 쿼리를 날리면 될 것 같습니다</p>\n<p>그래서 Gatsby에서 graphql을 어떻게 해야 잘 쓸 수 있는지 문서를 뒤적거리다가..<br>\n헉! 이런걸 발견</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e28fc8775a9317d04e5eb2c5676bf1a4/cad6c/image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.56962025316456%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABPElEQVR42m1Ry26DMBDkQ5NjKgFRG6kf2N/ooZHaJAQwxm9j/EzXuKcqo/GubTE7u6ba7Xb7/f5weDmdTk3T1MC6btq2Kaib4/tb+3psmhYuC+B6y8fK+eB9sNatK9CGGGNKsDJDTI+H/LjwC1Gr0WpRepFKS1WiropyWQxE57zNybsNUMvHoD8xG9mdiAFLTBXligugBlbl01JSLwY2UCjTGKW0McbGILUeZ3EdBZo5oYxxzgCUVdAnmPnVBWjfF0/IoezDBiG1lGqYNZoIwz3BiE4DxahKKdnVKuXYEhcHJxjzP4RUjJIBzbeRIoTpBKn/E2ezkKiOz4SbmFHcnefua75/49uZDNe5/yFjtznb7ChMNC49LQDPy7icqMoD07xyhJmLOP+Y9AA+NQcxF7LHapwoRV3uGWaexl+bO+XYqxaY1AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"graphiql\"\n        title=\"\"\n        src=\"/static/e28fc8775a9317d04e5eb2c5676bf1a4/f058b/image-3.png\"\n        srcset=\"/static/e28fc8775a9317d04e5eb2c5676bf1a4/c26ae/image-3.png 158w,\n/static/e28fc8775a9317d04e5eb2c5676bf1a4/6bdcf/image-3.png 315w,\n/static/e28fc8775a9317d04e5eb2c5676bf1a4/f058b/image-3.png 630w,\n/static/e28fc8775a9317d04e5eb2c5676bf1a4/40601/image-3.png 945w,\n/static/e28fc8775a9317d04e5eb2c5676bf1a4/78612/image-3.png 1260w,\n/static/e28fc8775a9317d04e5eb2c5676bf1a4/cad6c/image-3.png 1339w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>개발환경 열어놓고 <code class=\"language-text\">localhost:8000/___graphql</code>(또는 <code class=\"language-text\">___graphiql</code>. <code class=\"language-text\">_</code>가 세 번)으로 들어가면<br>\n이런 깜찍한 in-browser IDE가 존재합니다..<br>\n여기서 적당히 시험해보고 잘 나오는지 확인한 다음 쓰면 될 것 같습니다?</p>\n<h2 id=\"graphql-쿼리를-작성해요\" style=\"position:relative;\"><a href=\"#graphql-%EC%BF%BC%EB%A6%AC%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%9A%94\" aria-label=\"graphql 쿼리를 작성해요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GraphQL 쿼리를 작성해요</h2>\n<p>Gatsby에서 GraphQL쿼리를 이용해먹는 법은 몇 가지가 있는데<br>\n일단 <code class=\"language-text\">import {graphql} from \"gatsby\"</code> 이런식으로 써주면<br>\ngraphql 쿼리를 딸깍 할 수 있는 함수?? 뭐 아무튼 그런걸 줍니다.</p>\n<h3 id=\"page-query\" style=\"position:relative;\"><a href=\"#page-query\" aria-label=\"page query permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Page Query</h3>\n<p>일단 각 블로그 포스트에 해당하는 페이지를 만드는 컴포넌트에서 쓰이는 방법인 <code class=\"language-text\">pageQuery</code>는..<br>\n아 참 <a href=\"https://www.gatsbyjs.com/docs/how-to/querying-data/page-query/\">docs는 여기</a></p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token definition-query function\">TableOfContentsBySlug</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">markdownRemark</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token attr-name\">eq</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$id</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">id</span>\n    <span class=\"token property\">tableOfContents</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>머 요런식이면 될 것 같은데요? 대충<br>\n<code class=\"language-text\">id</code>에 해당하는 게시글의 마크다운 파싱결과 중에서 <code class=\"language-text\">tableOfContents</code>를 가져온다<br>\n이런 뜻입니다</p>\n<p>그럼 아래처럼 줍니다</p>\n<p><code class=\"language-text\">\"tableOfContents\": \"&lt;ul>\\n&lt;li>\\n&lt;p>&lt;a href=\\\"#목차1\\\">목차1&lt;/a>&lt;/p>\\n&lt;ul>\\n&lt;li>&lt;a href=\\\"#목차2\\\">목차2&lt;/a>&lt;/li>\\n&lt;/ul>\\n&lt;/li>\\n&lt;li>\\n&lt;p>&lt;a href=\\\"#목차3\\\">목차3&lt;/a>&lt;/p>\\n&lt;/li>\\n&lt;/ul>\"</code></p>\n<p>대충 보니까 HTML형태를 이미 구성해서 주네요??<br>\n너무 친절해 감동</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 215px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/123450a06e43c576eeeb36d21b07a787/2eb24/image-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 108.86075949367088%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE4ElEQVR42hWT61MTVxiH86laIAkENYRkE5PsZq/ZW7K72Xtu5CIhFwxJIKBEQDLQUBApAgUVtV5G1JGgMmq1Vh1r26l26nTG6djO9FvbP6rLzDvn2zPnOb/z/kys4EVpFysHEgWBj6OcBEoaLKkBUYZEBeY1mFMDYRkK8pCSYTLVqJgiac6txkA5DpuCLIDTQEiB9MGwpCFcCAiTDproCzNOKeKXdDSio0IUp0RYz4WzFV1KUgTtEjUolsJNOO3CaSenwaqO0rgD9dv8x63OPsuxXrPbbTNExCjCxXBKRg217IjKa4iBKDocGwiaULKfYACGdROIHXCYvW4b6D1qt5v7+7tx1EXx3pCOCHGC1ch0SUkUIhQPUiGPrMOCCpsw0omidgLpQyG722XzAr2w92hcCqyczbS36psLxVia5nQ0HCXjuYiUYomQl6ABA5aiiAH3Y0ifF+hxuXrtdivqP1LLUve2xt/uL7+8Nfv88sTmQl4dIMPRYHxQEJNB7CAjtxhDdOPNKA64gR77MUuPzQIAtpgUWD2bub819vzO/A8PVh9vNnbX66XhCBdlkzlRHaDgoBOnADWOqgkDJoA+h9Vq7TJgkgTyGWppMr49n91ZG7uyMblyKr1wUinnOCER0rN8RMdB1MEKflmDWQkyEYy3H7B1dB629VrAwFFF8E0V+eW6ulCVpypKq6pdb5WaY7FElud0khYgED0IWNYROYqZCNYXCAKfd35m6+4Ugh4W6y/EsKWatD2X22oWbp4beX5tdn9jfHRYpkSC4SAQ6cNIT0SBlbjxz6wvpGA+1OkEjoxIgSwPpHhPPYGujCp3FoZ3WqXNifjNZq54IkzwKEn7QMSBUR5BBo3lM2GMl5YwIUFjrHdIQqtRZEjxFxRwNApPp4nzFW1+iGukqUJJoXTyOA1ApEuQED0ZlJO0iVFwcYBRMmyQ86Gos5JgSipcVKCqhpwZCDbzfD3NDwlwUiNljiogOAO7IQIQjM3XERMS8lEKGtKIAO70oQ6V8WQEKCdDZR05lcAmYliKO34DVn/21+oe9qkrM+vjHFifEAnIMcyEhEFBJygechB+F4MkOe+ghAyKgSEZKkT8J2Uor/tWyeSHnuJdprQH5qq02I/0ckZnjLRpMYBkU/b8cIesWSlG48CCDBaNkaCCDJ2I+HGZuXXh1t+r7V+vPvpje3+92VJTop6gZCNt53jD3Nq2tK72TK93DE8F5FA5Co9E4ZMKVNagBO/1RLgfP3367a8/24/37+0/+PDx4y/v3o81ykIUNnUt3TCfv22c1nM3zWt3uytn0yl+IoGMaHBZ8U+UtPazZ//89+/rV3t77fuPHjx69er1T+/eV8eLRs9NXfMH1x7wc5e6Fy+Zmxvu3HA1RdQSeD2OqQKYnZ5/8+be7a3Qw4ftnZ07D3d3v3//e+JUmdcCJvPi9a6pdfP8pQP55pr1zGJHZTo8qE+eIBtZihKCSLn+9OXj755svXz71hBuf/ti+cmL7Pp6yOhzZ+uauXW5Y2at84tt8/zX1tNfWsqT1kItX9Qb+dCRcAit1E/f3sOXv4ksbMzt7MLTi4cb544tXmGysqF90TK7YYx57qJlbr175kL36ExnftRbGlHTolnPOmpT5sbSoZnVQ7WmtTDRMTRhbayYv7rhrVX+B0/PW0MpWdziAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"정든다\"\n        title=\"\"\n        src=\"/static/123450a06e43c576eeeb36d21b07a787/2eb24/image-5.png\"\n        srcset=\"/static/123450a06e43c576eeeb36d21b07a787/c26ae/image-5.png 158w,\n/static/123450a06e43c576eeeb36d21b07a787/2eb24/image-5.png 215w\"\n        sizes=\"(max-width: 215px) 100vw, 215px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그럼 이제 대충 <strong>TableOfContents</strong> 컴포넌트를 만들고,</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  여기다가 쿼리 넣기\t\n</span><span class=\"token template-punctuation string\">`</span></span></code></pre></div>\n<p>이렇게 쓰면, 그 결과가 props에 <code class=\"language-text\">data</code>라는 이름으로 담겨 들어옵니다</p>\n<p>근데.. 그럼 <code class=\"language-text\">id=?</code>에 해당하는 바인딩 변수를 넣어줘야 하는데,<br>\n그러려면 <code class=\"language-text\">gatsby-node.ts</code>까지 가서 프로퍼티를 새로 작성하고.. 바인딩 변수를 거기서 어쩌구..<br>\n아! 귀찮은데요!! 다른 방법 없을까요?</p>\n<h3 id=\"component-query\" style=\"position:relative;\"><a href=\"#component-query\" aria-label=\"component query permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Component Query</h3>\n<p><a href=\"https://www.gatsbyjs.com/docs/how-to/querying-data/use-static-query/\">Component Query에 대한 docs</a>를 살펴보면<br>\n먼저 <code class=\"language-text\">useStaticQuery</code>를 <code class=\"language-text\">import</code>해서<br>\n<code class=\"language-text\">const data = useStaticQuery(\"여기에 쿼리\")</code> 이런 식으로 받아올 수 있나봅니다</p>\n<p>이게 더 간단해보이는데 문제는..<br>\n\"정적\"쿼리라서 변수를 넣어줄 수 없습니다.<br>\n<em>지금 보고 있는 게시글</em>에 대한 목차만 있으면 되는데, <em>모든 게시글</em>에 대한 목차를 가져오면 안되겠죠?</p>\n<h3 id=\"한-줄로-해결-ㅋㅋ\" style=\"position:relative;\"><a href=\"#%ED%95%9C-%EC%A4%84%EB%A1%9C-%ED%95%B4%EA%B2%B0-%E3%85%8B%E3%85%8B\" aria-label=\"한 줄로 해결 ㅋㅋ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>한 줄로 해결 ㅋㅋ</h3>\n<p>근데 생각해보니까, 각 포스트를 렌더링하는 컴포넌트(저는 <code class=\"language-text\">blog-post.tsx</code>라는 이름)에서<br>\n이미 각 <code class=\"language-text\">id</code>에 해당하는 정보들을 <code class=\"language-text\">pageQuery</code>로 받아오고 있으니<br>\n여기다 <code class=\"language-text\">tableOfContents</code> 한 줄만 추가하면 되겠는데요?</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">export const pageQuery = graphql`\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span> query BlogPostBySlug(\n<span class=\"token prefix unchanged\"> </span>   $id: String!\n<span class=\"token prefix unchanged\"> </span>   $previousPostId: String\n<span class=\"token prefix unchanged\"> </span>   $nextPostId: String\n<span class=\"token prefix unchanged\"> </span> ) {\n<span class=\"token prefix unchanged\"> </span>   site {\n<span class=\"token prefix unchanged\"> </span>     siteMetadata {\n<span class=\"token prefix unchanged\"> </span>       title\n<span class=\"token prefix unchanged\"> </span>     }\n<span class=\"token prefix unchanged\"> </span>   }\n<span class=\"token prefix unchanged\"> </span>   markdownRemark(id: { eq: $id }) {\n<span class=\"token prefix unchanged\"> </span>     id\n<span class=\"token prefix unchanged\"> </span>     excerpt(pruneLength: 160)\n<span class=\"token prefix unchanged\"> </span>     html\n<span class=\"token prefix unchanged\"> </span>     frontmatter {\n<span class=\"token prefix unchanged\"> </span>       title\n<span class=\"token prefix unchanged\"> </span>       date(formatString: \"MMMM DD, YYYY\")\n<span class=\"token prefix unchanged\"> </span>       description\n<span class=\"token prefix unchanged\"> </span>       tag\n<span class=\"token prefix unchanged\"> </span>     }\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>      tableOfContents\n</span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>   }</span></code></pre></div>\n<p>이런 식으로 한 다음, <code class=\"language-text\">tableOfContents</code>만 쏙 빼서\n새로 만들 목차 컴포넌트에 props로 전달해주면 될 것 같습니다</p>\n<p>그럼 이제 컴포넌트를 작성해봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useStaticQuery<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">ComponentProps</span> <span class=\"token punctuation\">{</span>\n  tableOfContents<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">TableOfContents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> tableOfContents <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> ComponentProps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>toc-container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      this is ToC\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>tableOfContents<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> TableOfContents</code></pre></div>\n<p>이렇게 하고 시작해봅시다</p>\n<h1 id=\"받아온-table-of-contents를-html로\" style=\"position:relative;\"><a href=\"#%EB%B0%9B%EC%95%84%EC%98%A8-table-of-contents%EB%A5%BC-html%EB%A1%9C\" aria-label=\"받아온 table of contents를 html로 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>받아온 Table Of Contents를 HTML로</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6b2692678c368e3b51f8d095d2d4b363/2ad15/image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.81012658227847%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACU0lEQVR42m1T227aQBDl/z8jfUmfGylKSxCBVAJLEB6QIJEqYXvtvfhur40NweTM2oUo7TJe1uOZM2cuO6iqqtC6ORzObXs6nY7vZv09HDs5Htu2Pf+zBnleyCAMo1gFoZCBkEpwyYX0feF6PvO4VIHPOcxKhCkKBDsgUuesyzKK4iRJkzSL0zQMYyDBGSi0AwV/KuBcAogxzzPvTXM4te0gjhPbYT6HkXSZZ7sMAV3Xc1wGgQZYaZZneREnaYoASYpYaZbBn2gDCngqCBABqNiDIARdJALJcnjmRaEzgiAU8Ec5iDa0oOK4FCEymSP/IIxAGP7giOAO81yXgTkpudzXdVe9AfBgwaWUCl5JiPSTDIhlWUGqam+2uqr6Mz7t9/X54gye0pSHc+H5ggswV9BISYl0SQkVwJKSx1MUaCo5I3VTW1BS1CfyUURPKGSB5JEMdmh0WcEY3UIFrn0GXUgcp6g8JDI77GCtQb8s0VgMCc1MP0PvvTM6zBgVzPN90HPpwOnhgnmkwVff5wDD3JnZO12mDdWmVoEYCEJMezBSAoJXcsZJCNt2u09kFkWd+6CuawTXWqOMeaGbpqnNKrvy0qpQXrwiBagwG3Xd9JHNdehvAi6AIdVeubX/WdeLgWNLv171+fMX0+7cQffO52Pcanu3c+az+dPkaTKd7Ha75WIxnU5fXlbbzWb0OHJsx7KszXb78OunZc33F9qKvf1Z/96+vt3d/ZjPrefn6Wq1Go/H325u7u8f1uv18HE4m82Gw+FiuRyNRt9vbzfbV8Pk/AFDM7S8GqgN4AAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"요질알이 됨\"\n        title=\"\"\n        src=\"/static/6b2692678c368e3b51f8d095d2d4b363/f058b/image-4.png\"\n        srcset=\"/static/6b2692678c368e3b51f8d095d2d4b363/c26ae/image-4.png 158w,\n/static/6b2692678c368e3b51f8d095d2d4b363/6bdcf/image-4.png 315w,\n/static/6b2692678c368e3b51f8d095d2d4b363/f058b/image-4.png 630w,\n/static/6b2692678c368e3b51f8d095d2d4b363/2ad15/image-4.png 801w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그대로는 그저 일개 문자열일 뿐이라,<br>\n진짜 HTML 요소로 바꿔줘야 합니다</p>\n<p>React에서 지원하는 HTML Attribute로 <a href=\"https://legacy.reactjs.org/docs/dom-elements.html#dangerouslysetinnerhtml\">dangerouslySetInnerHTML</a>이라는 것이 있는데\n문자열을 HTML로 바꿔주지만<br>\n이상한 사람이 준 문자열을 그냥 갖다 바꿔버리면<br>\n<a href=\"https://en.wikipedia.org/wiki/Cross-site_scripting\">Cross-Site Scripting(XSS)</a>라는 보안이슈가 발생할 수 있어서<br>\n어흥! <code class=\"language-text\">dangerously</code>를 붙여놨다고 하네요</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>toc<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">__html</span><span class=\"token operator\">:</span> tableOfContents <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>암튼 이렇게 작성하면</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 465px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9bdf70342cf0e729cf1e186c75df5dd9/9ff85/image-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.15189873417721%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAABrUlEQVR42pWSCW+jMBCF+f+/L21SQg6u4GDj28YHhg4k1Wa71Wp3ZKGRsfXe+8bZsiwhBIyJ1oaQwY4OduZlnrfv8tfK1qPz7EYfQwwhppSWf65sihOT/Dpcbrw9k0tDm/f7oeW33e2twMeSnNOcNgsPF/Nm6ukoA1mwzQ2To+SWW2+11z566aQNZgz2cfTHAFmMURnd8rqXqBMd1n1D65pVvbxfaVnztlMox/kJFwR+sboklyMuXXBPZeiIIdopPjIQ1F6JUYA+LOWVCYZayizljiOFBkMGQ8MUnsCggBYzDAnUsvaIi16RGzTkeONdcS9O+BpT/Jk2VJqS8YZZxq3gowB9Zuhqx2toQGpK09cIfzHLHlugTGRf4Lzh9Qc6APxOoAs+5fe8YuWJnPfd7tDtqWXLy/yfymvy6CAqHzks5ZQB7G4ND7EVhHdKOmWj/UZ7YoLu0W7X7VrRVqz6QPu3bl8CalqfSVEPJRL3hrW97Of5t5GttCHPCtZJsaI2G3ah3UNNwoIGcILytwe7KgslanqpaO1jXP6nspRgzh4mTA2NG9I/6/VJvl7+BISxJvmFuKQrAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"HTML로 변환함\"\n        title=\"\"\n        src=\"/static/9bdf70342cf0e729cf1e186c75df5dd9/9ff85/image-6.png\"\n        srcset=\"/static/9bdf70342cf0e729cf1e186c75df5dd9/c26ae/image-6.png 158w,\n/static/9bdf70342cf0e729cf1e186c75df5dd9/6bdcf/image-6.png 315w,\n/static/9bdf70342cf0e729cf1e186c75df5dd9/9ff85/image-6.png 465w\"\n        sizes=\"(max-width: 465px) 100vw, 465px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이렇게 나옵니다</p>\n<h1 id=\"css를-넣어요\" style=\"position:relative;\"><a href=\"#css%EB%A5%BC-%EB%84%A3%EC%96%B4%EC%9A%94\" aria-label=\"css를 넣어요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS를 넣어요</h1>\n<p>저도 <a href=\"https://nocss.club/\">no-css club</a> 참 좋아하지만 정식회원은 아닙니다.<br>\n그대로 쓸 수는 없겠습니다?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 310px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3dd3b2d405400816612573df35a59bde/5fad2/image-8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.53164556962025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AJViUIVdS3hWRI1iTYJcSnNTRYFbSpBhUZViUZtlU5FiTY5gTpJhUJlkUIxbSq2lX/L3ifb4kefvjd3pigCKWkqBUkp6T0KWYE2SXUySYE+SYVCSZE+LXklxTkN+Xk9pUUN8V0aTYEiOW0qlnlrg5Hjw8IXY4IK8z3cAj65hipxcf4lUgnpSeGVMbVdFe1VGjV5LdlNGimtZpX9rs410x49tl2dWhW5fiYlyoaSB2Nye6e6e6u2UAK7ldLfsd6vjda3heajYdpvGbY6zZKidZt+ti7yYe7KOcL6La/i5lcyziau2idrgxuzy6Oft6t/j3N/XyQCeznGJtnGl13Cp3HKr3nSw5Hiw53q023PZ3rTz6+Xu3sm+q6DJwYP9+o///5be5ojI2YHn7pnY3Jze1q4AKldyCztqnMp0qt5yqNtzqtx1qdx0pthy3+vS+fj/+Pj+7PXwttd/0d9z6u+F0tyAws91//+S/P6T+/+RAGkeTzcrXpSIbMXggajbc6rcc6vfda7ddNjEkdTas9PVr87Lmardd6LOb6LIbabPcbHTcr3VeMvVfdrhhAC1ZkC3Hy2mU0W24IGw5Hi363+q43et4Hew03ys4HSt3new3nuy5Xm+64LT6Yu+qWmrjVmlr2Wq1XSr0HUAqd9zq8VorIFNs49WvV1Hx4VjzdGAtuN8t+Z70NmDych6v9B/ruh9ytp/wl9EwRsuvRArrTY2rs5ytOt7AKrdcqvpea2VUqkrNLcfM7QVLqR8WKnfeaSxZLlFO8ItO607PaehZKLMbqhaRLUqN6BBPJmkYqvhdrHiegCp23Gp3XCh1nWHnXJ+eWGEamGOk3Sey3qOiGuYRkqJREeIX1udjWSLpnyCjnOFiWuRqXqcxnys33ey5HqDcYa4qPIowwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"오늘은 어느걸 입을까?\"\n        title=\"\"\n        src=\"/static/3dd3b2d405400816612573df35a59bde/5fad2/image-8.png\"\n        srcset=\"/static/3dd3b2d405400816612573df35a59bde/c26ae/image-8.png 158w,\n/static/3dd3b2d405400816612573df35a59bde/5fad2/image-8.png 310w\"\n        sizes=\"(max-width: 310px) 100vw, 310px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"뷰포트가-넓을-때--사이드-메뉴로-만들어요\" style=\"position:relative;\"><a href=\"#%EB%B7%B0%ED%8F%AC%ED%8A%B8%EA%B0%80-%EB%84%93%EC%9D%84-%EB%95%8C--%EC%82%AC%EC%9D%B4%EB%93%9C-%EB%A9%94%EB%89%B4%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%9A%94\" aria-label=\"뷰포트가 넓을 때  사이드 메뉴로 만들어요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뷰포트가 넓을 때 : 사이드 메뉴로 만들어요</h2>\n<p>저는 shout out to velog 하고싶은데요<br>\nvelog는 아예 포스트 section은 중앙에 고정이고<br>\n사이드에 목차를 표현할 충분한 공간이 있을 때만 사이드 목차를 띄웁니다<br>\n그럼 먼저 오른쪽 사이드에 고정시켜야겠는데<br>\nvelog를 개발자도구로 좀 뜯어보니까</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.toc-container</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> fixed<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 25%<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>대충 이런 깔로 했네요<br>\n전 클래스 이름을 table of contents 줄여서 toc라고 했습니다.<br>\n영어권에서는 ToC라고 줄이는것도 은근 국룰인 듯</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4a113275bcbf47ad8e9db61fd280e9b6/ee515/image-7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.48101265822785%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2UlEQVR42mWQzW4DIQyE9/1fJocec4t66gNUqtRIlcJml+DsBvAGA4atkyioP6M52MIz+kTnnFvXtda6/lYppc3yGmNiLn9uuv20/brsDm7X+7d3vTnY1w94+YTtz6OUs0EDC5jFYMJSSy5ZGjttlPVnSp4SYphDdAvNC12E5GFRZpbkgMPRH0ccpzDNYaZMncCIcy5JTu4zS21m2VpYhBEHP4x+VE7BFbjyDftkQJ+MWAaAs7WOAl1DiCk1bGnVqJVVveslLy3EdAsHuivG///RJBzCWZueQN8kBlq+uMMAlwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"오른쪽으로 보냄\"\n        title=\"\"\n        src=\"/static/4a113275bcbf47ad8e9db61fd280e9b6/f058b/image-7.png\"\n        srcset=\"/static/4a113275bcbf47ad8e9db61fd280e9b6/c26ae/image-7.png 158w,\n/static/4a113275bcbf47ad8e9db61fd280e9b6/6bdcf/image-7.png 315w,\n/static/4a113275bcbf47ad8e9db61fd280e9b6/f058b/image-7.png 630w,\n/static/4a113275bcbf47ad8e9db61fd280e9b6/40601/image-7.png 945w,\n/static/4a113275bcbf47ad8e9db61fd280e9b6/78612/image-7.png 1260w,\n/static/4a113275bcbf47ad8e9db61fd280e9b6/ee515/image-7.png 1269w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>오른쪽으로 잘 붙어버렸습니다<br>\n이제 velog처럼, 얘는 되게 부수적인 놈이면 좋겠으니<br>\n화면이 줄어들면 없애버리죠?\n그리고 밑줄이나 리스트 장식들은 쳐냅시다</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">@media <span class=\"token punctuation\">(</span><span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">/*적당히..*/</span><span class=\"token selector\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">.toc-container</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.toc</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">border-left</span><span class=\"token punctuation\">:</span> solid 2px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding-left</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.toc a</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">text-decoration</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.toc li</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">list-style-type</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"뷰포트가-좁을-때--게시글-맨-위에-냅다-목차를-넣어요\" style=\"position:relative;\"><a href=\"#%EB%B7%B0%ED%8F%AC%ED%8A%B8%EA%B0%80-%EC%A2%81%EC%9D%84-%EB%95%8C--%EA%B2%8C%EC%8B%9C%EA%B8%80-%EB%A7%A8-%EC%9C%84%EC%97%90-%EB%83%85%EB%8B%A4-%EB%AA%A9%EC%B0%A8%EB%A5%BC-%EB%84%A3%EC%96%B4%EC%9A%94\" aria-label=\"뷰포트가 좁을 때  게시글 맨 위에 냅다 목차를 넣어요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뷰포트가 좁을 때 : 게시글 맨 위에 냅다 목차를 넣어요</h2>\n<p>사이드메뉴를 시킬 돈이 없을 때는<br>\n그냥 게시글 시작할 때 냅다 넣고 싶어졌습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> mediaQuery <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">matchMedia</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"(max-width: 85rem)\"</span><span class=\"token punctuation\">)</span>\n  mediaQuery<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"change\"</span><span class=\"token punctuation\">,</span> event <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>matches<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsWide</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsWide</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol>\n<li>먼저 <code class=\"language-text\">window.matchMedia()</code>로 미디어 쿼리를 가져오고</li>\n<li>미디어 쿼리에 <code class=\"language-text\">onChange</code>리스너를 등록합니다. 미디어 쿼리가 <code class=\"language-text\">match</code>일 때 state를 켜고 끄기로 했어요</li>\n<li>이제 컴포넌트를 <code class=\"language-text\">isWide</code>여부에 따라 다르게 렌더링하게 하면 됩니다</li>\n</ol>\n<p>어라 근데 목차를 접고 싶어질 수도요<br>\n접고 펼칠 수 있는 더보기란을 만드는 HTML 요소를 활용해서 만들어봅시다</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>details</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>summary</span><span class=\"token punctuation\">></span></span>더보기<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>summary</span><span class=\"token punctuation\">></span></span>\n  더보기애용\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>details</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>이렇게 하면\n<code class=\"language-text\">&lt;details></code>밑에는 자세한 설명을 숨길 수 있고<br>\n하위에 <code class=\"language-text\">&lt;summary></code> 요소로 미리보기 제목을 넣어줄 수 있습니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 199px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c4072a09d571b0b28e8b9f6f67941520/3d64b/image-9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 127.84810126582278%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEdUlEQVR42m2VaUiXSxTG36uWK1wh991soVxIFBN3P7glRmJFhbkguKGBogluZRmCpGAJUSiWKe7mliuWFpK7KeIHFRJLu16VCq/7dn///3DDD3fA15lxzpznPM9zRmlubm5tbW16evrKlSunTp2ysrKytLQ8f/48EyMjo+Dg4L/lY2lp6a//BnN2ZmdnpfX19V+/fhUWFnp6eqqoqPwhHwoKCpIkEcylh4eH+/v7h0fGwcEB358/f0p7e3shISH5+fkjIyP+/v7KyspKSkqKiopc9P79ew7t7u7uy8fW1haH1+WDTVJKHz9+VFVVvXr16urqak5ODpHHjx8nLVUQyWmRh7/29PRMTk5WVVW9fv2aqO3tbSkxMZGjJiYmXV1dExMTtra26urq7MTGxgqEm5ubX758GR4e7uvr+/r1a2Nj49u3b2dmZjY2NiQ7OzuOamlpeXt7s5WbmwtgduLi4kSFMFRZWfns2bP29nYOlJaWlpWVjY+Py4LNzc05SpEaGhowZGxsfOzYMXZCQ0N/w+bLvKamBsBFRUUg55adnR3J2tqao5QqGI6Kinr48OHt27cvX768srIiqBZlj46OknBwcJDJ8vKyLHN0dDQxkIxCFy5cABLyEED9Hz58ECIdyMf/SNXQ0ODj40O8oaFhUlJSR0fHwMAATPJngC0uLqKQCPittphgLSkyMhKEYHZwcIiIiIC25uZmIa/44ickFcst+eAidurq6qSsrKx79+7p6urisM7OzszMzGvXrolsolqRB7Uw0vz8PPNXr165u7tjCunJkycvXrwwNTW9dOkS6/r6ent7ezc3N7gRaMn5/Pnz06dPIx5VoFxeXh5ekAXDO6WywJsPHjzARm/evLl//76FhQVm+PbtW1pamrOzM1KXl5dD57t37woKCry8vGBHWlhYePnyJd1z48YN0oL806dP9ElCQkJ2djYKcxfy4i3qpP4fP364urpyBodLYMN3Fy9eROHW1lZQce7z58+PHz9+9OiRqJwB/8IqQ0NDZEpOToYFWfDY2Bgmgbnq6mqqAmp3dzet9vTpUyGYEJYr/pGPmJgYpJ2ampIFk4TF3bt3KQMD442mpiY0g0jh0N/GEF9fX1/sTDkSIFkgT2BgIAkRube3FxZcXFzoAaHtUWNRFzWmpKRkZGRI8fHxvDvYA2/iNjqO5GzC9p07d1JTUysqKgRmAQF0YWFh6CprChQWXeXn54dUtE5bWxsX41mw3Lp1Cw8ftSdX07+EnDhxQtbJROro6AQFBaFeeno6xcAC/KFqf38/z8D379+FVUnLAfFaaGpqSmfPnqWB9fT0eENA7uTkBE/FxcVgvnnzZnh4eG1tragZCjjs4eEh3smTJ09KKM4vgtXU1P6UD3jmHAYmeUtLi2gJiKR5tLW1AwICaIQzZ85cv35d4sfGxoYF+LnCwMAASPBRUlICftGbqABUnppz587RPyTnhYNICahwpq+vzxcOuIUJSdjnXkxGzwKHxoBe0JmZmfH/wNHRMTc391+6S4qvWDTCfAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"자세한 설명은 생략한다\"\n        title=\"\"\n        src=\"/static/c4072a09d571b0b28e8b9f6f67941520/3d64b/image-9.png\"\n        srcset=\"/static/c4072a09d571b0b28e8b9f6f67941520/c26ae/image-9.png 158w,\n/static/c4072a09d571b0b28e8b9f6f67941520/3d64b/image-9.png 199w\"\n        sizes=\"(max-width: 199px) 100vw, 199px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그럼 아래와 같이 나옵니다</p>\n<p><img src=\"https://i.imgur.com/QrDYD51.gif\" alt=\"더보기 테스트\"></p>\n<p>그리고 여기에 <code class=\"language-text\">open</code> attribute까지 넣어주면<br>\n기본으로 열려있고, 필요하면 접어버릴 수도 있게 됩니다</p>\n<details>\n<summary> 더보기는 이렇게 생기게 만들었습니다?\n</summary>\n<p>아 빵애애요</p>\n</details>\n<h1 id=\"진짜로-링크를-연결하기\" style=\"position:relative;\"><a href=\"#%EC%A7%84%EC%A7%9C%EB%A1%9C-%EB%A7%81%ED%81%AC%EB%A5%BC-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\" aria-label=\"진짜로 링크를 연결하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>진짜로 링크를 연결하기</h1>\n<p>근데 지금 이 상태로는, 목차의 각 <code class=\"language-text\">&lt;a></code>태그를 클릭해도<br>\n주소창에 <code class=\"language-text\">/#id</code>가 들어가지만 실제로 이동하지 않습니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 263px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c09f652bee0fb74d3901dea501782cc0/17741/image-16.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.78481012658227%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAADiElEQVR42h2L/1OSBxzHn/9lP++2er7hLEM9s2CLXZ6b07YgPfPONXcFuZvmId/a5NHipjOUNqyVCDywFDAgvj9IYwOZ5jcUoeeBB3BK6VQg29rT7l73vvfn/X5/AFb9KYRTDZ1lw4z5sA5qrIcucCEBD7rEQwQfI63n4Us86HMu2HQa4dUiZ9joaTarvhatq2LVnQLQFi7azAH5XOjKJ8i3F+H+VlTajsg7UHkHImtnFJVdZhJY0ob0CuCrTVDrOaiFg7RwoOazACK8gPTwWYNfoqMiVH0dHetmaboRjRDWXEfGRRVjDEKWRoSOi+BxIay+Bqu6UHEbImyBRc0ANNIFa7+BHvYd1/eDegk4xaj4mLEPmepDDLJjRvl7xj7Q0H/cIH7fIAF1YmjyBny/Fx69CqquACDTTUuhGRlklcO2t6BW+bt2jG9s7dQ2sKakZ4wScFYBWxVMBVlloEUKTktAsxic7AVQx3csh7LiCfbB/1Q4lZVODHZgI1iT6zKqFvLbHqlAFxMyGyXTVjgxxrAcA6jtJnDChZ1wK096sCrPINtzq8Y7xA6quLgMO19t+rROOyzrfDRQ6Ruq8Q1Ve26x3UNVbuykS8m8VLqVAIf44aO5HxueqhvDmi/CE4LwPX5U+9VvP/c8GBT38Drxbn70viA6Ifj93sWw9rPw3Yand86FRjnB4VriNtC1qBMtmXqWLNLlGXncqojbvt+wK1cfK5Zstzdsg8+sA0nvzXW7Yt2hiM+KVy03Vma6l81fL+k7Yg+B4aT3JzL0SyZizEWs+QXH9rKrsOYvxIOFDaKQIF4mGO/ZiTt3Vme3Fs252CQdnSBDI8kAlnADKwdk6jCbL+3svto7LO2Xy8WjUvE1Q/nwdbn4T7nE6KvyQbl8UCztHZT3dkov0sX8+iEV298EdITXFPTihNcQ8OHBgJHwmkMETgTwOT8e9BkIn/5t5cKZTTBg8Ht0Pqfe7xx121V2G2BZW7lj1BkCT2zzobsW86THMTZt0vvcD5yz6l9x05yfSXDCrZ7Gx2eMnpXI8ovs871MeyTxzuM4kP57d4tK5unUy0Iul0lu59Mba8/yNEUmEunU5lY2s52n/qLTm6m1TDqxv7v179HRmzdF+SrZaA0B7gy5mE1F6NR8OhmjqWiaXMilo/TzBZqMZan5DBnLkMz5J03NZ6kIlQynNhfpRIf3jxqt+T9ywSFx+zJ1TAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"아무일도 일어나지 않았다\"\n        title=\"\"\n        src=\"/static/c09f652bee0fb74d3901dea501782cc0/17741/image-16.png\"\n        srcset=\"/static/c09f652bee0fb74d3901dea501782cc0/c26ae/image-16.png 158w,\n/static/c09f652bee0fb74d3901dea501782cc0/17741/image-16.png 263w\"\n        sizes=\"(max-width: 263px) 100vw, 263px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>본문 내 각각의 <code class=\"language-text\">h1,h2,..,h6</code> 요소들에 <code class=\"language-text\">id</code>가 들어가있지 않기 때문인데요</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 230px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ceca7d118d2f68978fd1839ca5ac6f6d/81c8e/image-10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA+UlEQVR42oWSWXKDMBBEff/zQRlsEhZRgADtGi0sJhMfAPXHfKj0qtU9ekTt/KqDhqqqpmli6xolwCw34z/ned3q4WapfkZYZFEUTdOQtoOBi2rwqzr3IwFHBUBlUGCMrut6pjRwC5OIGj5Hytlzo9sZVkUp7fteMB6pkr9TEDYNB/nv44XJsmz46lkU+BBNFreq3cUEbMjipSnLEkk073qCh6qmblG7v4WxWLyHs2vbPM+7ug2jFO/BM50ubLPeLwon/8paG4TBIJtx6VXZkaOPHhmu6v16kZ7ImWOFvOyBigSMqbDYDbwUAjMzxo6w4c/B2PeBr+v6A+pwQNAhS8E7AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이렇게 생겨서 그럼\"\n        title=\"\"\n        src=\"/static/ceca7d118d2f68978fd1839ca5ac6f6d/81c8e/image-10.png\"\n        srcset=\"/static/ceca7d118d2f68978fd1839ca5ac6f6d/c26ae/image-10.png 158w,\n/static/ceca7d118d2f68978fd1839ca5ac6f6d/81c8e/image-10.png 230w\"\n        sizes=\"(max-width: 230px) 100vw, 230px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>아직 요소 내에 id가 없다\n</figcaption>\n</figure>\n<p>이것도 간단히<br>\n<code class=\"language-text\">gatsby-remark-autolink-headers</code> 플러그인 딸깍이면 해결됩니다.\n<code class=\"language-text\">npm install gatsby-remark-autolink-headers</code> 대충 이런 식으로 설치해주고</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">{\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>     resolve: `gatsby-transformer-remark`,\n<span class=\"token prefix unchanged\"> </span>     options: {\n<span class=\"token prefix unchanged\"> </span>       plugins: [\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>          `gatsby-remark-autolink-headers`,\n</span>\t\t\t/* 생략 */</code></pre></div>\n<p><code class=\"language-text\">gatsby-config.ts</code>에서 의존성을 추가해주는데<br>\n주의할 점은, 얘는 <code class=\"language-text\">gatsby-transformer-remark</code>플러그인의 플러그인이라<br>\n그 밑에 <code class=\"language-text\">gatsby-remark-autolink-headers</code>를 끼워넣어야 합니다<br>\n구조가 특이하고 재밌네요</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 497px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4722613bbeee82033ea724fece4f9146/15d25/image-11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.151898734177216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAuUlEQVR42jXN3U7DMAwF4L7/oyENBjdT1DXQaRtJl9ix89+LDheBde6s75zhQ/lRp7OGlxMddZ1mUKN9H+NB1+NnfdPldcqHqag5n+V1gvFS1a2oa/lyz4EBe0gr492whdqYGiwEbH11oXlqFookxZqI0oIrlef/DcFjwx3P13AxKXPswWUMxhfBwH3BKpi4JY5kfYO4bdsfhsXJcke43WWvdfb5YdwjGtyXhUmLJHMhwPQNa267++U/GIvfsUvWbdgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이렇게 됐어요\"\n        title=\"\"\n        src=\"/static/4722613bbeee82033ea724fece4f9146/15d25/image-11.png\"\n        srcset=\"/static/4722613bbeee82033ea724fece4f9146/c26ae/image-11.png 158w,\n/static/4722613bbeee82033ea724fece4f9146/6bdcf/image-11.png 315w,\n/static/4722613bbeee82033ea724fece4f9146/15d25/image-11.png 497w\"\n        sizes=\"(max-width: 497px) 100vw, 497px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n이렇게 되었습니다</p>\n<h1 id=\"현재-보고있는-부분은-사이드-목차에서-따로-표시하고-싶어요\" style=\"position:relative;\"><a href=\"#%ED%98%84%EC%9E%AC-%EB%B3%B4%EA%B3%A0%EC%9E%88%EB%8A%94-%EB%B6%80%EB%B6%84%EC%9D%80-%EC%82%AC%EC%9D%B4%EB%93%9C-%EB%AA%A9%EC%B0%A8%EC%97%90%EC%84%9C-%EB%94%B0%EB%A1%9C-%ED%91%9C%EC%8B%9C%ED%95%98%EA%B3%A0-%EC%8B%B6%EC%96%B4%EC%9A%94\" aria-label=\"현재 보고있는 부분은 사이드 목차에서 따로 표시하고 싶어요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>현재 보고있는 부분은 사이드 목차에서 따로 표시하고 싶어요</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 214px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/713ccd4f82b50cec1fc95771e3c83fd0/a48b3/image-17.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 110.12658227848102%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD00lEQVR42o1Qa2/jVBD1v4MPCISEQCsEaCU+I/EbEAgJWtqmWyF1u9uyZNvN9kGbxomdZ2PHdhInTbZ5P+w4tvNyYsexY8dJujBttBKgIjE6d3Q8nnPnzEUWi8VwOOR5vtfrjUYjURThU70PqCiKAkXTNN8+FMh4PI5Go8fHxziO0zTtdrtRFAWSz+fj8ThFUclkslwuPyyGyZqmGYah67plWY7jQIZRs9kMMvAHZbe3t3fi+Xy+koEF27bhLsjT6XRVAfL2vwOBO2C9VqsFRBuP24IwUnpzx/nzXfy9G3zB1WATnmO5XCJwwLYsy/ADiCi21ZECnlfG/hWrpUA8GAzuxOBz1TWfA13CNpDv6EMBOzpw7jvhwOSFaUympnm7XK5s/k+ANWTmOOnrN7mbkqJOTHs+sZwVjH9g/g6OYd8R3XIWt0tkaFo7QW4b4zcDjV/89Tug9XW0uoHWt/wNl78JeIJxT3B+5x7bOL+Jc5u+2kC3kKFhgWwN5dbRJuQ1b20d4zeC3Z99jXW0seHntgL8Ft7awgVXsL0dFLeC4gYurvm4nm4jI9Peiwq7EXE3LOyG278Gah9/9c1Hn3+9H5eg+DTafhprP7sSn19JB0Rnn4As7xPdvUhbmdiIOrVfEPwBIezHWwdx/jkhngYuXT88+vY712FKgcoLUniZEA4T7VeU6GEkDyUdJaTfidbImCH61D6hW69o3kMJhyR/luJNW+E5+sNPPtvD3pymZQ8jvE5JJ2n5jAV0TzOdE1b2JAXVnCETe3bBimfp9nlafM0IZEm0rXGnJ3765eMfn53jpdEfacGblS+zMnrdAfhyncvrzjkradMZYkxtlOZ8NIcyjfNEncwWNbVXqZXfe/+D710vrwpD+Iun26GMFM7KwZwcvO5gmW4gJeimDeJpmCqH6AqWKHjDWZKiFEWq1EqPvnj8k8sdouveSN5PFHGq4ifLeKISIKsY1fDGitpkiphTO8KUw0w1zFTQ+A0WofsDiePre78dHZ0TIbqKkUU8UQxSZYwo+aMlNFLE4pUzPK/qILasGFOLJmtxthFPN6NMrVAoxGI+f4S4SjdjyRpUCLaZyPJUVkhkWlROuG+rwr4gtplcM5UT0jmezbcyBdFz7N3e2YyQLMlyADrbIjPcRfTmyJ89Cd24ffmdIxpeY6gZyMS0/PFChK5R6WaCbTI5gcq0aBjCNkm2GUlUiVSTuuZDSXgUcF5GrwqnWN59wWhjA5nNHU7qS/3xYDjpdNVef9JXdLmryl1NUY3uYNxTdGVkqJoJUEYTVTP0id0fjp35/C8252gkdGlEEAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"여기가 어디지\"\n        title=\"\"\n        src=\"/static/713ccd4f82b50cec1fc95771e3c83fd0/a48b3/image-17.png\"\n        srcset=\"/static/713ccd4f82b50cec1fc95771e3c83fd0/c26ae/image-17.png 158w,\n/static/713ccd4f82b50cec1fc95771e3c83fd0/a48b3/image-17.png 214w\"\n        sizes=\"(max-width: 214px) 100vw, 214px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>지금 위치한 곳이 어딘지, 사이드의 목차를 보면 알 수 있게 하면 좋겠죠?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 254px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1019c0dbf23e45c5b73d7aa360b38a11/6a91e/image-13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 184.81012658227846%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAYAAABCr8kFAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC4UlEQVR42rVWi47SQBTl///DxEiMuiauidk1hrAoSiJQYHmWR3kGyvtRWnqcMzCkrK1uKzY5udPp9M69Z+5jYvB5XNdF1CfGny3LguM4sG0bm80G+/1ejvlNzW+3WykJfg/aNEYFqVQK/X4f7XYb6XQapVIJyWQS6/Vaynq9jkwmg1wuh3K5jEQigVar5etN7HA4YDabYbfbSSsWi4XEaDSSlnAjbsq56XQq104mEznna6GXN7Xb013DcCotJIdBB+OVXgQqJMlUSJfH4/HZ7cinbItTJFdU2Gw20ev1JH+RFTIsdsIq5RYpkG4pSfeeg7PC+QrWQxYwRke0hyc5OMqOeG8Ywai1gZHpcXkyw+H+O2aZPDLxGzQ+fUH+5haDxDdUbu9gfH7AQasCxfrvKAnkxbfu8HSStHAyh3P/A2Ymh9TL19Def0TiRRw/337A11dvkI6/g1OoAY+6UNC4xKOAJr71Rh6F5gLWXRrQu3DrwoWqcEFI9yQlqMwPZf1o6YVCccLWdA7YDty9DRzc45jYWRKw9n+GWHsRNrZjYz6fYyDCRWI4xGRqRozDU/VYLpcyb5u6DqPTwUCMo8ehCOqguhi2Nl4o/JfCeuEyYZqmrIcd4a5hGGg0GjIVOR9mM2khOWRRYHHodrsyl6mcec36F1phEId+pexvii8UsjBcjUP2D/aSarUKXYQO+0itVjvzyrlKpSJ7CucZt749hRaqik2+uJDKKdlDGJ+cp1R9hT2FayJzGDkOVXGlVH2ZY4XnnPaZQ7rFvkueyF+xWJS8UZIzchvEmy+HtEBxxp5Lq1erleSK75SM16vEYWgO1d2GiilpLaUXpIXzXKPaLud8OeQPTDdyyBxmrJE7piHTj7ySQ3W3KRQK0DRNruW/gRyq3Ql121LvBDklj8ojrvEN7P/CIXemBSqMuPtTd4IuU75xyHDJZrOSI979yBfjMGzBCMwUb3aEvhJfo2wphb8Ay2ZALRAb4UEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MDN은 이렇게\"\n        title=\"\"\n        src=\"/static/1019c0dbf23e45c5b73d7aa360b38a11/6a91e/image-13.png\"\n        srcset=\"/static/1019c0dbf23e45c5b73d7aa360b38a11/c26ae/image-13.png 158w,\n/static/1019c0dbf23e45c5b73d7aa360b38a11/6a91e/image-13.png 254w\"\n        sizes=\"(max-width: 254px) 100vw, 254px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details\">mdn web docs</a>도 이런 식으로 표현해주고</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 311px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/28b4038496f1f16528f2f29381aee5e5/ffa0f/image-14.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 132.27848101265823%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACtElEQVR42pWVx45iQQxF2SNyzjnnnEUQiA38/+d4dCy5+r2epkezKOxX4fr62lUEEomEMOLxuBv2HYvFfGvmY6PRqPO9ewJ8VCoVGQ6H0mg01N5uN+l2u/q92Wxku93q9+FwkPF4LM1mU5bLpcznc1mtVtLv9x1oIJlMSiaTkU6nI61WS/1CoaC2WCxKuVzWYfP5fF44Awn8XC6n1jHkh8XRaCTtdltTsRGJRNzwznPGOxcOh78AU6mU0iUNUiyVSsqAyOl0Wplls1m1zJtu+JZdtVr9SplDRDifz/J6vVQnQNHo/X7L8/lUrRaLhez3e3k8HrLb7eR6vcr9fpfL5aJnAKaIyhAHYdGxVquploPBQG2v11PmzK/XawU7nU4ahDnOG3OXMoBUD5ZEI+rxeFQAKo7PYcDwYUpAihQMBp2uPkAqBZt6ve40A4RDSIBlDW1ZZy+DzNAQDAdIBA7NZjO3gcqbBLCHEToiA6DsZZ0g7PUB4hCVBYCx9CCsrPewAAFI89ObzBHce8tcyixOp1PtR1qIyPiTyUQZYgFizm6L3SyrsA+QiCySMunA0qoM+1Ao5JqdNsNyDvsjQ6IAQFQsqZOiNTh7vMML4gOkw9EBdrDCR2yTgJ6jIMzTe8zxWNgeb8s4hjQmjCgEwy4+IGiJHHzbPN/IYMx9gEyiAwdpWkRHQx4Kni7Ysfb9QfiUumsbNDQ21i4whBFBP2n2IyAROUzjkjKPKZpi0YuWwf+tGH8xREfYmY5oZA+sVfu/GCI4bGgbGheG9CBPvD2+3v+VfzJEJ+4tTOy6wdB0hLE1tBXlIyCL9hjAkOIABitrdIBhbH9o2O896AOEIfeTw1w/2AJCMZhjzV4f0/THtuEHRvQctwBWVml81mBkf7MwI/WPKdsfkt1je7bsKWNYyr8xM8A/j0G3qkIGgOoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"velog\"\n        title=\"\"\n        src=\"/static/28b4038496f1f16528f2f29381aee5e5/ffa0f/image-14.png\"\n        srcset=\"/static/28b4038496f1f16528f2f29381aee5e5/c26ae/image-14.png 158w,\n/static/28b4038496f1f16528f2f29381aee5e5/ffa0f/image-14.png 311w\"\n        sizes=\"(max-width: 311px) 100vw, 311px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>벨로그에서도 이렇게 합니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 470px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a3b91cde7d7fdddbf377196d69fab511/f96db/image-12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.18987341772153%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABhElEQVR42n1SiXaDIBDM59Qoh6J4geKBR44m7ev/f0uHYNK0r+3K862y7Mwwu+Ocl7rMq7yosYpCFfiUhWx67ZIqj8Lor9jFSXz6OC6X+fC+TuepHVtj23ZsprPtlw4JivbBHhHiQQRuIXeHGWM85iIV6EIZFVmS5mksYnyKTDySLM94wpM0QSJLiXpCyA6067YGGnjirzJKdarEY5TuNYSgGvgoQN4MWnd6WHu8KaUOOfCsQscE/fA3dLHlCMbojfNGO7gd2GgjA6Y9WbScX6duMsrU63WBftCB8vVtgRav0wW5XxgOAwUgjCNlSLBHKeGcEUoey1Nwu8+37ZHReL7MED8cBmDqTgHcHi2ImNk0Y7NcZxS0to3I98PQ4Cn9aLxFGHmrPcFvyPCpn7vxMBhrMBtAhsOQXaoC+GYykI1L9nbAqi/lTz4n2IBs57NM05vDQgr46b31I4hKb8p9wuK4aqq6qX3XbYyccaGfKv8H7gQvwfPJDTmvJKwC1D9jHP12G58G6px2K3IxvwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이런 식으로요\"\n        title=\"\"\n        src=\"/static/a3b91cde7d7fdddbf377196d69fab511/f96db/image-12.png\"\n        srcset=\"/static/a3b91cde7d7fdddbf377196d69fab511/c26ae/image-12.png 158w,\n/static/a3b91cde7d7fdddbf377196d69fab511/6bdcf/image-12.png 315w,\n/static/a3b91cde7d7fdddbf377196d69fab511/f96db/image-12.png 470w\"\n        sizes=\"(max-width: 470px) 100vw, 470px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그래서 이렇게 밑줄이라도 그어주려고 합니다</p>\n<p>제가 확인해보니 대부분<br>\n\"제목 요소가 화면 맨 위를 넘어가면\" => 현재 그 제목에 해당하는 목차에 위치했다고 간주.<br>\n이런 식이더라구요?</p>\n<p>이거 하려면..</p>\n<ol>\n<li>먼저 게시글 내의 모든 제목 요소(<code class=\"language-text\">h1,h2,..,h6</code>) 태그들을 가져오고</li>\n<li><code class=\"language-text\">top &lt; 0</code>인 제목 요소들 중에 가장 밑에 있는 애를 가져와서 \"현재 목차\"로 간주\n<ul>\n<li><code class=\"language-text\">top &lt; 0</code>인 애들은 여럿 있을 텐데, JavaScript 배열의 <code class=\"language-text\">push</code>메서드와 <code class=\"language-text\">pop</code>메서드는 맨 뒤 요소를 추가/제거하는 동작이므로, 이걸 이용하면 됨. (스택처럼 된다)</li>\n</ul>\n</li>\n<li>목차 컴포넌트에서 \"현재 목차\"와 동일한 <code class=\"language-text\">textContent</code>를 갖는 <code class=\"language-text\">&lt;a></code>태그를 찾고, 해당 태그에만 <code class=\"language-text\">activated</code> 클래스를 집어넣음</li>\n<li>이제 <code class=\"language-text\">a.activated</code>에만 따로 뭔가 CSS를 적용</li>\n</ol>\n<p>1, 2, 3 과정을 적절한 scroll event로 등록해주면 되겠죠?</p>\n<p>아래와 같이 작성했습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> postSection <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"post-section\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>postSection<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n  <span class=\"token comment\">//본문에서 제목 요소들을 가져온다</span>\n  <span class=\"token keyword\">const</span> headers <span class=\"token operator\">=</span> postSection<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"h1, h2, h3, h4, h5, h6\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>headers<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n\n  <span class=\"token comment\">//스크롤 이벤트 정의</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">scrollEvent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> overTheTop<span class=\"token operator\">:</span> Element<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token comment\">//화면 맨 위를 넘어간 제목 요소들 모아서</span>\n    headers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>h <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">.</span><span class=\"token function\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>top <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        overTheTop<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">//맨 뒤에있는 요소를 뽑아보면 그게 \"현재 목차\"에 해당하는 제목 요소</span>\n    <span class=\"token keyword\">const</span> curHeaderText <span class=\"token operator\">=</span> overTheTop<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>textContent\n    <span class=\"token comment\">//목차에서 &lt;a>태그들을 가져오고</span>\n    <span class=\"token keyword\">const</span> aTags <span class=\"token operator\">=</span> document\n      <span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"table-of-contents\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token operator\">?.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">//\"현재 목차\"와 textContent가 친구만 activate</span>\n    aTags<span class=\"token operator\">?.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      a<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"activated\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">===</span> curHeaderText<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        a<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"activated\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">//스크롤 이벤트 등록</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"scroll\"</span><span class=\"token punctuation\">,</span> scrollEvent<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"scroll\"</span><span class=\"token punctuation\">,</span> scrollEvent<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>머 이런 식으로 해줬습니다..<br>\n원래 제목 요소들의 <code class=\"language-text\">id</code>값으로 비교할까 했는데,<br>\n<code class=\"language-text\">id</code>의 공백이나 특수문자 이런걸 조금 변형하더라구요<br>\n어차피 \"내용\"이 동일하니까, 이렇게 해줬습니다</p>\n<h1 id=\"해치웠나\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EC%B9%98%EC%9B%A0%EB%82%98\" aria-label=\"해치웠나 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해치웠나?</h1>\n<p>하다보니 느낀건데<br>\n왜 이렇게 CSS는 처음 보는게 계속 나오죠?</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token property\">word-break</span><span class=\"token punctuation\">:</span> keep-all<span class=\"token punctuation\">;</span>\n<span class=\"token property\">overflow-wrap</span><span class=\"token punctuation\">:</span> break-word<span class=\"token punctuation\">;</span></code></pre></div>\n<p>velog 뜯어보다가 발견했는데,<br>\n이런 식으로 해서 줄바꿈을 단어 단위로 끊을 수 있습니다<br>\n사소하지만 가독성 차이가 꽤나 큰 것 같아요..</p>\n<p>그리고 더보기 요소는 <a href=\"https://codingeverybody.kr/css-details-%ED%83%9C%EA%B7%B8-%EC%8A%A4%ED%83%80%EC%9D%BC-%EA%BE%B8%EB%AF%B8%EA%B8%B0/\">여기</a>를 참고해서<br>\n좀 상@봉해보이게 바꿨는데 그냥 no css club일 때가 더 낫나? 싶기도 하고..<br>\n디자인 감각이 없으니 참.</p>\n<p>암튼간에 이만 마칩니다</p>","frontmatter":{"title":"🗂️ Gatsby 블로그 깔@롱한 목차(Table Of Contents) 만들기","date":"June 09, 2024","description":"응당 목차라면 블로그가 있어야.","tag":["Blog","Gatsby","JavaScript","CSS","TypeScript"]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%A8%BC%EC%A0%80-table-of-contents-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EB%B0%9B%EC%95%84%EC%98%B5%EC%8B%9C%EB%8B%A4\">먼저 Table Of Contents 정보를 받아옵시다</a></p>\n<ul>\n<li>\n<p><a href=\"#graphql-%EC%BF%BC%EB%A6%AC%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%9A%94\">GraphQL 쿼리를 작성해요</a></p>\n<ul>\n<li><a href=\"#page-query\">Page Query</a></li>\n<li><a href=\"#component-query\">Component Query</a></li>\n<li><a href=\"#%ED%95%9C-%EC%A4%84%EB%A1%9C-%ED%95%B4%EA%B2%B0-%E3%85%8B%E3%85%8B\">한 줄로 해결 ㅋㅋ</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%B0%9B%EC%95%84%EC%98%A8-table-of-contents%EB%A5%BC-html%EB%A1%9C\">받아온 Table Of Contents를 HTML로</a></p>\n</li>\n<li>\n<p><a href=\"#css%EB%A5%BC-%EB%84%A3%EC%96%B4%EC%9A%94\">CSS를 넣어요</a></p>\n<ul>\n<li><a href=\"#%EB%B7%B0%ED%8F%AC%ED%8A%B8%EA%B0%80-%EB%84%93%EC%9D%84-%EB%95%8C--%EC%82%AC%EC%9D%B4%EB%93%9C-%EB%A9%94%EB%89%B4%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%9A%94\">뷰포트가 넓을 때 : 사이드 메뉴로 만들어요</a></li>\n<li><a href=\"#%EB%B7%B0%ED%8F%AC%ED%8A%B8%EA%B0%80-%EC%A2%81%EC%9D%84-%EB%95%8C--%EA%B2%8C%EC%8B%9C%EA%B8%80-%EB%A7%A8-%EC%9C%84%EC%97%90-%EB%83%85%EB%8B%A4-%EB%AA%A9%EC%B0%A8%EB%A5%BC-%EB%84%A3%EC%96%B4%EC%9A%94\">뷰포트가 좁을 때 : 게시글 맨 위에 냅다 목차를 넣어요</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%A7%84%EC%A7%9C%EB%A1%9C-%EB%A7%81%ED%81%AC%EB%A5%BC-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\">진짜로 링크를 연결하기</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%98%84%EC%9E%AC-%EB%B3%B4%EA%B3%A0%EC%9E%88%EB%8A%94-%EB%B6%80%EB%B6%84%EC%9D%80-%EC%82%AC%EC%9D%B4%EB%93%9C-%EB%AA%A9%EC%B0%A8%EC%97%90%EC%84%9C-%EB%94%B0%EB%A1%9C-%ED%91%9C%EC%8B%9C%ED%95%98%EA%B3%A0-%EC%8B%B6%EC%96%B4%EC%9A%94\">현재 보고있는 부분은 사이드 목차에서 따로 표시하고 싶어요</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%95%B4%EC%B9%98%EC%9B%A0%EB%82%98\">해치웠나?</a></p>\n</li>\n</ul>"},"previous":{"fields":{"slug":"/light-mode-and-dark-mode/"},"frontmatter":{"title":"🔅 다크모드 5초컷 with CSS 채신기술 light-dark()함수 - (Gatsby 블로그)"}},"next":{"fields":{"slug":"/uniprocessor-scheduling/"},"frontmatter":{"title":"👤 Scheduling을 어떻게 해야 잘 했다고 소문이 날까? - Uniprocessor"}}},"pageContext":{"id":"24daf5c3-6700-56ae-b679-164d986fcc9a","previousPostId":"f9b43c7e-8dce-54dd-91a6-20baf7af2405","nextPostId":"ddc2f0a1-d6de-5592-866a-4d6d88be265a"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}