{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/table-of-contents-in-gatsby-blog/","result":{"data":{"site":{"siteMetadata":{"title":"조성개발실록"}},"markdownRemark":{"id":"99be575c-4419-53e3-b98c-4cbbe8c6a99c","excerpt":"저저 빨간색 화살표 쳐 놓은 저런거 있잖아요?? Table Of Contents라고 한다고 하네요. 암튼 목차입니다. 저런게 좀 있어야 조금 더 블로그다울 것 같습니다. 먼저 Table Of Contents 정보를 받아옵시다 그럼 일단.. 마크다운이 HTML…","html":"<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b71480d50e5b49e1808a50e7df3988dc/701e9/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50.632911392405056%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAABJ0AAASdAHeZh94AAABsUlEQVR42oWTzU7CQBSFy46QUH4K/aXQ8qNFVLDSmJDgjgdhwaPoDpawIDwLr6APAOEFRA0LgZAc515shYWxyUmmM3O/Ofd0KjWbTbiuC8dxkMvlkMlk/lU2m2XRfsuy4Ij6h7aP67oHSZZlpFIppNNp3qyqaqR8Ps9FocJ5RVEiKNVQrSwfGRIthiJ4q9XCY7eLoN1GEATwfR/3Qo1GA71eD51OB4VCgfcy8AccSjp9oRNs24ZbLsMSRWbBgkLuhFNVU6EbBjRNE3MKSrUK8sKtfhLBGZDbEIuOgN36d6hfN3Bzf4fLqzouvEsYlhmJ9lPraVHjCjlCNFZCIOVgmiZDn5+eQM/67Q2f7x/Yfm3x+vLCOZ99FMpOyBKuy6US7GKR3UdAQwApl9FoxMDNZoP1es3jxWLBcYSxJJNJPpzqdF1HpVJBtVoVQPW3ZaLHYjEMh0OGTCYT9Pt9HA4HrFYrJBIJeJ6H2WyGWq0W3QpDOCQYgc8ypEwkSYoczudzTKdTHi+XS26Zrs54PMZgMOADyCWBju40PuBP4G63w36/j1oO71s8HueWT7Mnx+GP8Q1VCUSM33KBqAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"벨로그\"\n        title=\"\"\n        src=\"/static/b71480d50e5b49e1808a50e7df3988dc/f058b/image.png\"\n        srcset=\"/static/b71480d50e5b49e1808a50e7df3988dc/c26ae/image.png 158w,\n/static/b71480d50e5b49e1808a50e7df3988dc/6bdcf/image.png 315w,\n/static/b71480d50e5b49e1808a50e7df3988dc/f058b/image.png 630w,\n/static/b71480d50e5b49e1808a50e7df3988dc/40601/image.png 945w,\n/static/b71480d50e5b49e1808a50e7df3988dc/78612/image.png 1260w,\n/static/b71480d50e5b49e1808a50e7df3988dc/701e9/image.png 1780w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>Velog를 만드신 velopert님의 블로그 글</figcaption>\n</figure>\n<p>저저 빨간색 화살표 쳐 놓은 저런거 있잖아요??<br>\nTable Of Contents라고 한다고 하네요. 암튼 목차입니다.<br>\n저런게 좀 있어야 조금 더 블로그다울 것 같습니다.</p>\n<h1 id=\"먼저-table-of-contents-정보를-받아옵시다\" style=\"position:relative;\"><a href=\"#%EB%A8%BC%EC%A0%80-table-of-contents-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EB%B0%9B%EC%95%84%EC%98%B5%EC%8B%9C%EB%8B%A4\" aria-label=\"먼저 table of contents 정보를 받아옵시다 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>먼저 Table Of Contents 정보를 받아옵시다</h1>\n<p>그럼 일단.. 마크다운이 HTML로 파싱되고나면..<br>\n각 헤더 요소들(<code class=\"language-text\">h1, h2, ... , h6</code>)을 가져다가..<br>\n그에 상응하는 <code class=\"language-text\">&lt;a href=\"#id\"></code>를 만들고..<br>\n각 헤더 요소들에도 그에 상응하는 <code class=\"language-text\">id</code>를 넣어줘야 하고..</p>\n<p>를 하지 않아도 Gatsby에서 다 이미 지원합니다<br>\n각 포스트들은, 제 경우에는 <code class=\"language-text\">gatsby-transformer-remark</code>라는 플러그인 이 파싱해서 HTML로 만드는데 (<code class=\"language-text\">gatsby-starter-blog</code>로 시작한 경우 이 플러그인을 사용)<br>\n아주 편하게도 그 파싱 결과에 <code class=\"language-text\">tableOfContents</code>가 이미 준비되어 있어서, 달라고 하면 바로 줍니다.</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 277px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/82230b61bfba574883f8057827dd82a5/2a985/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.82278481012659%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACY0lEQVR42mP4+/fvP1Tw58+f////Hz92QlNDT0lRXVFBzdjI4s6du0BBoBSySgY0zUAuRHN8XCI3B4+cpLSMuCQfF//MmbOBgr9//0bRDMRAUWQhIPfvv//hQSFmKgqy4mKqstKiPLyZaRkg8b9//yMBqGaIfiD5/fv3x48eARm5SQmxtmbSIsKpzg7+xnpxMTFYNEOcDSGB/AcP7i2cO/vNq5eLFy4Q4OZWl5ZSkZYU5ePx9/L6+uULRD/C2ZAwAIpev3Hj2qFdqzrrM2OiC1IzGirKpUSE0h3trdSUhYX4RTg5p02cAPL2r18IzRB+XUWlpZbWlpaSYxMaMtwdnS3MVWWkRfh4JIQFDFUUgZaL8/C4Ozr++PUL2fEgzVs2bhDi5LbV1jo9q+tAf/2Gjupkd1sBNjYBbo6CIM+zfU0bqwu05eU8DHVur1309c0reACBNHe3tMoKi2rIyS+qzL2xaNLZWX2OBprsLIxO+trXV8+9sWDynTkT19fkrc2MKHK1DXBze/XqJUQ/SPO6FSvVpWU0FJWM1VUz/Ny9zA3E+Li5WJgzAj3vbVl5cmrXub6mE911LrrqksIi0nz8rXW1EMeDogqYLDoamzRk5WRFROrraj1cnAQ42Xg52NqzEh6snHV2ZvfVWd0bG4tVpcU1ZWVVJcTtjI3ev30LjSog9evnz8Xz5+/YsvX371+B3l4CnByCfNz2Rtr9OQlLqvLaUyItVJVkhYW15eU1ZeXsTUxev3qFJZ7fv39noKUlzMsrLsjPy8Eqws8rLy4uwssryMUFdJeqjIySuGRUYCAkTQIA7ePW1O8i7OgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"강도예요\"\n        title=\"\"\n        src=\"/static/82230b61bfba574883f8057827dd82a5/2a985/image-2.png\"\n        srcset=\"/static/82230b61bfba574883f8057827dd82a5/c26ae/image-2.png 158w,\n/static/82230b61bfba574883f8057827dd82a5/2a985/image-2.png 277w\"\n        sizes=\"(max-width: 277px) 100vw, 277px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>\n안녕하세요저는강도애요저에게목차를주새요 \n</figcaption>\n</figure>\n<p>근데 꺼내는건 알아서 꺼내야합니다 언제까지나 밥상 차려주길 기대할 수는 없겠죠?\n<strong>GraphQL</strong>을 적당히 이용해서 쿼리를 날리면 될 것 같습니다</p>\n<p>그래서 Gatsby에서 graphql을 어떻게 해야 잘 쓸 수 있는지 문서를 뒤적거리다가..<br>\n헉! 이런걸 발견</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e28fc8775a9317d04e5eb2c5676bf1a4/cad6c/image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 45.56962025316456%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAJCAIAAAC9o5sfAAAACXBIWXMAAAsTAAALEwEAmpwYAAABOUlEQVR42m1Ry26DMBDkO5vcmkNIVC79v35HD6nUNqWAAa9t/MAv6C7ppWoGe7RCmpkduXjY7fb73ePhUFVVWZbHDSV92zmW5+fq9HQu/+C48amIMSF8CN7TyXlZ1hXvgsg4rvrlqj7B+NkaZ4zTxmpiGoqYMiqdm0MIMcaNU9yAXnFJ9nWUTDYwdaMehRWTVZNRxLYImwBtJrwWvS2ydTPaafR3s89pMoZxde0UGyUHIaUUCBBFypkS5oDLYyYG0wJbOM4pZfyvNEbpdjT9wMXQwMCgb5ELrOa91zoIm12gpus/oFIAb9lYd8DYAD0D1vyKce2QFjD5rpLEAob6jdeX8fudhvaLNx+8q2/JlKgcJed78klbIXUPGrCwELfC1PkmxhdCWaYXui+WamoG3fUArIa+oc59+wOsweYHXd9HsQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"graphiql\"\n        title=\"\"\n        src=\"/static/e28fc8775a9317d04e5eb2c5676bf1a4/f058b/image-3.png\"\n        srcset=\"/static/e28fc8775a9317d04e5eb2c5676bf1a4/c26ae/image-3.png 158w,\n/static/e28fc8775a9317d04e5eb2c5676bf1a4/6bdcf/image-3.png 315w,\n/static/e28fc8775a9317d04e5eb2c5676bf1a4/f058b/image-3.png 630w,\n/static/e28fc8775a9317d04e5eb2c5676bf1a4/40601/image-3.png 945w,\n/static/e28fc8775a9317d04e5eb2c5676bf1a4/78612/image-3.png 1260w,\n/static/e28fc8775a9317d04e5eb2c5676bf1a4/cad6c/image-3.png 1339w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>개발환경 열어놓고 <code class=\"language-text\">localhost:8000/___graphql</code>(또는 <code class=\"language-text\">___graphiql</code>. <code class=\"language-text\">_</code>가 세 번)으로 들어가면<br>\n이런 깜찍한 in-browser IDE가 존재합니다..<br>\n여기서 적당히 시험해보고 잘 나오는지 확인한 다음 쓰면 될 것 같습니다?</p>\n<h2 id=\"graphql-쿼리를-작성해요\" style=\"position:relative;\"><a href=\"#graphql-%EC%BF%BC%EB%A6%AC%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%9A%94\" aria-label=\"graphql 쿼리를 작성해요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>GraphQL 쿼리를 작성해요</h2>\n<p>Gatsby에서 GraphQL쿼리를 이용해먹는 법은 몇 가지가 있는데<br>\n일단 <code class=\"language-text\">import {graphql} from \"gatsby\"</code> 이런식으로 써주면<br>\ngraphql 쿼리를 딸깍 할 수 있는 함수?? 뭐 아무튼 그런걸 줍니다.</p>\n<h3 id=\"page-query\" style=\"position:relative;\"><a href=\"#page-query\" aria-label=\"page query permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Page Query</h3>\n<p>일단 각 블로그 포스트에 해당하는 페이지를 만드는 컴포넌트에서 쓰이는 방법인 <code class=\"language-text\">pageQuery</code>는..<br>\n아 참 <a href=\"https://www.gatsbyjs.com/docs/how-to/querying-data/page-query/\">docs는 여기</a></p>\n<div class=\"gatsby-highlight\" data-language=\"graphql\"><pre class=\"language-graphql\"><code class=\"language-graphql\"><span class=\"token keyword\">query</span> <span class=\"token definition-query function\">TableOfContentsBySlug</span><span class=\"token punctuation\">(</span><span class=\"token variable\">$id</span><span class=\"token punctuation\">:</span> <span class=\"token scalar\">String</span><span class=\"token operator\">!</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property-query\">markdownRemark</span><span class=\"token punctuation\">(</span><span class=\"token attr-name\">id</span><span class=\"token punctuation\">:</span> <span class=\"token punctuation\">{</span> <span class=\"token attr-name\">eq</span><span class=\"token punctuation\">:</span> <span class=\"token variable\">$id</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">id</span>\n    <span class=\"token property\">tableOfContents</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>머 요런식이면 될 것 같은데요? 대충<br>\n<code class=\"language-text\">id</code>에 해당하는 게시글의 마크다운 파싱결과 중에서 <code class=\"language-text\">tableOfContents</code>를 가져온다<br>\n이런 뜻입니다</p>\n<p>그럼 아래처럼 줍니다</p>\n<p><code class=\"language-text\">\"tableOfContents\": \"&lt;ul>\\n&lt;li>\\n&lt;p>&lt;a href=\\\"#목차1\\\">목차1&lt;/a>&lt;/p>\\n&lt;ul>\\n&lt;li>&lt;a href=\\\"#목차2\\\">목차2&lt;/a>&lt;/li>\\n&lt;/ul>\\n&lt;/li>\\n&lt;li>\\n&lt;p>&lt;a href=\\\"#목차3\\\">목차3&lt;/a>&lt;/p>\\n&lt;/li>\\n&lt;/ul>\"</code></p>\n<p>대충 보니까 HTML형태를 이미 구성해서 주네요??<br>\n너무 친절해 감동</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 215px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/123450a06e43c576eeeb36d21b07a787/2eb24/image-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 108.86075949367088%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE4UlEQVR42hWT2VNTBxTG89ShhIQQELLdxJvk5u65S3LvTe6aDZIA2TAJYZVFQIhBKC4Igoq1BTemChmX4jg6ONWpU2lrX+qD7WPbP6rXmfNwXn4z3/nO9xlYAURpFysFkgWBT6Cc6BdVWFQCUQmKyjCvwpwSCEsQyUNyhskMx6J9QZpzKwm/lIQNJAvgtCskQ9pAWFQRLgSEg3aGsHGMS4r6RA2NaKgQw6korA2Gs1VNTFEE7YqqULwPN+gkTjs5FVY0lMbtqM/q87Q7bebuLpPHY9WFRGMIF8dpCdOlZSsKpyI6ImtwvJc0oEEHwQAs6yaQHsBuAt1WP3iqx2ZyOiwE6qJ4MKQhQoJgVTJdkpOFCMX7qZBH0mBBgQ1Y0Imi3QRiQ6EewGUFgU7EeyopwZcXMgdbY1uNYiJNcxoajgWTuYjYxxIhkKABHRZjiA47cMQGujtcrs6ennbU1zWcpfa3x989XXt9d/7lrYnt5YLSGwzFyMSAEE2RGKN75BbjqKbfjOKAG+jo7m63WM36EhcD6wuZR9sjLx/W3zavPt+afrwxVhqKhDUmlYsqvRRMOnEKUBKoktRhArDbLRZLW4fVHAwC+XRwdSq+U88+WB+9vTl1ZTJzsSyXc7yQZLUsH9FwP2pneZ+kwqwIGQgGdADWVmOLtdPsD5ySBe9MgV8blZeHxdmKdGFY/b5RWhyNJ7M8pwVpAfKjDpIBRA0RY5iBYL0BEmgxftVhMQqkh8UchTi2WhN3lga3zxf2Visvv1t4en18ZEimogTLQ37EhgU9ERmWE/qfWW9Ixryo0wl0VUQoy7n7eM9YCr00Ij9olPTZmkzsnR8o9ocJHqVorx+x45SHlyFBhXUYZERMSNIYC+ZEdDiG5GRfQYZGYvBcmrhUVet5bjpN5UsSpQVB2g0FXYKIaClSStEGRsajvYyeW4LzIqizmmRKClyUoaqKTPeSCzluNM3neLhXpeQwXYAJBvZABCDoydcQA8J6KQkNaUQAd/pQu8J4MgI0KEEVDZlMYhNxrI87vQsr7721MQ975MzMg2E71i1EAlIcMyBhn6ASFA/ZCZ+LQVI8OCDCA9FAToIKEd8ZCcpr3nUy9dFa2mdKh/7BGiM6kE5O74zuNiUicH/alh8yypqFZlUOystQSfIXRagoQf0RHymz99b3/rry+OR2889bTzbON7SMqKWYL247xmfalm+bl+90zG+2Dp0LSKFyHK7EkTOyv6xCCe60O8K///z549+fD46e7T9rfvz06dfffh+dKgsx2GBa3TVdut+2utf+zV3T+r6lOp/u4yeSSEWFy7JvoqQ+enH0z3//vjk+PDx49KT55PjNm58/nFTHi3rPDW31HXPj2y/80k3Lys22hU3P4FC1j6il8LEkpkSg7Ln6T29/uHeDazYPHjzcbx4cvDr5I3W2wqsBQ9vKbtvshrl+06SLX7zWPrNirM6GB9Spfmo6S9ECiZbHjo6fv/px6/jdu18+nBy+eHX56HV2YyOk99nYuGNq3Gqdu2a8sGOqX28/e9FcnmovDOeL2lQ+1BUOodXxs/cP8bU7keXNxfuP4XMrX8+sda/sMFlJl33DvLCpj2nphnlpwzK3bhmZN+ZHwVJFSUdNWtZRmzXPrLbMXW2pLVoKE635Scv0ZdOVXbBW/R/X51uZ3tGdsQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"정든다\"\n        title=\"\"\n        src=\"/static/123450a06e43c576eeeb36d21b07a787/2eb24/image-5.png\"\n        srcset=\"/static/123450a06e43c576eeeb36d21b07a787/c26ae/image-5.png 158w,\n/static/123450a06e43c576eeeb36d21b07a787/2eb24/image-5.png 215w\"\n        sizes=\"(max-width: 215px) 100vw, 215px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그럼 이제 대충 <strong>TableOfContents</strong> 컴포넌트를 만들고,</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">export</span> <span class=\"token keyword\">const</span> pageQuery <span class=\"token operator\">=</span> graphql<span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token string\">\n  여기다가 쿼리 넣기\t\n</span><span class=\"token template-punctuation string\">`</span></span></code></pre></div>\n<p>이렇게 쓰면, 그 결과가 props에 <code class=\"language-text\">data</code>라는 이름으로 담겨 들어옵니다</p>\n<p>근데.. 그럼 <code class=\"language-text\">id=?</code>에 해당하는 바인딩 변수를 넣어줘야 하는데,<br>\n그러려면 <code class=\"language-text\">gatsby-node.ts</code>까지 가서 프로퍼티를 새로 작성하고.. 바인딩 변수를 거기서 어쩌구..<br>\n아! 귀찮은데요!! 다른 방법 없을까요?</p>\n<h3 id=\"component-query\" style=\"position:relative;\"><a href=\"#component-query\" aria-label=\"component query permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Component Query</h3>\n<p><a href=\"https://www.gatsbyjs.com/docs/how-to/querying-data/use-static-query/\">Component Query에 대한 docs</a>를 살펴보면<br>\n먼저 <code class=\"language-text\">useStaticQuery</code>를 <code class=\"language-text\">import</code>해서<br>\n<code class=\"language-text\">const data = useStaticQuery(\"여기에 쿼리\")</code> 이런 식으로 받아올 수 있나봅니다</p>\n<p>이게 더 간단해보이는데 문제는..<br>\n\"정적\"쿼리라서 변수를 넣어줄 수 없습니다.<br>\n<em>지금 보고 있는 게시글</em>에 대한 목차만 있으면 되는데, <em>모든 게시글</em>에 대한 목차를 가져오면 안되겠죠?</p>\n<h3 id=\"한-줄로-해결-ㅋㅋ\" style=\"position:relative;\"><a href=\"#%ED%95%9C-%EC%A4%84%EB%A1%9C-%ED%95%B4%EA%B2%B0-%E3%85%8B%E3%85%8B\" aria-label=\"한 줄로 해결 ㅋㅋ permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>한 줄로 해결 ㅋㅋ</h3>\n<p>근데 생각해보니까, 각 포스트를 렌더링하는 컴포넌트(저는 <code class=\"language-text\">blog-post.tsx</code>라는 이름)에서<br>\n이미 각 <code class=\"language-text\">id</code>에 해당하는 정보들을 <code class=\"language-text\">pageQuery</code>로 받아오고 있으니<br>\n여기다 <code class=\"language-text\">tableOfContents</code> 한 줄만 추가하면 되겠는데요?</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">export const pageQuery = graphql`\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span> query BlogPostBySlug(\n<span class=\"token prefix unchanged\"> </span>   $id: String!\n<span class=\"token prefix unchanged\"> </span>   $previousPostId: String\n<span class=\"token prefix unchanged\"> </span>   $nextPostId: String\n<span class=\"token prefix unchanged\"> </span> ) {\n<span class=\"token prefix unchanged\"> </span>   site {\n<span class=\"token prefix unchanged\"> </span>     siteMetadata {\n<span class=\"token prefix unchanged\"> </span>       title\n<span class=\"token prefix unchanged\"> </span>     }\n<span class=\"token prefix unchanged\"> </span>   }\n<span class=\"token prefix unchanged\"> </span>   markdownRemark(id: { eq: $id }) {\n<span class=\"token prefix unchanged\"> </span>     id\n<span class=\"token prefix unchanged\"> </span>     excerpt(pruneLength: 160)\n<span class=\"token prefix unchanged\"> </span>     html\n<span class=\"token prefix unchanged\"> </span>     frontmatter {\n<span class=\"token prefix unchanged\"> </span>       title\n<span class=\"token prefix unchanged\"> </span>       date(formatString: \"MMMM DD, YYYY\")\n<span class=\"token prefix unchanged\"> </span>       description\n<span class=\"token prefix unchanged\"> </span>       tag\n<span class=\"token prefix unchanged\"> </span>     }\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>      tableOfContents\n</span><span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>   }</span></code></pre></div>\n<p>이런 식으로 한 다음, <code class=\"language-text\">tableOfContents</code>만 쏙 빼서\n새로 만들 목차 컴포넌트에 props로 전달해주면 될 것 같습니다</p>\n<p>그럼 이제 컴포넌트를 작성해봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">import</span> React <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useStaticQuery<span class=\"token punctuation\">,</span> graphql <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"gatsby\"</span>\n\n<span class=\"token keyword\">interface</span> <span class=\"token class-name\">ComponentProps</span> <span class=\"token punctuation\">{</span>\n  tableOfContents<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">TableOfContents</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> tableOfContents <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> ComponentProps<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>toc-container<span class=\"token punctuation\">\"</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      this is ToC\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">{</span>tableOfContents<span class=\"token punctuation\">}</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> TableOfContents</code></pre></div>\n<p>이렇게 하고 시작해봅시다</p>\n<h1 id=\"받아온-table-of-contents를-html로\" style=\"position:relative;\"><a href=\"#%EB%B0%9B%EC%95%84%EC%98%A8-table-of-contents%EB%A5%BC-html%EB%A1%9C\" aria-label=\"받아온 table of contents를 html로 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>받아온 Table Of Contents를 HTML로</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6b2692678c368e3b51f8d095d2d4b363/2ad15/image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 84.81012658227847%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAIAAABSJhvpAAAACXBIWXMAAAsTAAALEwEAmpwYAAACUElEQVR42m1T2Y7aQBD0/39G9mnzmlWORRAWEgWjsOQBBZIoEviaw7c9vsGkeoxYpE1rPGqN+6iumjHKslSqaNr23Pen46k7ajtdnG5YXdf3/fmVGVmWSz8Mwsj3AyF9LiTngnHhMe64nusxHMLPMlWWlcpzNKNOQ7IqijCK4ziJkzROkiCIgiBEMqrQziXShQwYE67LdDkU95umARYjimLLcvAPQbbjHmzHdhkcy3awbMdDuSTN0ixHgyRJozhBCk6apiXYlOlx6QdSBugCnBiB4AYBvjRDZpbnKqUS5BVlCToIdq6U63qW4wJtGEaIDiNCDsCMkHM0pwU8TA6zVHV9mTlNU3RGHNoCj54/RR+UL/CVFbaqqstS+wWkUbfJGQAKIlkyxkEsHCF8OpQ+JuACQ6G4xg/kCZCrk1bOSNBZCK2QpBJC76SWDEk/zBKCAvyFLggGKGS/6IwpaVBNI2BH0cBnqghkAaht20IYXJ3ucoeOl2Tw72jCXH0lIBJ2SApiHJeR78E4RKJ7R9/petsMwABCAAPD4Btsk06MY4F4j5JBgzhY9qAcYrCGdKOua6gPeDRMrpq2qbURx0QvwR7YVqRAhbtR182lM57DYPQMumN/Y0NE/8peHgbcXodcj4bf/bn/70u6zTfObdSrw35vmYvF09N0Np/t9/vn1ffZfP68/rHbbcfjyeFwMJfmdrv99Pi4XJrVFbZ0fv/dfN39+vPw8M40zS/z+Xq9nk4/3929ef/h42azGY/Hi2+L0Wi0Wj1PJpO39/c/t7sBwj+dv7VEdnB8dwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"요질알이 됨\"\n        title=\"\"\n        src=\"/static/6b2692678c368e3b51f8d095d2d4b363/f058b/image-4.png\"\n        srcset=\"/static/6b2692678c368e3b51f8d095d2d4b363/c26ae/image-4.png 158w,\n/static/6b2692678c368e3b51f8d095d2d4b363/6bdcf/image-4.png 315w,\n/static/6b2692678c368e3b51f8d095d2d4b363/f058b/image-4.png 630w,\n/static/6b2692678c368e3b51f8d095d2d4b363/2ad15/image-4.png 801w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그대로는 그저 일개 문자열일 뿐이라,<br>\n진짜 HTML 요소로 바꿔줘야 합니다</p>\n<p>React에서 지원하는 HTML Attribute로 <a href=\"https://legacy.reactjs.org/docs/dom-elements.html#dangerouslysetinnerhtml\">dangerouslySetInnerHTML</a>이라는 것이 있는데\n문자열을 HTML로 바꿔주지만<br>\n이상한 사람이 준 문자열을 그냥 갖다 바꿔버리면<br>\n<a href=\"https://en.wikipedia.org/wiki/Cross-site_scripting\">Cross-Site Scripting(XSS)</a>라는 보안이슈가 발생할 수 있어서<br>\n어흥! <code class=\"language-text\">dangerously</code>를 붙여놨다고 하네요</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span> <span class=\"token attr-name\">className</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>toc<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">dangerouslySetInnerHTML</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> __html<span class=\"token operator\">:</span> tableOfContents <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span></code></pre></div>\n<p>암튼 이렇게 작성하면</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 465px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9bdf70342cf0e729cf1e186c75df5dd9/9ff85/image-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.15189873417721%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAABoUlEQVR42pVT2ZKjMAzk/79vM7lIOA0YDPKJjc2xSsjDTGZ2a7dLDyoBanVLRNu2ee9Zx7Q2rO+tc9sT67ZibH9F9HhvXZ2dgg/eh2VZtn9GNIeZS572aS2qhCUEyiM9E17/qj9ids36BFv/8WN8hmODAWklH7mZRj3pKUzSqdEb68d9+B8lRCEEZTThZSdpLepOd+VQFFC0kqZDVnLSqObaXe4sZrolUGQsibvMefdixqwfGRIKy5WTmEgnjDeYqEkj/zAOfAQsUkV70/dm8LN/GYZAt3DyRjQEqmsXt4pVQOL+Wok6pvG9S8MSfnYbFS3Limph5MIKboV0EszADI5jYASkmpf5u/JoL+GSmGxRW8mLc3NO+gT137vbhV5yyG7sfqwPp/qEjT63eI39UB4s0oLl8FRuJqOdwoqa1EO8U8oqG8Y3t2cQcKKHQ/1BRJVDfmmOh+aUD3kJRcJuxZBTSQmQVrbrurzvGfVoh72leFqNJCh7r8hnYOVxCE69a8YLk0qUQ5pDOYWw/Q8i9Nn5CeyAlu772H+JL7Hj25H9BkpmJ0vl6xtRAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"HTML로 변환함\"\n        title=\"\"\n        src=\"/static/9bdf70342cf0e729cf1e186c75df5dd9/9ff85/image-6.png\"\n        srcset=\"/static/9bdf70342cf0e729cf1e186c75df5dd9/c26ae/image-6.png 158w,\n/static/9bdf70342cf0e729cf1e186c75df5dd9/6bdcf/image-6.png 315w,\n/static/9bdf70342cf0e729cf1e186c75df5dd9/9ff85/image-6.png 465w\"\n        sizes=\"(max-width: 465px) 100vw, 465px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이렇게 나옵니다</p>\n<h1 id=\"css를-넣어요\" style=\"position:relative;\"><a href=\"#css%EB%A5%BC-%EB%84%A3%EC%96%B4%EC%9A%94\" aria-label=\"css를 넣어요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>CSS를 넣어요</h1>\n<p>저도 <a href=\"https://nocss.club/\">no-css club</a> 참 좋아하지만 정식회원은 아닙니다.<br>\n그대로 쓸 수는 없겠습니다?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 310px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/3dd3b2d405400816612573df35a59bde/5fad2/image-8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 52.53164556962025%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AJZjUIVfTHhYRI1jTYJcSnNTRYFbSZFhUZViUZxmVJJjTo9hT5NiUZhlUYxcSq2lX/L2ivb4kujvjt3qigCKWUmAUkl5TkKWX0yRXEuSX0+SYVCTZE+KXUlyT0N/X09qUUN8V0aTYEiPXEqknljf43bw74TY34K8z3cAkK9iip1dgIpVgntTeGdNbVhGfFZGjl9Md1RHjGxapYBrs410yI9umGhXhm9giYpzoaWC2d2f6u6f6u2UAK3idLXqd6vidK3geKjYdpzGbY6zY6idZd6ui7yYfLKOcb+Nbfe6lMyziay2idrgxuzy5+ju6eDk2uDYyACdz3GJtnGl2HCp3HKr3nSw5Hiw53qz2nLa37Xy6+Tu3sm/q6DKwYP8+Y///5be54nJ2YLo7pnY3Zze164AK1hyDTtqncp0qt9yqNtzqtx2qdx1p9hy3+vR+ff/+Pf96/Xwtth/0d506u+G092BwtF2//+T/P6U+/+SAGogUDksXpWJbMThgKjbc6rcdKzfda7ddNfEktTastPVr87LmKrdd6LOb6LIbabNcLHRcb3TeMvVftrhhQC2ZkC4IC2mU0S34ICw43i36n+r43et4Xew1Hys4XSt33ex3nuy5nm+64PT6Yu/qWmrjVmmrmSq1HSr0HUAqd9zq8VorYBNs45WvV1HxoRizdCAtuN8tuZ70deCycZ6v89/ruh9ytl/wmBFwh0uvREqrTc3rc5ytOt7AKrbcavneK6TUassM7gfM7UWLqV9V6rgeaSyZLpHPMMvPK49PqijZKPNbqlbQ7YrN6E/PJmiYavhdrHiegCp3HGp3nCh1nWHnHJ/eWGEaWGOk3Sey3qOiWuZSEuKRUiIX1udjmSLpnyCjXKGiWuSqXqcxXys3ney5HoaD4cbxiEI0QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"오늘은 어느걸 입을까?\"\n        title=\"\"\n        src=\"/static/3dd3b2d405400816612573df35a59bde/5fad2/image-8.png\"\n        srcset=\"/static/3dd3b2d405400816612573df35a59bde/c26ae/image-8.png 158w,\n/static/3dd3b2d405400816612573df35a59bde/5fad2/image-8.png 310w\"\n        sizes=\"(max-width: 310px) 100vw, 310px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"뷰포트가-넓을-때--사이드-메뉴로-만들어요\" style=\"position:relative;\"><a href=\"#%EB%B7%B0%ED%8F%AC%ED%8A%B8%EA%B0%80-%EB%84%93%EC%9D%84-%EB%95%8C--%EC%82%AC%EC%9D%B4%EB%93%9C-%EB%A9%94%EB%89%B4%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%9A%94\" aria-label=\"뷰포트가 넓을 때  사이드 메뉴로 만들어요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뷰포트가 넓을 때 : 사이드 메뉴로 만들어요</h2>\n<p>저는 shout out to velog 하고싶은데요<br>\nvelog는 아예 포스트 section은 중앙에 고정이고<br>\n사이드에 목차를 표현할 충분한 공간이 있을 때만 사이드 목차를 띄웁니다<br>\n그럼 먼저 오른쪽 사이드에 고정시켜야겠는데<br>\nvelog를 개발자도구로 좀 뜯어보니까</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token selector\">.toc-container</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">position</span><span class=\"token punctuation\">:</span> fixed<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">right</span><span class=\"token punctuation\">:</span> 0<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">width</span><span class=\"token punctuation\">:</span> 25%<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>대충 이런 깔로 했네요<br>\n전 클래스 이름을 table of contents 줄여서 toc라고 했습니다.<br>\n영어권에서는 ToC라고 줄이는것도 은근 국룰인 듯</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4a113275bcbf47ad8e9db61fd280e9b6/ee515/image-7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 28.48101265822785%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAGCAIAAABM9SnKAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA2ElEQVR42l1Q0WrDMAzM/3/MXvbYPRX2sg8YDDYYNGni2kljW65kW3aqrFvJKg5zIN35uMY5tyxLrXX5P6WUO5dtiqlwebhpvqbd97w/+H3n397V08G+fujnT/OyPUo5a9BjGE0wkEC8csnyNkq31o+UvABwwugDzYHsVpyZRdZDf/THAYYJpzOeKVPDXJmLICe+kRXiLAsJ/KeHCL3vBa1tddAiWmOftFEnLRBizDhbh0gXxJjS/WdxVaBE1rlu8INYENMqRvqZGLk89rGJnSVnXVv9xa2wKzFlWsy3/gCmAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"오른쪽으로 보냄\"\n        title=\"\"\n        src=\"/static/4a113275bcbf47ad8e9db61fd280e9b6/f058b/image-7.png\"\n        srcset=\"/static/4a113275bcbf47ad8e9db61fd280e9b6/c26ae/image-7.png 158w,\n/static/4a113275bcbf47ad8e9db61fd280e9b6/6bdcf/image-7.png 315w,\n/static/4a113275bcbf47ad8e9db61fd280e9b6/f058b/image-7.png 630w,\n/static/4a113275bcbf47ad8e9db61fd280e9b6/40601/image-7.png 945w,\n/static/4a113275bcbf47ad8e9db61fd280e9b6/78612/image-7.png 1260w,\n/static/4a113275bcbf47ad8e9db61fd280e9b6/ee515/image-7.png 1269w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>오른쪽으로 잘 붙어버렸습니다<br>\n이제 velog처럼, 얘는 되게 부수적인 놈이면 좋겠으니<br>\n화면이 줄어들면 없애버리죠?\n그리고 밑줄이나 리스트 장식들은 쳐냅시다</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\">@media <span class=\"token punctuation\">(</span><span class=\"token property\">max-width</span><span class=\"token punctuation\">:</span> <span class=\"token comment\">/*적당히..*/</span><span class=\"token selector\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token selector\">.toc-container</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token property\">display</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.toc</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">border-left</span><span class=\"token punctuation\">:</span> solid 2px<span class=\"token punctuation\">;</span>\n  <span class=\"token property\">padding-left</span><span class=\"token punctuation\">:</span> 10px<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.toc a</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">text-decoration</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token selector\">.toc li</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token property\">list-style-type</span><span class=\"token punctuation\">:</span> none<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<h2 id=\"뷰포트가-좁을-때--게시글-맨-위에-냅다-목차를-넣어요\" style=\"position:relative;\"><a href=\"#%EB%B7%B0%ED%8F%AC%ED%8A%B8%EA%B0%80-%EC%A2%81%EC%9D%84-%EB%95%8C--%EA%B2%8C%EC%8B%9C%EA%B8%80-%EB%A7%A8-%EC%9C%84%EC%97%90-%EB%83%85%EB%8B%A4-%EB%AA%A9%EC%B0%A8%EB%A5%BC-%EB%84%A3%EC%96%B4%EC%9A%94\" aria-label=\"뷰포트가 좁을 때  게시글 맨 위에 냅다 목차를 넣어요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>뷰포트가 좁을 때 : 게시글 맨 위에 냅다 목차를 넣어요</h2>\n<p>사이드메뉴를 시킬 돈이 없을 때는<br>\n그냥 게시글 시작할 때 냅다 넣고 싶어졌습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> mediaQuery <span class=\"token operator\">=</span> window<span class=\"token punctuation\">.</span><span class=\"token function\">matchMedia</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"(max-width: 85rem)\"</span><span class=\"token punctuation\">)</span>\n  mediaQuery<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"change\"</span><span class=\"token punctuation\">,</span> event <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>event<span class=\"token punctuation\">.</span>matches<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsWide</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">false</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span> <span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n      <span class=\"token function\">setIsWide</span><span class=\"token punctuation\">(</span><span class=\"token boolean\">true</span><span class=\"token punctuation\">)</span>\n    <span class=\"token punctuation\">}</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<ol>\n<li>먼저 <code class=\"language-text\">window.matchMedia()</code>로 미디어 쿼리를 가져오고</li>\n<li>미디어 쿼리에 <code class=\"language-text\">onChange</code>리스너를 등록합니다. 미디어 쿼리가 <code class=\"language-text\">match</code>일 때 state를 켜고 끄기로 했어요</li>\n<li>이제 컴포넌트를 <code class=\"language-text\">isWide</code>여부에 따라 다르게 렌더링하게 하면 됩니다</li>\n</ol>\n<p>어라 근데 목차를 접고 싶어질 수도요<br>\n접고 펼칠 수 있는 더보기란을 만드는 HTML 요소를 활용해서 만들어봅시다</p>\n<div class=\"gatsby-highlight\" data-language=\"html\"><pre class=\"language-html\"><code class=\"language-html\"><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>details</span><span class=\"token punctuation\">></span></span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>summary</span><span class=\"token punctuation\">></span></span>더보기<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>summary</span><span class=\"token punctuation\">></span></span>\n  더보기애용\n<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>details</span><span class=\"token punctuation\">></span></span></code></pre></div>\n<p>이렇게 하면\n<code class=\"language-text\">&lt;details></code>밑에는 자세한 설명을 숨길 수 있고<br>\n하위에 <code class=\"language-text\">&lt;summary></code> 요소로 미리보기 제목을 넣어줄 수 있습니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 199px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c4072a09d571b0b28e8b9f6f67941520/3d64b/image-9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 127.84810126582278%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAIAAAA44esqAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEZUlEQVR42m2VeyjfXRzHv4/LJtKjmEszcie3WStr0lDG0CK5hZDk0vwz97KYO81KaC1aro1omMswNrOYxJZbCWUYhthke3L3vPxOaT0954/T93fO+Zz3+/N5vz/nJ339+nVvb29ubs7Hx8fExMTGxsbKysrS0pJZV1c3ODh4Y2Njc3Pz+/fv6+vrFzMr8/Pz0u/fv3d3d8vKypydnS9fvvyXbMjJyUmSRDAnzs7OTk5Ozv4Yp6enzD9//pTYCAkJKS4u/vz5s5eXF/EKCgry8vJKSkoDAwMcOjo64gwBBwcHx8fH/8gGi0BKg4ODnPP19d3e3i4sLCSSeGDJQkQKnJ2dHe6anp5uaGiora39+PEjd0kPHz7kqJ6eXl9f3+Tk5PXr11VUVFiJi4sTDPf39xcXF8fHx4eGhpaXl9va2jo7O0kHfOnmzZscvXLliru7+8LCQlFREURYefDggciQ8jQ2Nj579qynp4cYYOvr6ycmJs6DDQwMOEqSqqqq4F+7dk1RUZGVsLAwIkkScMjz3dTUVFdXV1lZCXNuOTw8lNCGo6JIFBm2ubm54eHh5Ly1tSVKLdL+8uXL1NTU2NgYH2ydI8fExBBMkYi0s7OD1ezsLIAQoypCpFPZ+B+pWltb3dzciL969WpCQkJvb+/o6CiVZBtia2trFOzPmIsPrCVFRUXdv38fzvb29pGRka6urq9fv2ZPxJMtDgNEpL0vGwQjcnNzs/T48eOMjAwtLS0cBuyjR4/8/PxEpOAs5qWlpadPnyIV3zU1NXfu3MnLy5NKS0spoL6+voeHR0FBAVkgnqOjI5oLhmA+f/7c2NgY8cgCb2NHvJCfny+hYWJiIj88PT2zsrI+fPjQ0tKSmZlpaGjY0dHx7du3tLS027dvI0+dbLx7966kpITsoClxWVVVFfYODAx89erV27dvP336VF5ejvNycnLgDBdcsbKyQp7k/+PHD3iNjIzQURLchoeHb926FR0d/ebNG7ZBQye4ZWdnX+hM5dGPn2gBUkpKCp6VhPqXLl2CKh5aXV0FBJ+HhoZSDiHYReV+yYawxszMzHnwkydP+JGUlIR7u7u76TPcf/fuXeokHPofe+ALwCiNBA4tERAQgB/7+/vb29upGVVwcHDAbReCX0TSJziCKiLqeffw6ERERNCMXAYm4PHx8UZGRsypqakvX74UnAUFdnE+eNbW1uedLLrq3r17SEXalC05ORlu3t7eSEB5BazInGANDQ1C1NXVJb6I1NTU5DFBvfT0dPCpAs5DVSThGcAYwqrCguK1UFNTk0xNTWlgbW3tGzduwBw/VFRUvHjxAs5BQUGkg4dFztxlbm7u5OQkXovzhwDFSY9g7vtbNsDHvdXV1WTR1dUlWoJa0LMQpItoBCD9/f0l6mxra2tmZkYOXEFjcitWJZ4AUer379+ryIaFhYWLiwstBC98LfEA0BU6OjrMxPPuU0KqQBbcS+vExsayDhR/A8rKyrBFHRxZVFT0Lxv5i41OFuuaAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"자세한 설명은 생략한다\"\n        title=\"\"\n        src=\"/static/c4072a09d571b0b28e8b9f6f67941520/3d64b/image-9.png\"\n        srcset=\"/static/c4072a09d571b0b28e8b9f6f67941520/c26ae/image-9.png 158w,\n/static/c4072a09d571b0b28e8b9f6f67941520/3d64b/image-9.png 199w\"\n        sizes=\"(max-width: 199px) 100vw, 199px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그럼 아래와 같이 나옵니다</p>\n<p><img src=\"https://i.imgur.com/QrDYD51.gif\" alt=\"더보기 테스트\"></p>\n<p>그리고 여기에 <code class=\"language-text\">open</code> attribute까지 넣어주면<br>\n기본으로 열려있고, 필요하면 접어버릴 수도 있게 됩니다</p>\n<details>\n<summary> 더보기는 이렇게 생기게 만들었습니다?\n</summary>\n<p>아 빵애애요</p>\n</details>\n<h1 id=\"진짜로-링크를-연결하기\" style=\"position:relative;\"><a href=\"#%EC%A7%84%EC%A7%9C%EB%A1%9C-%EB%A7%81%ED%81%AC%EB%A5%BC-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\" aria-label=\"진짜로 링크를 연결하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>진짜로 링크를 연결하기</h1>\n<p>근데 지금 이 상태로는, 목차의 각 <code class=\"language-text\">&lt;a></code>태그를 클릭해도<br>\n주소창에 <code class=\"language-text\">/#id</code>가 들어가지만 실제로 이동하지 않습니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 263px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c09f652bee0fb74d3901dea501782cc0/17741/image-16.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.78481012658227%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAADjklEQVR42hWL/VdSBxzG7x+zX3dOdd8geyE9vrJmx9bmdE6MTrq11tYgO8UYIqgHUI+Wx6HYqFaKwKUQSF68vHgvGGuXLBWFAOUdz5RikuDa2u2cz3nO93me7wMwalkIuxKqZ8F1LOSTauhcLfQVG+pohLhnkPM0TfD5RqiNDTbXII1VSB0LrWExaqvQ6pOMmpMA2spGWxpADhu6/Dlyox3u4aK9FxFpF9rXhUguotIuhrSTTmDxBUTQAV9thrifQq0NSGsD1FIPILw25GYHY/A7dJyPTnSjk90MVTcyxYOnriEqPnOCf3SSx1DxURUfVvFg5U/w6BVUdAHht8L8FgAauwKrr0MPhUdmxeBsD6jpAWdFh3VCRCNEdJLDeukhrRDU9hzRig5pxeCMCJr+Gb4vgMevgiOXAVAvhIy90JwEMkthywdQs/Rjq4Kj5V5Sn2VoJHV6MfikD7Z8ADJLQFMvaBSDBhE4LQBQ2wDDJmM6FEcdClqZdnmFXQFZFWPyZrwTVfI4XOMIuCCrsMuZDjndMu30m4yeoJZ+4BiuqMDlx52KE85BlnO40jXEIkfYeomi6RT2RbX6luTSY1mFe6jSPXTKOczCh07giuML8mO4nF4BDcSt096xpiXlZ/7JNv9djv9eO6X+/ulvNx8M/iJo/Bbrbg/c51Bqzh/3vvarv/RPnV369bRvvJ68XUUMAz+szFxbxQRrpt41kzRk6Q9ZZK9s8vX5gVXzaNg8vGKWx9wDYWt/2NYXeiLaMAmDc9fXHv24qv1m+SFwO+a+E1/6PUXpspQ599L2V3BhN+TZDXvzESIfJd5E6du5G7LvrM9vrxiyy9MZ6m7CNxZblEdwIFiMbxYzudLOm4NCsbRXLpf+Ke2/oym/fVfe/7dcovWgXCyX9/ZLhWK5sFPKJ/dz4beJwF4U0JAuA+nCCLee8GDeRT3hNvhIjCQwrwcjPTrCrSNdukUcI92Yl9B5nBq3fdbjGMeto1YLYNoIKvUaHYFbnvvumB/NOO0qo0Hrdj5wzCsfYwbfIp1gpHPCiKnm9K51KpjPxAupTiry0XwISBZe5+LRTCqW38mkU7HtbCK8sZJNJ7Yir+KbkVwmSSe5dCIS20jGI3+/3v7v4OD9+6JkfeucyQvgqcSL7Oaz9CaVjAUyCSoZf5FNUpmt5XT8eSYRSMcDqTiVpm2Cbv9MxJ7Goi/TkU7Xs0q14X8TgiHB1hKUswAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"아무일도 일어나지 않았다\"\n        title=\"\"\n        src=\"/static/c09f652bee0fb74d3901dea501782cc0/17741/image-16.png\"\n        srcset=\"/static/c09f652bee0fb74d3901dea501782cc0/c26ae/image-16.png 158w,\n/static/c09f652bee0fb74d3901dea501782cc0/17741/image-16.png 263w\"\n        sizes=\"(max-width: 263px) 100vw, 263px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>본문 내 각각의 <code class=\"language-text\">h1,h2,..,h6</code> 요소들에 <code class=\"language-text\">id</code>가 들어가있지 않기 때문인데요</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 230px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/ceca7d118d2f68978fd1839ca5ac6f6d/81c8e/image-10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 50%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAIAAAA7N+mxAAAACXBIWXMAAAsTAAALEwEAmpwYAAAA9UlEQVR42o2SW66DIBiEu//12USjqSKooNwvAlbr+dMFlDMPvH0MM8Mj2z1ym2zouo4yKjjPOgSmDxc/13X/1GPftHktYdN1XQ/DgNEYZqm6BW683mcBTgZ8FJzW2r7vV7Ym6TyV2YTPWXKO0lm0Bm4YY4QQJWRmRr9oUr4MJ+0DVVG5qqrmr5qmgYc4vO3cvmMuwA7zqB0w0zSB+Uhw0sEMLBZhqMr0NKwaIfR8PscepUWrbo7iH4UdPu6byT7Kr7xzSTkIkt1eniosUrWzXQRM1bYtJlivEiqUDYEVCjCkgmKPELVS0JaQ4kwZfg508Tvwfd9/8GtA1ZDkkX0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이렇게 생겨서 그럼\"\n        title=\"\"\n        src=\"/static/ceca7d118d2f68978fd1839ca5ac6f6d/81c8e/image-10.png\"\n        srcset=\"/static/ceca7d118d2f68978fd1839ca5ac6f6d/c26ae/image-10.png 158w,\n/static/ceca7d118d2f68978fd1839ca5ac6f6d/81c8e/image-10.png 230w\"\n        sizes=\"(max-width: 230px) 100vw, 230px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>아직 요소 내에 id가 없다\n</figcaption>\n</figure>\n<p>이것도 간단히<br>\n<code class=\"language-text\">gatsby-remark-autolink-headers</code> 플러그인 딸깍이면 해결됩니다.\n<code class=\"language-text\">npm install gatsby-remark-autolink-headers</code> 대충 이런 식으로 설치해주고</p>\n<div class=\"gatsby-highlight\" data-language=\"diff\"><pre class=\"language-diff\"><code class=\"language-diff\">{\n<span class=\"token unchanged\"><span class=\"token prefix unchanged\"> </span>     resolve: `gatsby-transformer-remark`,\n<span class=\"token prefix unchanged\"> </span>     options: {\n<span class=\"token prefix unchanged\"> </span>       plugins: [\n</span><span class=\"token inserted-sign inserted\"><span class=\"token prefix inserted\">+</span>          `gatsby-remark-autolink-headers`,\n</span>\t\t\t/* 생략 */</code></pre></div>\n<p><code class=\"language-text\">gatsby-config.ts</code>에서 의존성을 추가해주는데<br>\n주의할 점은, 얘는 <code class=\"language-text\">gatsby-transformer-remark</code>플러그인의 플러그인이라<br>\n그 밑에 <code class=\"language-text\">gatsby-remark-autolink-headers</code>를 끼워넣어야 합니다<br>\n구조가 특이하고 재밌네요</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 497px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4722613bbeee82033ea724fece4f9146/15d25/image-11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 22.151898734177216%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAECAIAAAABPYjBAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAvElEQVR42jXN3U7DMAwF4L7/oyENBheg0DXQirImS+3Ycf560ZEisM6FpaPP7l7U2mu5aHh4pbPOwwjvvXnu5aTz+SM/6fQ4xNOQ1BgvI6g37Kes5qy+0qe7dwy+eNkYvxe2WHKggpaBDSRHZaXSlhYJRYjE4sbp/j8dNYyyBT/NfjISOVRyCb1ZD4yhWswGE3FpVTtZQPZ9/8NgXfVSEeYrAdfKa7wt7hYWzM4fb5f1SOREgHKFLZbD/fIfJ4Df0ZOZTlQAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이렇게 됐어요\"\n        title=\"\"\n        src=\"/static/4722613bbeee82033ea724fece4f9146/15d25/image-11.png\"\n        srcset=\"/static/4722613bbeee82033ea724fece4f9146/c26ae/image-11.png 158w,\n/static/4722613bbeee82033ea724fece4f9146/6bdcf/image-11.png 315w,\n/static/4722613bbeee82033ea724fece4f9146/15d25/image-11.png 497w\"\n        sizes=\"(max-width: 497px) 100vw, 497px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n이렇게 되었습니다</p>\n<h1 id=\"현재-보고있는-부분은-사이드-목차에서-따로-표시하고-싶어요\" style=\"position:relative;\"><a href=\"#%ED%98%84%EC%9E%AC-%EB%B3%B4%EA%B3%A0%EC%9E%88%EB%8A%94-%EB%B6%80%EB%B6%84%EC%9D%80-%EC%82%AC%EC%9D%B4%EB%93%9C-%EB%AA%A9%EC%B0%A8%EC%97%90%EC%84%9C-%EB%94%B0%EB%A1%9C-%ED%91%9C%EC%8B%9C%ED%95%98%EA%B3%A0-%EC%8B%B6%EC%96%B4%EC%9A%94\" aria-label=\"현재 보고있는 부분은 사이드 목차에서 따로 표시하고 싶어요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>현재 보고있는 부분은 사이드 목차에서 따로 표시하고 싶어요</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 214px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/713ccd4f82b50cec1fc95771e3c83fd0/a48b3/image-17.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 110.12658227848102%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD10lEQVR42o1QW28bVRDefwcvgJCQAFUCVMQjEj8CEA9NSeI0lZqIJtBcapOkiWuvvY6v673YXl/S2HHs2nvzrm+7Xntv3vU6IYyVgqo2SBx9ZzRzZr6Zbw4yn89VVeU4rt/va5omSRKEo9EI/MFgoCgK+LZt/3XXQSaTSTKZDAQCGIZRFLWzs4OiKE3TlUolk8kQBJHL5er1+s3NzfX19btkmDwejw3D0HV9Op3OZjOYY1mW67qmacLLnTNvGyGe593SQILjONALLPBvX/5L8JvJ0APW43keHJAgCPxI6Xuz2c0/5+1q0AWtQRF80NXVFQIXJnS7XUiA0+mIY00Fze9v+C8ZlhoOh2/IUAaFngeSF4E3vwL3bnjeDO6icnGAPDdNA/4IutzK/J8AaYg78wrl88p5fajppuNNrJluz4zpW3gnnHpgddsFlYhqTddj7FqUW4m0f0VbgOUI2OYy+tqHtn2RBR5FuUcYt47x69jCWcW4lVBzqE8R1ZyuRFpLYXYp3F7YYPNhhF3Gug9C7Yfh1jLKrkagml/FBF9MXIt1VmOdZayzFOL6ugOTnc2ksJEQn8SFJ3HxMdr49OvvP7n33VZG3ohLG0lxMyX+lu48TUtbeHcLl7ZxeSvT24yLiuEgmu38gXPbuLCd4bczHKQPIyHfz1/+8KNvL6/Ay7OsuEcs8JyS/LTkp+R9Qn6G8yPTRXTbOaD45xTnJ4W9LPsiz1uOyrH0x599vhl9dViQ/bQQyEsHBfmIAfQOi90DRvbnBM1yEcNxT5jOEdM5ZuQAJWbrnak9kXriF998+8vTE+xCfcEIwZL8siSHy11AqNJ9We4dM9LYdhHTdlCaDVFsmG4dE6+zpQtN61826x98+NFPvt10VQ3TLFYQT4tSvCTHKnKs3I0We5G8oFsOkO04WT+lLzGyGkyUsySpKFKjeXHvq/sP1nZP6VYwcYZmaxjZiGTrYKPZBka2g+naxLARy3YSuXqcbsRzl2jmPJqgBkOpzTU3f9/fP8ZPaaiuYUQtRtaj+AWavAgnatHM5RF2pulAnk5TdDOVa+JMK1NoJ3PNWq2aSoXCcTyVb0EqSUOqTRQ5siQQRZ4sC+l8K0E1YF/Echy60s5XeKbCMWd8sdrxB4K+9ZVElskyLIAq8dkie5I83wuX/jw93wmdre9TqztpdWwgpuWgeDVBNckCtGfpM4Eq8nRJJGAawyaIBl5ok2UOlsKIyyheRzPVo+ir3SA91k3E9TxOGsiDyVA1ur1xf2AMlIncG8m9saKZveFkoOjKyNQmlja2Fs7YMgx3qE5mc+9vWEloV0h22tIAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"여기가 어디지\"\n        title=\"\"\n        src=\"/static/713ccd4f82b50cec1fc95771e3c83fd0/a48b3/image-17.png\"\n        srcset=\"/static/713ccd4f82b50cec1fc95771e3c83fd0/c26ae/image-17.png 158w,\n/static/713ccd4f82b50cec1fc95771e3c83fd0/a48b3/image-17.png 214w\"\n        sizes=\"(max-width: 214px) 100vw, 214px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>지금 위치한 곳이 어딘지, 사이드의 목차를 보면 알 수 있게 하면 좋겠죠?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 254px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1019c0dbf23e45c5b73d7aa360b38a11/6a91e/image-13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 184.81012658227846%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAlCAYAAABCr8kFAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAC6ElEQVR42rVWiY7aMBDd//+RVu2qKqrUVVWVqqIgSreoBZYzEI5AAEG4jxCSVz+zLimb7HLsWhp5YjvPM88zHl9BNM/zpKj2lH643t+uOGHbNrbbLRzHwXK5xGazkTrnXNeV+mq1kr2SUEACJJNJmKaJZrOJVCqFQqGARCKBxWKBeDyOarWKdDqNbDaLcrmMWCyGRqPxwAMJSAvG4zHW67W0YjqdSun3+9JSbsRNOTYajeTa4XAoxwIt9PPj58jfwtwLBKSFtOSwHYKrDR87EAnIwyAgXaYrdHs2m+Hctge016jX6+h0OpK/iwBpnXKLFAS5fDzgeAY78QcwekBLWNbsil7oDXPX87tmhIvWBPrWHtAZjuFGf2L8K4vbtxHUPn9DJnIDM/YD5ZsvaH1NwM1VgHz1oRSEZMVcu3d/krRwOME2egtLACZfv0Puwyd8f3WN35GPSL55j9R1BNs78VNRFwC1/6UoJKcBnb4P0JrCjqYA3YCnCSmLDNBa8CpN2Usp6cFS1ndWmn0fh+KE7dEEcLbwNg7gejudsralwN48LmLtnsP7S2EymaArwqUnpNvrwRJpdlbYEIxxyGBm3tZ1HUarha7QL47DoPQ7PQ4PAvvSdqUuTOYx78OWcJfCO5CpaFnWSZv9y2VeCoPBAIZhyFwmOPOa99/JgGEcHnJ59PX1IhyyfhSLRWiaBl2ETq1WkzwqTslnpVKRNYVrGLeBNYUWsuqxcRFrB8HZkz/GJ8fn87nUOcaD4pqzOTw7Dnm5+mux0tX4UYeiOKQrmUxG8kT+8vm85JI1mlxyPIy3QA5pBesueWLN5Rh5I1f8Zq+q49Fh82wcqrcNgdnTWvZ+IS0c51oK13IskEP+wHQjh+SPsUbu2u22TD/yx9jj26ZUKkl+c7mcXMt/QznkrsoC9dpS34pT8khdvcgCA/tFOFS3tgoj7s65sAfnk3FIMHJIjvj2o878vejG9meKkpNd9r9nnoPDvxFDQJiBGmKNAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MDN은 이렇게\"\n        title=\"\"\n        src=\"/static/1019c0dbf23e45c5b73d7aa360b38a11/6a91e/image-13.png\"\n        srcset=\"/static/1019c0dbf23e45c5b73d7aa360b38a11/c26ae/image-13.png 158w,\n/static/1019c0dbf23e45c5b73d7aa360b38a11/6a91e/image-13.png 254w\"\n        sizes=\"(max-width: 254px) 100vw, 254px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><a href=\"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/details\">mdn web docs</a>도 이런 식으로 표현해주고</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 311px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/28b4038496f1f16528f2f29381aee5e5/ffa0f/image-14.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 132.27848101265823%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAA7DAAAOwwHHb6hkAAACq0lEQVR42pWVV44jMQxE5wDOOeecc84w/GPf/zpcPALUdntsLPaDVqslFYvFUvsnHo8LEYvFNLzzaDT6a83GSCTyaz/xk0gkpFwuy2AwkHq9ruP1epVOp6Pz9XqtwXy328loNJJGoyGLxUJms5mO3W7XgSpgOp2WdrstzWZTn/P5vI6FQkFKpZImzGQyOs/lcmIkeLZwDPmpVCoyHA6l1WppKRbhcNiFvUMGznjfhUKhv4DJZFLpUl6tVlMWzGGUSqV84dXQgkpg60pmIxlOp5M8n0/VCdD5fC6v10sej4dqxXy73cr9fldNL5eLPp/PZ9nv95oQ9soQ5F6vpzpWq1UVvd/vq6YIDnPer1YrBT0ej5qE95w3DFcyyHSPrGSjyxyCye1202cADYw9JKR5gUDA6eoDpFPGBv3QBhAOFYtFHb1r7MVKjDTVfKmATLDHdDrV0tmA0CYB7GGEjshA8slkous0k73G0mlIZhZgw0hjYEWY19gDIOaHAGskt3J9JbMIQ/xIUyiP5/F4rAwZAbJn9tjNQgIfQyZ2/SgZYOYYHZ1gFgwGncmxmZmc+UeGZKEcMjNSOkDZbNZ57D28QA4Qh6MD7GBFExAbCRD+cDhoQ9iD93iHnWyPddfHkIARjSDs4gOCljSAOe8BYe5l7gPkJTpwEDY0Ag3RDyawY+39g/CtbGcbNDQ2ZhfKhxlJP+n1UUMzNuVhXEqms2jKuNls1CZo9q0RHxnaR9N0pMPoavqh2X8xBAw2mBXzwpB7ulwu3cfX+7/yT4bohGYwQT8bkYJnGGNoa8xXH5qxOWh/TARlw8qMzjq3yG4U47sHfYAwBMg+qgBYErtBJLAqYPzRNvxgFzzHLeCQdRog1vCi/c3SJEr/WjLdJSOHOWA3xj5lhDHzdvtbc/4AXtO3jBRATJYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"velog\"\n        title=\"\"\n        src=\"/static/28b4038496f1f16528f2f29381aee5e5/ffa0f/image-14.png\"\n        srcset=\"/static/28b4038496f1f16528f2f29381aee5e5/c26ae/image-14.png 158w,\n/static/28b4038496f1f16528f2f29381aee5e5/ffa0f/image-14.png 311w\"\n        sizes=\"(max-width: 311px) 100vw, 311px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>벨로그에서도 이렇게 합니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 470px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a3b91cde7d7fdddbf377196d69fab511/f96db/image-12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.18987341772153%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABkElEQVR42nVSCXLDIAzMc+pgLkN8YmODz6Rt2k7//5YuPqZNOxUMswbJK2l1EkKUdZFXeV5lhcmLusBOi7TxDe6zMo1XozTewbo2O8lEPn/e5vt0/VjGl9EOtu2t9c34Mri5s30Dp3N0hhEsWBQ2cAjmnMtEqIuSSgIDXDKdKImf6lQlOgFYLy8iEfgEQF5KK0rpCWlXtmwHW7sat6YzpjUFVmtqZ1AOvMGPdIAbX9ed8bPDyRgLzGtWZC+JUcZZTMiOV+OCw4GE/Sdt3IBzeO794qbXsRtb01bL22x7Cyo3u+V90ZlGAFJ9aBiCCQm3nLPAefCDjW7GjpMdQfGPYDDrVIOzspVfPDqPgkHe3/pxTQTNn+4THFB5TB+Do6doq4HS3/8ORtCB8Lol+MAspHBT1998O7Rpnvqrh9pgw8CgpQCNq1E55ACAVORo7c6MeKUTPHDJcapUBdlXefEJzdGtrMiyKoPnlsUxYVKWTVk2Bfy+x+gAqzxkkyeKop+ROzMGGFJhwmIS/2ebRr+6/QVB8ZxzP+tyRwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이런 식으로요\"\n        title=\"\"\n        src=\"/static/a3b91cde7d7fdddbf377196d69fab511/f96db/image-12.png\"\n        srcset=\"/static/a3b91cde7d7fdddbf377196d69fab511/c26ae/image-12.png 158w,\n/static/a3b91cde7d7fdddbf377196d69fab511/6bdcf/image-12.png 315w,\n/static/a3b91cde7d7fdddbf377196d69fab511/f96db/image-12.png 470w\"\n        sizes=\"(max-width: 470px) 100vw, 470px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그래서 이렇게 밑줄이라도 그어주려고 합니다</p>\n<p>제가 확인해보니 대부분<br>\n\"제목 요소가 화면 맨 위를 넘어가면\" => 현재 그 제목에 해당하는 목차에 위치했다고 간주.<br>\n이런 식이더라구요?</p>\n<p>이거 하려면..</p>\n<ol>\n<li>먼저 게시글 내의 모든 제목 요소(<code class=\"language-text\">h1,h2,..,h6</code>) 태그들을 가져오고</li>\n<li><code class=\"language-text\">top &lt; 0</code>인 제목 요소들 중에 가장 밑에 있는 애를 가져와서 \"현재 목차\"로 간주\n<ul>\n<li><code class=\"language-text\">top &lt; 0</code>인 애들은 여럿 있을 텐데, JavaScript 배열의 <code class=\"language-text\">push</code>메서드와 <code class=\"language-text\">pop</code>메서드는 맨 뒤 요소를 추가/제거하는 동작이므로, 이걸 이용하면 됨. (스택처럼 된다)</li>\n</ul>\n</li>\n<li>목차 컴포넌트에서 \"현재 목차\"와 동일한 <code class=\"language-text\">textContent</code>를 갖는 <code class=\"language-text\">&lt;a></code>태그를 찾고, 해당 태그에만 <code class=\"language-text\">activated</code> 클래스를 집어넣음</li>\n<li>이제 <code class=\"language-text\">a.activated</code>에만 따로 뭔가 CSS를 적용</li>\n</ol>\n<p>1, 2, 3 과정을 적절한 scroll event로 등록해주면 되겠죠?</p>\n<p>아래와 같이 작성했습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> postSection <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"post-section\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>postSection<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n  <span class=\"token comment\">//본문에서 제목 요소들을 가져온다</span>\n  <span class=\"token keyword\">const</span> headers <span class=\"token operator\">=</span> postSection<span class=\"token punctuation\">.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"h1, h2, h3, h4, h5, h6\"</span><span class=\"token punctuation\">)</span>\n  <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>headers<span class=\"token punctuation\">)</span> <span class=\"token keyword\">return</span>\n\n  <span class=\"token comment\">//스크롤 이벤트 정의</span>\n  <span class=\"token keyword\">const</span> <span class=\"token function-variable function\">scrollEvent</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> overTheTop<span class=\"token operator\">:</span> Element<span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span>\n    <span class=\"token comment\">//화면 맨 위를 넘어간 제목 요소들 모아서</span>\n    headers<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>h <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">.</span><span class=\"token function\">getBoundingClientRect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span>top <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        overTheTop<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>h<span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">//맨 뒤에있는 요소를 뽑아보면 그게 \"현재 목차\"에 해당하는 제목 요소</span>\n    <span class=\"token keyword\">const</span> curHeaderText <span class=\"token operator\">=</span> overTheTop<span class=\"token punctuation\">.</span><span class=\"token function\">pop</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token operator\">?.</span>textContent\n    <span class=\"token comment\">//목차에서 &lt;a>태그들을 가져오고</span>\n    <span class=\"token keyword\">const</span> aTags <span class=\"token operator\">=</span> document\n      <span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"table-of-contents\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token operator\">?.</span><span class=\"token function\">querySelectorAll</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"a\"</span><span class=\"token punctuation\">)</span>\n    <span class=\"token comment\">//\"현재 목차\"와 textContent가 친구만 activate</span>\n    aTags<span class=\"token operator\">?.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span>a <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      a<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">remove</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"activated\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>a<span class=\"token punctuation\">.</span>textContent <span class=\"token operator\">===</span> curHeaderText<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n        a<span class=\"token punctuation\">.</span>classList<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"activated\"</span><span class=\"token punctuation\">)</span>\n      <span class=\"token punctuation\">}</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token comment\">//스크롤 이벤트 등록</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"scroll\"</span><span class=\"token punctuation\">,</span> scrollEvent<span class=\"token punctuation\">)</span>\n\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    document<span class=\"token punctuation\">.</span><span class=\"token function\">removeEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"scroll\"</span><span class=\"token punctuation\">,</span> scrollEvent<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">[</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>머 이런 식으로 해줬습니다..<br>\n원래 제목 요소들의 <code class=\"language-text\">id</code>값으로 비교할까 했는데,<br>\n<code class=\"language-text\">id</code>의 공백이나 특수문자 이런걸 조금 변형하더라구요<br>\n어차피 \"내용\"이 동일하니까, 이렇게 해줬습니다</p>\n<h1 id=\"해치웠나\" style=\"position:relative;\"><a href=\"#%ED%95%B4%EC%B9%98%EC%9B%A0%EB%82%98\" aria-label=\"해치웠나 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>해치웠나?</h1>\n<p>하다보니 느낀건데<br>\n왜 이렇게 CSS는 처음 보는게 계속 나오죠?</p>\n<div class=\"gatsby-highlight\" data-language=\"css\"><pre class=\"language-css\"><code class=\"language-css\"><span class=\"token property\">word-break</span><span class=\"token punctuation\">:</span> keep-all<span class=\"token punctuation\">;</span>\n<span class=\"token property\">overflow-wrap</span><span class=\"token punctuation\">:</span> break-word<span class=\"token punctuation\">;</span></code></pre></div>\n<p>velog 뜯어보다가 발견했는데,<br>\n이런 식으로 해서 줄바꿈을 단어 단위로 끊을 수 있습니다<br>\n사소하지만 가독성 차이가 꽤나 큰 것 같아요..</p>\n<p>그리고 더보기 요소는 <a href=\"https://codingeverybody.kr/css-details-%ED%83%9C%EA%B7%B8-%EC%8A%A4%ED%83%80%EC%9D%BC-%EA%BE%B8%EB%AF%B8%EA%B8%B0/\">여기</a>를 참고해서<br>\n좀 상@봉해보이게 바꿨는데 그냥 no css club일 때가 더 낫나? 싶기도 하고..<br>\n디자인 감각이 없으니 참.</p>\n<p>암튼간에 이만 마칩니다</p>","frontmatter":{"title":"🗂️ Gatsby 블로그 깔@롱한 목차(Table Of Contents) 만들기","date":"June 09, 2024","description":"응당 목차라면 블로그가 있어야.","tag":["Blog","Gatsby","JavaScript","CSS","TypeScript"]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%A8%BC%EC%A0%80-table-of-contents-%EC%A0%95%EB%B3%B4%EB%A5%BC-%EB%B0%9B%EC%95%84%EC%98%B5%EC%8B%9C%EB%8B%A4\">먼저 Table Of Contents 정보를 받아옵시다</a></p>\n<ul>\n<li>\n<p><a href=\"#graphql-%EC%BF%BC%EB%A6%AC%EB%A5%BC-%EC%9E%91%EC%84%B1%ED%95%B4%EC%9A%94\">GraphQL 쿼리를 작성해요</a></p>\n<ul>\n<li><a href=\"#page-query\">Page Query</a></li>\n<li><a href=\"#component-query\">Component Query</a></li>\n<li><a href=\"#%ED%95%9C-%EC%A4%84%EB%A1%9C-%ED%95%B4%EA%B2%B0-%E3%85%8B%E3%85%8B\">한 줄로 해결 ㅋㅋ</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EB%B0%9B%EC%95%84%EC%98%A8-table-of-contents%EB%A5%BC-html%EB%A1%9C\">받아온 Table Of Contents를 HTML로</a></p>\n</li>\n<li>\n<p><a href=\"#css%EB%A5%BC-%EB%84%A3%EC%96%B4%EC%9A%94\">CSS를 넣어요</a></p>\n<ul>\n<li><a href=\"#%EB%B7%B0%ED%8F%AC%ED%8A%B8%EA%B0%80-%EB%84%93%EC%9D%84-%EB%95%8C--%EC%82%AC%EC%9D%B4%EB%93%9C-%EB%A9%94%EB%89%B4%EB%A1%9C-%EB%A7%8C%EB%93%A4%EC%96%B4%EC%9A%94\">뷰포트가 넓을 때 : 사이드 메뉴로 만들어요</a></li>\n<li><a href=\"#%EB%B7%B0%ED%8F%AC%ED%8A%B8%EA%B0%80-%EC%A2%81%EC%9D%84-%EB%95%8C--%EA%B2%8C%EC%8B%9C%EA%B8%80-%EB%A7%A8-%EC%9C%84%EC%97%90-%EB%83%85%EB%8B%A4-%EB%AA%A9%EC%B0%A8%EB%A5%BC-%EB%84%A3%EC%96%B4%EC%9A%94\">뷰포트가 좁을 때 : 게시글 맨 위에 냅다 목차를 넣어요</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%A7%84%EC%A7%9C%EB%A1%9C-%EB%A7%81%ED%81%AC%EB%A5%BC-%EC%97%B0%EA%B2%B0%ED%95%98%EA%B8%B0\">진짜로 링크를 연결하기</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%98%84%EC%9E%AC-%EB%B3%B4%EA%B3%A0%EC%9E%88%EB%8A%94-%EB%B6%80%EB%B6%84%EC%9D%80-%EC%82%AC%EC%9D%B4%EB%93%9C-%EB%AA%A9%EC%B0%A8%EC%97%90%EC%84%9C-%EB%94%B0%EB%A1%9C-%ED%91%9C%EC%8B%9C%ED%95%98%EA%B3%A0-%EC%8B%B6%EC%96%B4%EC%9A%94\">현재 보고있는 부분은 사이드 목차에서 따로 표시하고 싶어요</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%95%B4%EC%B9%98%EC%9B%A0%EB%82%98\">해치웠나?</a></p>\n</li>\n</ul>"},"previous":{"fields":{"slug":"/light-mode-and-dark-mode/"},"frontmatter":{"title":"🔅 다크모드 5초컷 with CSS 채신기술 like-dark()함수 - (Gatsby 블로그)"}},"next":null},"pageContext":{"id":"99be575c-4419-53e3-b98c-4cbbe8c6a99c","previousPostId":"288ba7b0-6bab-535e-abb7-3ba5cadd4a42","nextPostId":null}},"staticQueryHashes":["2841359383"],"slicesMap":{}}