{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/migration-react-component-to-typescript/","result":{"data":{"site":{"siteMetadata":{"title":"성훈 블로그"}},"markdownRemark":{"id":"3dadefdb-a6c0-52b6-b3f6-f0aff3b0e408","excerpt":"Gatsby는 리액트를 기반으로 하기 때문에, 처음 시작하면 등의 파일들이 각각 Component를 하는 것을 볼 수 있습니다.  리액트 사용자라면 너무 익숙하죠? 이번 시간에는 이렇게 생겨먹은 React Component 스타일의 친구들을 타입스크립트( or…","html":"<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 194px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d6e09a0d402674a88c32375fa6cc6c71/2bf95/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 134.17721518987344%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"다크로드\"\n        title=\"\"\n        src=\"/static/d6e09a0d402674a88c32375fa6cc6c71/2bf95/image.png\"\n        srcset=\"/static/d6e09a0d402674a88c32375fa6cc6c71/c26ae/image.png 158w,\n/static/d6e09a0d402674a88c32375fa6cc6c71/2bf95/image.png 194w\"\n        sizes=\"(max-width: 194px) 100vw, 194px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>Gatsby는 리액트를 기반으로 하기 때문에,<br>\n처음 시작하면 <code class=\"language-text\">index.js</code>등의 <code class=\"language-text\">.js</code>파일들이 각각<br>\nComponent를 <code class=\"language-text\">export</code>하는 것을 볼 수 있습니다. <br>\n리액트 사용자라면 너무 익숙하죠?</p>\n<p>이번 시간에는 이렇게 생겨먹은 <strong>React Component</strong> 스타일의 <code class=\"language-text\">.js</code>친구들을<br>\n<strong>타입스크립트</strong>(<code class=\"language-text\">.ts</code> or <code class=\"language-text\">.tsx</code>)로 바꿔버리는...<br>\n마이그레이션 작업을 좀 해보겠습니다<br>\n그냥.. 얼마전에 <strong>TypeScript</strong> 이론을 공부했으니까.. 이걸 실제로 써보려고 그럽니다<br>\n그리고 더 늦기 전에 갈아타야 좀 수월하지 않겠습니까?</p>\n<p>들어가기에 앞서..<br>\n<a href=\"https://www.gatsbyjs.com/docs/how-to/custom-configuration/typescript/#gatsby-configts\">공홈</a>도 참고했고<br>\n매우 똥같은 번역이 있지만 꽤나 참고가 된 <a href=\"https://hackernoon.com/ko/javascript%EC%97%90%EC%84%9C-typescript%EB%A1%9C-%EB%B0%98%EC%9D%91-%ED%94%84%EB%A1%9C%EC%A0%9D%ED%8A%B8%EB%A5%BC-%EB%A7%88%EC%9D%B4%EA%B7%B8%EB%A0%88%EC%9D%B4%EC%85%98%ED%95%98%EB%8A%94-%EB%B0%A9%EB%B2%95\">링크</a>도 있습니다</p>\n<h1>TypeScript Initialize</h1>\n<p>그.. 타입스크립트는 준비 하셨죠?<br>\n그럼 이제 initialize 하겠습니다<br>\n<code class=\"language-text\">npm init gatsby -ts</code></p>\n<p>그럼 이제 <code class=\"language-text\">tsconfig.json</code>파일이 생기는데요<br>\n<a href=\"https://github.com/gatsbyjs/gatsby/blob/master/starters/gatsby-starter-minimal-ts/tsconfig.json\">gatsby-minimal-starter-ts</a>에서 내용을 긁어다 쓰셔도 무방하다고 공홈에서 그러네요<br>\n저도 그냥 긁었습니다</p>\n<p>그런 다음 일단 <code class=\"language-text\">gatsby-*.js</code>들을 <code class=\"language-text\">.ts</code>로 바꿔줍시다<br>\n얘네들은 제 경험상으론 확장자만 바꿔주고 딱히 뭐 안해줘도 됩니다</p>\n<h1>이제 하나하나 수정해봅시다</h1>\n<p>이제 <code class=\"language-text\">src/component/</code> 또는.. <code class=\"language-text\">src/pages/</code> <code class=\"language-text\">src/templates/</code> 이런 곳에 있는 <code class=\"language-text\">.js</code>들을 <code class=\"language-text\">.ts</code>로 바꿀건데요<br>\n확장자를 바꾸고나면 빨간줄이 좍좍 그어질텐데<br>\n겁나지만 하나씩 좀 해봅시다..</p>\n<p>해야 할 일들은 대충</p>\n<ul>\n<li>혹시 컴포넌트를 <em>Functional Component</em> 형태로 쓰셨다면 <code class=\"language-text\">import {FC} from \"react\"</code>를 써서 \"이거 리액트 컴포넌트임\"을 알려야하는 것 같습니다</li>\n<li><strong><em><code class=\"language-text\">props</code>에 type safety 집어넣기</em></strong></li>\n<li><code class=\"language-text\">useState</code>에 type 주기<br>\n(예 : <code class=\"language-text\">[data, setData] = useState() => [data, setData] = useState&lt;typename>()</code>)</li>\n<li>필요한 친구들은 타입스크립트버전(<code class=\"language-text\">@types/</code>)를 다시 설치해줘야 합니다<br>\n(예 : <code class=\"language-text\">import kebabCase from \"lodash.kebabcase\"</code> -> <code class=\"language-text\">npm i --save-dev @types/lodash.kebabcase</code>)</li>\n<li>마지막에 <code class=\"language-text\">gatsby-node.js</code>에서 <code class=\"language-text\">createPages</code>의 <code class=\"language-text\">component</code>항목들을 <code class=\"language-text\">.js</code>-><code class=\"language-text\">.ts</code>로 바꾸는 것을 잊지 말도록 합시다</li>\n</ul>\n<p>이 중에서 props에 type넣기를 한번 같이 보겠습니다</p>\n<h1>props에 type safety 보장하기</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 549px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a2d14be78172fbdbe9f4735cf7e2b4c7/928ea/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 27.21518987341772%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAFCAYAAABFA8wzAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAA6UlEQVR42mWQWW6EMBBEOUkUaTAYgw14NwwYJsr9j1RpPIpElI+n3rxUdbWkBfu2I4SAGCP2PUNKhXnWBec8tDYYBollWUturSvx4n728ahR+RBxMU4a2tgyEJ0A512haVo0XICxBjVdqGv2h6t/p9I+wawnXP7G5BIsKQoxIZHyS/1EH5glg4v+/fgd1v7rVdKTRX9iCF9QlCuKvV7f9vNZWJ4bcj5wnC+ocUJP9gey+osstSxrqT67AXU3gimybTQpUhAtg6UVhHTAxw3r80XrcJiVhFEjBOc0n2DnGbMYqCb7bQvOPvADA4KbsuwU+EoAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"1\"\n        title=\"\"\n        src=\"/static/a2d14be78172fbdbe9f4735cf7e2b4c7/928ea/image-1.png\"\n        srcset=\"/static/a2d14be78172fbdbe9f4735cf7e2b4c7/c26ae/image-1.png 158w,\n/static/a2d14be78172fbdbe9f4735cf7e2b4c7/6bdcf/image-1.png 315w,\n/static/a2d14be78172fbdbe9f4735cf7e2b4c7/928ea/image-1.png 549w\"\n        sizes=\"(max-width: 549px) 100vw, 549px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>확장자를 바꾸고 나면 가장 먼저 눈에 띄는 빨간줄은 이녀석입니다<br>\n사실 이 마이그레이션 작업은 props에 type만 잘 넣어주면 됩니다<br>\n만약 <code class=\"language-text\">const Component=({description, title}) => {}</code>같은 컴포넌트가 있다면<br>\n저같은 경우는 <code class=\"language-text\">interface</code>를 이용하여</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">ComponentProps</span> <span class=\"token punctuation\">{</span>\n  description<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n  title<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token keyword\">const</span> <span class=\"token function-variable function\">Component</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> description<span class=\"token punctuation\">,</span> title <span class=\"token punctuation\">}</span><span class=\"token operator\">:</span> ComponentProps<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span><span class=\"token punctuation\">}</span></code></pre></div>\n<p>이런식으로 해줬습니다</p>\n<p>근데 문제는 graphql 쿼리로 가져오는 <code class=\"language-text\">data</code>같은 props들은 이렇게 단순하게 끝나지 않는데요...<br>\n이 쿼리들 데이터들의 객체관계를 하나하나 <code class=\"language-text\">interface</code>로 표현하고 또 <code class=\"language-text\">interface</code>로.. 아휴<br>\n그냥 GPT한테 query문을 긁어서 가져갑시다..<br>\n알아서 잘 해줍니다.<br>\n아니면 나중에 안 사실인데<br>\n공홈에 보니까 <a href=\"https://www.gatsbyjs.com/docs/how-to/local-development/graphql-typegen\">GraphQL Typegen</a>이라는게 존재합니다 쩝</p>\n<p>아무튼 각 컴포넌트들마다 <code class=\"language-text\">export const pageQuery = graphql</code>로 시작하는 쿼리문들을 긁어다가 GPT한테 인터페이스를 만들어달라고 하면\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e5fb0015d43295207695651b0c559685/36c33/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 76.58227848101265%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAB2klEQVR42qWSWW/aUBCF7/WGwRgr3khw2dJFJUgRAUwrtdhgSIIhIWoSd3nq//8Vp8PFaRMpQRF9+DQznvHxub7DPn+/xcU6w2qVIRxN0Tv7iv4gwmAYC876T+stVIcxhuHkCf3BGCxMUlyS2N3db1xd/xRcLu6xSO+xXP2g+peIizTD+cUt0mWG+fk3RJMVpskayfwGyexG5MNwCtbvRYiilF7K8uYaMQ1PpleiniTXNLxlHC8R0/Mv40XuaioIRwm52zifkEMqPnZ6eP+hg0bzGIdBE7V6CwHxhqjX26g38rzRFvVmrtl6K2i136FzcoqT7im63T7Y6NMMrh9ANx2ULRtHBRW+qsEiZEUGYwycM7AN7HkkSRLRJx0h6Pk1FLmGiq7DLcvQVRkS5yTEXxR5zMOc59X+CYqGJIMzDpUGlPyrewk6lJiGC8+x0bYU2IoGg46865g7BOewnSpMpsAtFOBbdGRd2v63vR06h3DlEtoVE0GliIMSh6HL+wmGJFitBvlt0UVIr3f2okPbPYKkm9ANCy6tiqFp+wuGoxl8cmgoJdjlIqqmBE1R/s+h69X+NjhF+WF1COkV6/Ps2hiGA8+qollWCR2OrOJAVqCSW8dxoOxw/VjwD/gmdFTyLxZhAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"GPT 결과\"\n        title=\"\"\n        src=\"/static/e5fb0015d43295207695651b0c559685/f058b/image-2.png\"\n        srcset=\"/static/e5fb0015d43295207695651b0c559685/c26ae/image-2.png 158w,\n/static/e5fb0015d43295207695651b0c559685/6bdcf/image-2.png 315w,\n/static/e5fb0015d43295207695651b0c559685/f058b/image-2.png 630w,\n/static/e5fb0015d43295207695651b0c559685/40601/image-2.png 945w,\n/static/e5fb0015d43295207695651b0c559685/36c33/image-2.png 946w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n잘 뱉어줍니다.</p>\n<p>이제 이걸 가져다가 적당히 <code class=\"language-text\">interface ComponentProps {}</code>를 작성하고 타입을 명시해주면 되겠습니다.</p>\n<p>근데 저같은 경우는 어떤 props는 상황에 따라 props를 넣을 수도 넣지 않을 수도 있는<br>\n꽤나 양자역학적인 슈뢰딩거의 props문제가 있었습니다\\</p>\n<p>이 경우 간단히... <code class=\"language-text\">:</code> 대신 <code class=\"language-text\">?:</code>를 씁시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">interface</span> <span class=\"token class-name\">ComponentProps</span> <span class=\"token punctuation\">{</span>\n  Schrödinger<span class=\"token operator\">?</span><span class=\"token operator\">:</span> cat\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>저처럼 바보같이 <code class=\"language-text\">Schrödinger: cat | undefined</code> 이런 트라이를 하지 말도록 합시다.<br>\n그리고 처음 하시면 헷갈리실까봐 말씀드리는건데<br>\n함수를 넘길 때는.. 만약 인자는 <code class=\"language-text\">number</code>타입이고 반환값은 없다면<br>\n<code class=\"language-text\">function(param: number): void</code> 이런식입니다</p>\n<h1>해치웠나?</h1>\n<p>음.. 해치운 것 같습니다.<br>\n막상 별거 없죠?<br>\n인생이란게 그렇습니다.</p>\n<p>이만 마칩니다</p>","frontmatter":{"title":"🙃 타입스크립트가 되고 싶은 리액트 컴포넌트는 나에게..","date":"January 11, 2024","description":"JavaScript로 작성한 React Component를 TypeScript로 마이그레이션하기. (.js -> .tsx)","tag":["Blog","TypeScript","JavaScript"]}},"previous":{"fields":{"slug":"/how-to-make-obsidian-plugin/"},"frontmatter":{"title":"🔌 옵시디언 플러그인 개발 이렇게 시작해보세요"}},"next":null},"pageContext":{"id":"3dadefdb-a6c0-52b6-b3f6-f0aff3b0e408","previousPostId":"5a653c52-2ca1-597a-adfc-d04e90e7119f","nextPostId":null}},"staticQueryHashes":["2841359383"],"slicesMap":{}}