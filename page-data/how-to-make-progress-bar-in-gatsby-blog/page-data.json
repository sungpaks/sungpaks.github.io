{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/how-to-make-progress-bar-in-gatsby-blog/","result":{"data":{"site":{"siteMetadata":{"title":"조성개발실록"}},"markdownRemark":{"id":"73996920-36ad-5a49-8e56-3ab94d6b353b","excerpt":"그냥 갑자기 progress bar를 블로그에 추가하고 싶어졌습니다..  그 왜 그런거 있잖아요.  블로그 내리면 스크롤 얼마나 내렸는지 보여주는 상단 바 간단히 스크롤 정보를 얻어다가 몇 퍼센트나 왔는지 확인하고, 그 퍼센트를 bar의 width…","html":"<p>그냥 갑자기 progress bar를 블로그에 추가하고 싶어졌습니다..</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/57be3d00a1b3c10880910846df8f77e0/cc155/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 51.26582278481012%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAAsTAAALEwEAmpwYAAABwUlEQVR42pXSy28SURTH8Wv4J+raslSctf4BPv4M3bkzLrpx655EExtbYVE7qdGYtAvTLnzQhEoC8igwM1BeQ0UGqTzaYYBO+XodGk1VTHqST37nJmd1zhUvMhbXwzluqxo3Vqduqjq3VEOmQcRoUK8UqVSrtFotLMv6p2aziT2wEWb3hK29Me/LY96d2io5rBd6bEhfuw6ObXN0NMAZDP/LPXYRkeY2L6sqb2qvPGsVldi3CNCXugzd7xyODqQ2A7czky3nxicDxN2PD5hbCeBfu+aZW1G48+Ee1mGeei+D2Umh1aOe/V5a2qXe/VtNznWdJqJmN0m0ayQPTE+8XaXUb+NO4PjUz95lmhNpdk0QDTNDPvmYwu4iRuapJ59+QjIZJPk5SCIeJC4lEtP3xvoiS8/ChEMhQs9/W15apioPJzY375NOCQoFH7ohfikWBbncBXZ2fESjPmIxH9msYGHhIn6/gqJcJhC44lGUq8zPX0JVVxEdeb2caaJVSmi6hmboZ+T1s302P80/aYbBwHEQWF/g0zbUy3JhNjg9GPZnG80w7MqU/3CUiDJ89BDn7WucfR2nlMYpZ85vL8Wo3eAHPBOvgKEtsuEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"progress bar\"\n        title=\"\"\n        src=\"/static/57be3d00a1b3c10880910846df8f77e0/f058b/image.png\"\n        srcset=\"/static/57be3d00a1b3c10880910846df8f77e0/c26ae/image.png 158w,\n/static/57be3d00a1b3c10880910846df8f77e0/6bdcf/image.png 315w,\n/static/57be3d00a1b3c10880910846df8f77e0/f058b/image.png 630w,\n/static/57be3d00a1b3c10880910846df8f77e0/cc155/image.png 886w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그 왜 그런거 있잖아요. <br>\n블로그 내리면 스크롤 얼마나 내렸는지 보여주는 상단 바<br>\n간단히 스크롤 정보를 얻어다가 몇 퍼센트나 왔는지 확인하고, 그 퍼센트를 bar의 width로 주면 될 것 같네요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 185px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1930acb1cee30895c5b7339f5ef3c9a6/1d79a/image-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 147.46835443037975%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAdCAIAAAAl5NuSAAAACXBIWXMAAAsTAAALEwEAmpwYAAABVElEQVR42p1UyaqDQBCc//8nPSgmHhQkETEKIj6XuMb9nMKGwReCmbHBZkaoqeqVdV03jmMURXEcD8OA60vYGL5lWf42m+f5JWPs+XyapokT+HVdT9NUnJ81TRMEATwAruvWdd33vYTsaZrgQVhVle/7cjF3mwGcZZnjOPSWKJgb8JCNKE6CkyRRFEUw7f/AJJ5SKJI29nEHOM9zwzBEIv8EEzkO6Lm2baXBEFwUxeVygf5j8ezrX2DwCrpNjpmDQX69Xs+AySAbZT8DBnlZlqqqnmRG2GjYgwljB0jUDOSapsFTCiWYKWwsCaqftGxg0CqWZX2dc/azBwFGwaWZ95Hf73f+hwf/GwxO7DnP82hOser4zPyWTeTwt9sN1zAMoYJSwESGnhrm8Xis6+puhkSIgnnktm3jAOWisvmSQMGxoShb5EXBRI6c7fuMiW/pfZEI/AaAZEzDPokhXwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"어디까지내려가는거에요\"\n        title=\"\"\n        src=\"/static/1930acb1cee30895c5b7339f5ef3c9a6/1d79a/image-5.png\"\n        srcset=\"/static/1930acb1cee30895c5b7339f5ef3c9a6/c26ae/image-5.png 158w,\n/static/1930acb1cee30895c5b7339f5ef3c9a6/1d79a/image-5.png 185w\"\n        sizes=\"(max-width: 185px) 100vw, 185px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>시작해봅시다</p>\n<h1 id=\"스크롤-정보와-스크롤-이벤트-얻어오기\" style=\"position:relative;\"><a href=\"#%EC%8A%A4%ED%81%AC%EB%A1%A4-%EC%A0%95%EB%B3%B4%EC%99%80-%EC%8A%A4%ED%81%AC%EB%A1%A4-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%96%BB%EC%96%B4%EC%98%A4%EA%B8%B0\" aria-label=\"스크롤 정보와 스크롤 이벤트 얻어오기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>스크롤 정보와 스크롤 이벤트 얻어오기</h1>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1cc1257b5579aabb3ab22a8629868b4c/525d3/image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 110.12658227848102%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsTAAALEwEAmpwYAAADyklEQVR42nVQa2/aVhj2z5smTdqXad00rVKnfe2X/YVqnyrtliXQppVGloRmoW0uBhsM5mJjLsYNJWCMjW0wSwjgC8YXwqXZS7JVVZO9es6j97znPO95zossFgtd11VV7ff7pmmenZ2NRqPhcAh8cXFxfn5uGIbrusvl8t2tQMbjMUEQkUiEJMmTk5NwOIyiaKlUqlarxWKRpularSaK4t3i2WwGD0ILy7Icx/E8z72O6XQK7Ps+yObz+bu7AoEDUMI927aBZ7O5769k0AXqwB/eXv4X/4phwa80TbvpoiiKNRqCHahfXV199BTUwQu0hgHBsBBYN3MCn/B4T9NMfXh5Ob3T540Y7AwGg5X4/X/mq1hAAtX5/wf8a3Xv+s5K7LoOTGm5WFxdG4V1jdvxYX31fwRsVGuNWr051E33cj7xpo4PuLwN9xrvt4vFEtFt71lceoKJwZiwgTY3UGEd+JgPoM0AKgSjQjDWgtNNHCBt4m3gYEx8EmtdGA4yGntBTFxHAa11VFg75NejUgDv/A7bqLARFQMYtG4/xeXNhLoZV5/iShBTgjGpD2Jj4v+ZUkNJNUTIIUJ9FuPvPXj45f3vt9PqH0l1K6mESGU73dlJd3ezK4Qz2k5a2ya7A8tFrIm/l5PDWXk3I++k2zuZTuT44KdHX//w6NdIsR/OSHu59j6lRGj1ZV59xXQAkO9TKlhGxq5/wMiv6BX2cxJaaPu+LrcLn39xL4RVj0rd14xyUOxAgpY1lNWAj8raYVE1bBB70xjbjZY6gANGYRo937PPzntfffvd4+evU/UBWlYxVsNZLVHpEVwvzv2NVXqximZOPMR2/TgjYXkRZ1pRqpXnGqPRGS/UP/n0sx9/CVG1Ac60iZKaqnTTnEZynRSnERWNKHfMiYtMHC/FNAAEXTsiKjTDDAc9vlX/5v6Dx79tpZgWmuLwXI3INxJUnaCB+QTNY9lTYzxZiclCgyzwwHj2bTyV7/c1SRGfb73YO8ymGD5B1RL0aTJfJ6g6njnF0rVEtn6crOqmjTiOny0K6UIzVxYpVkoXBL7J56h4Ip3PlFqZYjNTbFGsmK+0C29kutJmODlTEMh8cwy2Xc8vV5XyicJWVfatwp12Iy+P1tZ+JnPlPCvRrMRUZEiOkicvUDaCc1sHxcBOLrCbHegWAg2wbI3M81SpRZel4hs5W4BEhpxmxRQjgKMCJ2dLLZIRyAJ4hCnU/4qWdctGLmcz7VzvD62RMekPxoORPdQhsSA3LKc/hMoYjsyxY1ru0LB1Y2KNXd2czGazfwBmXGp8vHeuMgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"어디지\"\n        title=\"\"\n        src=\"/static/1cc1257b5579aabb3ab22a8629868b4c/f058b/image-4.png\"\n        srcset=\"/static/1cc1257b5579aabb3ab22a8629868b4c/c26ae/image-4.png 158w,\n/static/1cc1257b5579aabb3ab22a8629868b4c/6bdcf/image-4.png 315w,\n/static/1cc1257b5579aabb3ab22a8629868b4c/f058b/image-4.png 630w,\n/static/1cc1257b5579aabb3ab22a8629868b4c/40601/image-4.png 945w,\n/static/1cc1257b5579aabb3ab22a8629868b4c/525d3/image-4.png 1090w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>먼저, 스크롤이 어디 쯤 있고, 전체 스크롤 높이는 어느 정도인지 알아야겠죠?<br>\n<code class=\"language-text\">document</code>, 또는 <code class=\"language-text\">window</code>객체에서 정보를 가져오면 될 것 같습니다.<br>\n저는 <code class=\"language-text\">document</code>썼습니다</p>\n<p><code class=\"language-text\">document.documentElement.scrollTop</code>으로 현재 스크롤이 위치한 높이를 알 수 있습니다.<br>\n근데 스크롤은 두께가 있죠? 전체 문서에서 현재 위치한 화면의 가장 위쪽이냐, 가장 밑이냐, 등등..<br>\n<code class=\"language-text\">scrollTop</code>은 현재 위치한 스크롤의 가장 위쪽 좌표값을 줍니다.</p>\n<p>이제 전체 스크롤 높이를 알고자 한다면, <code class=\"language-text\">document.documentElement.scrollHeight</code>를 가져오면 됩니다.<br>\n그런데 주의할 점은, 이 전체 <code class=\"language-text\">scrollHeight</code>에서 클라이언트 화면(유저가 보고 있는)의 높이인<br>\n<code class=\"language-text\">documentElement.clientHeight</code>를 빼줘야 합니다.<br>\n우리가 방금 <code class=\"language-text\">scrollTop</code>, 즉 스크롤 중에서도 위쪽 좌표를 기준으로 하기로 했죠?<br>\n따라서 <code class=\"language-text\">documentElement.scrollHeight - documentElement.clientHeight</code>값을 전체 스크롤 높이로 써야<br>\n가장 하단까지 갔을 때 진행률이 100%가 될 수 있습니다.</p>\n<p>이 세 가지 정보를 하나씩 <code class=\"language-text\">console.log</code>로 찍어보면</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 333px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9a755055e2ff0862734d7dc4303752cb/24c7e/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 128.48101265822785%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAaCAYAAAC3g3x9AAAACXBIWXMAAA7DAAAOwwHHb6hkAAAEGUlEQVR42pVV13IbRxDE//+PX/xoy7ZoMNgkZVDIuJzjXg6tngUJQa4iy96qwS429PTEW5RlCS/M4QQZ/DhHrnrEWYMgUfCiguta7wVJxXsForSG5cVcZ7C9RL8tqgFJ3vBMYbFavWB3MvFlvcXL5oi0aOETzAlSSq4fpEUDmwpFaUgFm+0Jfz+t8Pi8xmZvomxGKs9h2CEWN39+xnEXITAmAhWanU82Ltn5Sc2LJWJqd8MStk8ruP8l4D2yKusRubArOm1FP8xY3N4vYW4j+LsWJ8tBQtpJRvPI0PVThOKGoiYQ3UITA5q6DlOkVQdVdyj13GuZZgIul0tkWQYZMzdkTPNZhkn2KPi+fptl8/X6ZZahAZM0I90RRVGiqhsUpcIwzmj7ESXXsleqmuuKbJU+b9pOg1dVDSWiKtRNewZMCVjXNQzDgOPYsG0LAxXUBLIsC2EYwvM87tsXERJihe/7+szzfG3p4vZ2iYMZwQoYgKSDGbSwwg5Hn5GNWgTZAD8d4KW9Fl/+U7ykhxt3PGNKZSPfVDB8dQb8ug/wvA2wMhR++Ufh54cMPy1T3HwtsXdr7JwKO1tRSafXW653dqVlaykc3AYPKxu3z4YA3sJ2QyZpDCtq8LRLsOMFIxqw91pETKNcdSjqAYZFs8oeVTtTph+k7kQY5bu7O7iui0+ffqUvU/z1cKeD0/cDbMtAksRcMzWqBn/8/hvSvHyN51Vor4ZmGEURo1Wh6zq0lH4YMI7jq0yYpkmvJa0GnrVtq+e+7y935f00zWfAIAgQx7GOpjwSAJnnWeZR/38DlYeHwwGn00lH1zRNLSExJNVe0ybl5bPmTrSqAn0oNTrASQbNfCSgzINmNGnziqKgS5KLuUJCMxTALM9wPB5hOi6qwMSwuYGb9bjdj1TU6JyTOcsSRCHZDD0O+x3umCXXVba4ufmMOEn1H/FfXbfI0oIdpqSSgmYMGqxsJrJl7jEn82piQxiZf71uDrokRyCMEiyElfhFhuc62KzXOO4PSOOQvvVpZq8jmqkBT8cKK7PSyb9zGi1hMVwYih8XSintFxklfWLQwTlr9dqMef6xAVyP+cp/grXI81yHX4aqWPgs/pTUHc9l9BwcjgaLns2hnrC2WTUeWdFUO+p0aSblmYykjARpIT9vDBU/Bw4bw9PjI0yLDYCp5LH4JQDSTKWCTn4Ll760CGjQ9ER9ACipIf5Ms0K3ou/p8N9MvgC+mZyyzBy2poCsJHm3mz1WL2t2Y7pBTbjflXg+MSjsRjv7HBSJ9LsMe6ZNHIVYbzZo6LdWfEdHs2bQ9Ixi3hN40BEX36VqRNNNF4byBb0ATlrLhIFspdm+Z+J7QwClahaCKoD8UuIjjPkDwSuZ+/t7LKSdS43+W9v/HfJGmsQ32UjG/fsQVxsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"스크롤 정보 로그\"\n        title=\"\"\n        src=\"/static/9a755055e2ff0862734d7dc4303752cb/24c7e/image-1.png\"\n        srcset=\"/static/9a755055e2ff0862734d7dc4303752cb/c26ae/image-1.png 158w,\n/static/9a755055e2ff0862734d7dc4303752cb/6bdcf/image-1.png 315w,\n/static/9a755055e2ff0862734d7dc4303752cb/24c7e/image-1.png 333w\"\n        sizes=\"(max-width: 333px) 100vw, 333px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>대충 이런 식입니다</p>\n<p>이제 스크롤 정보 가져오는 것은 알았으니, 이벤트리스너를 등록해봅시다.<br>\n<code class=\"language-text\">document.addEventListener(\"scroll\", scrollEventHandlerFunction)</code>과 같이 해줍니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\">document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"scroll\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> currentScroll<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop\n  <span class=\"token keyword\">const</span> totalScroll<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span>\n    document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight <span class=\"token operator\">-</span>\n    document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>clientHeight\n  <span class=\"token function\">setScrollPercent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>currentScroll <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> totalScroll<span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>대충 이런 식의 코드를.. 상단 고정 레이아웃 컴포넌트에서 추가해줬습니다.</p>\n<h1 id=\"progress-bar-컴포넌트-생성하기\" style=\"position:relative;\"><a href=\"#progress-bar-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\" aria-label=\"progress bar 컴포넌트 생성하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>progress-bar 컴포넌트 생성하기</h1>\n<p>이미 상단에 고정된 레이아웃인 <code class=\"language-text\">top-ui</code> 컴포넌트가 있으므로,</p>\n<div class=\"gatsby-highlight\" data-language=\"javascript\"><pre class=\"language-javascript\"><code class=\"language-javascript\"><span class=\"token operator\">&lt;</span>div className<span class=\"token operator\">=</span><span class=\"token string\">\"progress-bar\"</span> style<span class=\"token operator\">=</span><span class=\"token punctuation\">{</span><span class=\"token punctuation\">{</span> <span class=\"token literal-property property\">width</span><span class=\"token operator\">:</span> <span class=\"token template-string\"><span class=\"token template-punctuation string\">`</span><span class=\"token interpolation\"><span class=\"token interpolation-punctuation punctuation\">${</span>scrollPercent<span class=\"token interpolation-punctuation punctuation\">}</span></span><span class=\"token string\">%</span><span class=\"token template-punctuation string\">`</span></span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">}</span><span class=\"token operator\">></span><span class=\"token operator\">&lt;</span><span class=\"token operator\">/</span>div<span class=\"token operator\">></span></code></pre></div>\n<p>밑에 적당히 이런 친구를 추가해줍시다.<br>\ncss 클래스인 <code class=\"language-text\">.progress-bar</code>는 적당히 원하는대로 작성해줍시다.<br>\nwidth는 변수인 <code class=\"language-text\">scrollPercent</code>를 쓰고싶으니까, 리액트 컴포넌트에서 직접 줍니다.</p>\n<h1 id=\"failed-to-server-renderssr이라는-에러가-떴어요\" style=\"position:relative;\"><a href=\"#failed-to-server-renderssr%EC%9D%B4%EB%9D%BC%EB%8A%94-%EC%97%90%EB%9F%AC%EA%B0%80-%EB%96%B4%EC%96%B4%EC%9A%94\" aria-label=\"failed to server renderssr이라는 에러가 떴어요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Failed to server render(SSR)이라는 에러가 떴어요</h1>\n<p>그대로 진행해보면..\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c313c34e4de767724e95988a1673e56f/432e7/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 110.12658227848102%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsTAAALEwEAmpwYAAADB0lEQVR42o1SWU8TURSeX6M+QiyExVIQ0GiQBzQxMcIDKRQoZZFFxKgRwhbwRU1oK5TSQhWCEOTVpBJ81YQ04QkDpHSdrcu0nS4z+N0OYFMkenpy55zvnu9st5RebWwrNbZDy0xEy2EYO8pN0CxC8LYSgujV5jyldEXmnkrrk2pbb9Vit2bBoLZ0V1oNNyzQ3ptArL1V1qE6h750XltgbCk05SrVVmzuq7G9aPg0eMfeV2vrv2V/Vufor7U9vbs0XO8YvucYuG1/Xv+xS7PQUmhsvW7KVUJ+9WBl9NHaeOP6TMvmVPPGeNPGTOvWWOP6VPPmG93WtPbLy/sr2oLZPGaWXGTuLJvvLLMYyi09GjS80KW2oHmAZIoKS0fJXGf5/EXmaeXph86lAdeH9h9z+p/Lg66Jhq/awlmdykwiVCadipwIu6hU07X3hmL7UM1aX8XqgGZ1qPqzXmV7fOVt49V3/1TKMbljH/tmfe1cHHUujjitI0772PbyxI6ijsnv53ae2ie2KVmWT04UzZVTN3ubg54J7CAToDIZyeP1e71+luFwejw+t9sbCDIsx7vdHmgwyPh8gUCAdh97s6eH50Mg7+//oiRZghMI0l6fH8pynN8f8AeCQZqBy7AsXBbCIbUPiCiKSheHh4eUJEkcH6JpBgSaYTiOR3GGBPMEAcRyNMN6vD6GZj0eL3CkAOvo6IiQcUfKZhMjGHHHmATFgzQaVlIIsVg8noiRMw4+piaVZVkCAj8UCoXDEUGIRaJRDAIbeCgcAQxG3trO2palvJVeJudhaPbPzHt7ey6Xa3d3NxKJ5L5H7sP8vTIsLBCTJBKJTCYj/4colQ8ODijFSafTqTNJZiV1ueAWZOyIkMHEGnmeR3HY0WgUjZxnURLlGmJSBAsfMjO6TYgiOOgffEEQlF6Ap3MEbipNfhBURiS2LWdSKYEP4a0IWRTRD8dxyEXTNIzsE4axS9iRaIQXeC7KJdNJBJN3RqZkIoGNwYchgCcI6Dz7FZQ/huKSvnAfj2akjJgQfwNPRP/OCmEFIAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Failed to server render(SSR)\"\n        title=\"\"\n        src=\"/static/c313c34e4de767724e95988a1673e56f/432e7/image-2.png\"\n        srcset=\"/static/c313c34e4de767724e95988a1673e56f/c26ae/image-2.png 158w,\n/static/c313c34e4de767724e95988a1673e56f/6bdcf/image-2.png 315w,\n/static/c313c34e4de767724e95988a1673e56f/432e7/image-2.png 570w\"\n        sizes=\"(max-width: 570px) 100vw, 570px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span><br>\n이런 에러가 납니다<br>\n게다가 <code class=\"language-text\">gatsby-config</code>에서 <code class=\"language-text\">flags: {DEV_SSR: true}</code>를 추가하여 서버 사이드 빌드 에러를 활성화하지 않았다면<br>\n그냥 <code class=\"language-text\">gatsby develop</code>환경에서는 모르고 개발했다가 빌드할 때가 되어서야 에러를 알게 됩니다</p>\n<p><a href=\"https://www.gatsbyjs.com/docs/debugging-html-builds/\">Debugging HTML Builds</a>에서 관련 내용을 확인할 수 있는데요<br>\nGatsby는 기본적으로 페이지들을 정적 HTML파일로 빌드하고 서버사이드에서 렌더링해주기 때문에<br>\n브라우저 레퍼런스인 <code class=\"language-text\">window</code> 또는 <code class=\"language-text\">document</code>객체에 접근하려고 해도 해당 객체가 없습니다..</p>\n<p>그래서 이걸 해결하기 위해 찾아보다가 <a href=\"https://stackoverflow.com/questions/62816197/how-to-implement-document-getelementbyid-in-gatsbyreact\">스택오버플로우</a>에서 관련 글을 찾았는데<br>\n코드를 React Lifecycle에 포함시키기 위해 <code class=\"language-text\">useEffect</code>로 감싸면 간단히 해결된다고 하네요</p>\n<p>그래서 결국 이렇게 됩니다</p>\n<div class=\"gatsby-highlight\" data-language=\"typescript\"><pre class=\"language-typescript\"><code class=\"language-typescript\"><span class=\"token keyword\">const</span> <span class=\"token punctuation\">[</span>scrollPercent<span class=\"token punctuation\">,</span> setScrollPercent<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token function\">useState</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span>\n<span class=\"token function\">useEffect</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n  document<span class=\"token punctuation\">.</span><span class=\"token function\">addEventListener</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"scroll\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> currentScroll<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollTop\n    <span class=\"token keyword\">const</span> totalScroll<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span>\n      document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>scrollHeight <span class=\"token operator\">-</span>\n      document<span class=\"token punctuation\">.</span>documentElement<span class=\"token punctuation\">.</span>clientHeight\n    <span class=\"token function\">setScrollPercent</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>currentScroll <span class=\"token operator\">*</span> <span class=\"token number\">100</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">/</span> totalScroll<span class=\"token punctuation\">)</span>\n  <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<hr>\n<br/>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6d78ecfb851f422642e3f5a1b326c5f5/b97f6/image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 39.87341772151899%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAYAAAD5nd/tAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABWElEQVR42m1R22rCQBDN//+ATxW/QHzxQQRf1IegVAuBUvqgNpg0l91c3Fyb5HRnghJpBw5nZ3aYOXvWiMMrvk6f2O0O2O9fcblcEMcxoih6gpTyT20Iz/PgOA4MId9gX3c4vG9hfZgIwgBVVaEsS0ae5yiKgmvEVBue7z20MAxDGPVPhaatkRcKSfqshpRmWYY0TeH7PudCCFZDNcppCC2goF6DDq7jYrPZYvwyxnQ6xWKxwGw2w3K5hGVZOB6PGI1GWK1WWK/XmEwmME2T8/l8zgIoSAQPtG2bG87nE190XYe2bZmHGN5RDHtYmOvCoESpDLebYsllWekn1KjruvdSI2cP+1rBvpGHPd+XPAa2OsnzG6RwtB+eli8g9M8HQaBBfhGH8DWiiDwTCIWEyvrP6gcyIUkSPVDLLstCD/pGJK+aA212xGratkPTNPw04ubOGv+FUgq/4MBc1Gr/IZEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"결과\"\n        title=\"\"\n        src=\"/static/6d78ecfb851f422642e3f5a1b326c5f5/f058b/image-3.png\"\n        srcset=\"/static/6d78ecfb851f422642e3f5a1b326c5f5/c26ae/image-3.png 158w,\n/static/6d78ecfb851f422642e3f5a1b326c5f5/6bdcf/image-3.png 315w,\n/static/6d78ecfb851f422642e3f5a1b326c5f5/f058b/image-3.png 630w,\n/static/6d78ecfb851f422642e3f5a1b326c5f5/40601/image-3.png 945w,\n/static/6d78ecfb851f422642e3f5a1b326c5f5/b97f6/image-3.png 958w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>짜잔 이렇게 태그 색깔과 좀 비슷하게 연두색으로 progress bar를 넣어봤습니다</p>\n<p>별 것도 아닌데 이렇게나 떠들었네요<br>\n마치 제 자소서같습니다.</p>\n<p>이만 마칩니다</p>","frontmatter":{"title":"📉 Gatsby 블로그에 Progress Bar 넣기","date":"March 17, 2024","description":"Failed to server render 에러에 주의합시다.","tag":["Blog","Gatsby","TypeScript","JavaScript"]},"tableOfContents":"<ul>\n<li><a href=\"#%EC%8A%A4%ED%81%AC%EB%A1%A4-%EC%A0%95%EB%B3%B4%EC%99%80-%EC%8A%A4%ED%81%AC%EB%A1%A4-%EC%9D%B4%EB%B2%A4%ED%8A%B8-%EC%96%BB%EC%96%B4%EC%98%A4%EA%B8%B0\">스크롤 정보와 스크롤 이벤트 얻어오기</a></li>\n<li><a href=\"#progress-bar-%EC%BB%B4%ED%8F%AC%EB%84%8C%ED%8A%B8-%EC%83%9D%EC%84%B1%ED%95%98%EA%B8%B0\">progress-bar 컴포넌트 생성하기</a></li>\n<li><a href=\"#failed-to-server-renderssr%EC%9D%B4%EB%9D%BC%EB%8A%94-%EC%97%90%EB%9F%AC%EA%B0%80-%EB%96%B4%EC%96%B4%EC%9A%94\">Failed to server render(SSR)이라는 에러가 떴어요</a></li>\n</ul>"},"previous":{"fields":{"slug":"/javascript-promise/"},"frontmatter":{"title":"🤙 자바스크립트의 비동기 작업과 Promise"}},"next":{"fields":{"slug":"/javascript-async-await/"},"frontmatter":{"title":"🛑 자바스크립트의 비동기 작업과 Async/Await"}}},"pageContext":{"id":"73996920-36ad-5a49-8e56-3ab94d6b353b","previousPostId":"99636cbf-f4f0-54d9-b522-1bed67a7b2b6","nextPostId":"d26bb57c-fcaa-54f5-849d-7fba212f2751"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}