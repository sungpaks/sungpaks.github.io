{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/deadlock-and-dining-philosophers-problem/","result":{"data":{"site":{"siteMetadata":{"title":"조성개발실록","siteUrl":"https://sungpaks.github.io"}},"markdownRemark":{"id":"633997d7-a207-5b82-91ba-a2d0eb569d38","excerpt":"…","html":"<h1 id=\"데드락이-뭔데요\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EB%93%9C%EB%9D%BD%EC%9D%B4-%EB%AD%94%EB%8D%B0%EC%9A%94\" aria-label=\"데드락이 뭔데요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데드락이 뭔데요?</h1>\n<p>그런 적 있으신가요? 친구들이랑 얘기할 때<br>\n예를 들어.. 시험기간에 피시방가자거나? 술먹으러가자거나?<br>\n\"너 가면 나도 간다\"를 서로 주고 받는 ...</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/7323be423dcb292b098c225c44327535/5a46d/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AGhPO5JuV5t3W829o+3r2+jm3P7+/fv7/P7//+/v7Pj39P////f4+tDEtcivkMOpk6KTgpiNfp+SgaWXhACtgmOVclqXh3jPxJXAtYe2qI3w6d3o3M3n2MXg0Lzhz7bizK7awKDYvJjZvJLWuJXTtZLato7mwpXStY4AVkxGnHtnyrGa1sOuzrig0reY1biV1riV1rWS07ORzrGQ0LOS0bWV0bWUxaeKu6CDpZB7rZqFuKOJp5V9AD1CTlxPSrqUd+zKqObYx+Xd0eni1+LYz+PZ0NvSyNbNw97Uy9zVzMO4qp6Kb6CLcZyQfK+qn62pm56cjwBLVGJUV2RpVU3pw6P469nl49vn5Nri3tTf29Da1crRyb/SysDPyr6/tqa0oouxoImroI62sqSwq56op5kAi4KM4s3H8+XM/OG+89m71M/E09DFzMi8ycW6ysW6y8a7yMS5wr+0s66huLGkubKlopmLsa2hqKSYqKaaAPLGsfnRsfvVsv7SsPbIps7GuMTFucbEuMPBtr69sMXDtcvGuczIu7+6rbmypLavoaCbjJ6ajp6dj6GilQC/l3zgq4/jsJTuvJzvxaWSin10dW97fHNycmiAf3h7enhvbW+BfntvbW6KiIi4s63HwrnKyb+sraGbnZAAIh4deF9RyJp90qKEn5KIbG1vWFhadHRzeHh+enhUZWQghIQURkYMfn4SeHkJp6hW3NvN4N/Z4N/arrClABIUFRgaG0s9N5qBbrKwrKCioJSTkbGxrrCwtp+fcJaWH7OyK4mGPKSkMq2sMMbFWvDx4q+vo6+vpJmckAAaGhklIiIqJSdubmaUlYiGh3qGiHuDhHeDhHmEhniHiXCKi26qp5CzsJDAvqPMyqrPzsGJinh/g3B4e21ftqdt26FADgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"네가 하면 나도\"\n        title=\"\"\n        src=\"/static/7323be423dcb292b098c225c44327535/5a46d/image.png\"\n        srcset=\"/static/7323be423dcb292b098c225c44327535/c26ae/image.png 158w,\n/static/7323be423dcb292b098c225c44327535/5a46d/image.png 300w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이렇게.. 예를 들어 민수와 철수가 둘이서</p>\n<ul>\n<li>철수 : \"민수 가면 나도 감\"</li>\n<li>민수 : \"철수 가면 나도 감\"</li>\n</ul>\n<p>이렇게 하면 둘이 서로가 서로의 행동을 기다리며 교착상태에 빠지는 셈인데<br>\n프로세스끼리도 이런 일이 생깁니다<br>\n<strong>데드락(DeadLock)</strong> 이라는 것인데요<br>\n<strong>둘 이상</strong>의 프로세스가 서로를 기다리며 <strong>BLOCK</strong>상태에 빠지고, 그 <strong>BLOCK</strong>을 푸는 <strong>열쇠(signal)</strong> 를 또한 서로가 쥐고 있는 상태를 의미합니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b2557d6202d9996edd01340c3976d6a4/4f9e8/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 35.44303797468354%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAYAAAAIy204AAAACXBIWXMAAAsTAAALEwEAmpwYAAABYElEQVR42pVQu2oCQRT1W0w+QbCxsLK0zUJszTokIf6Af+EH+AdaarOF6FqIpSiKyvoCQVRU1N29MzdnxgcJpMnA2bP3debOiaxWq+fhcPg5n89zg8FAnM9nsdlsxHK5FKPRSHieJ4jIQP+jX+z3e7Hb7US/3xeTyUT0er3ceDz+Qi4aOZ1OmcPhwCjK9XrNtVqNO52OAYb5eDzy/SwWC2632+y6LjebTd5utzydThlzpOvQsiLgV2zF2DBotVqUTCYpkUhQuVzWTQZSSlJKURiGVCgUKBaLkW3bhMvJsiyCkK8Ffd9/MYJo5EqlQvF4XOXzeYVY4VmGUX8AgwqXq9lsplKplEqn0yqbzep8qAVhy1Xwcrlwo9EISqUSOY7za6ufuOc1F4tFwrMJ4jr2H4L4ZG4WyXq9zt1u9xpIyX8dCBuuVqvGv1sv3QSNh09BELwDb0jY/wXmNOvZD9gR/QYPA96nklT4WAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"데드락 상황\"\n        title=\"\"\n        src=\"/static/b2557d6202d9996edd01340c3976d6a4/f058b/image-2.png\"\n        srcset=\"/static/b2557d6202d9996edd01340c3976d6a4/c26ae/image-2.png 158w,\n/static/b2557d6202d9996edd01340c3976d6a4/6bdcf/image-2.png 315w,\n/static/b2557d6202d9996edd01340c3976d6a4/f058b/image-2.png 630w,\n/static/b2557d6202d9996edd01340c3976d6a4/40601/image-2.png 945w,\n/static/b2557d6202d9996edd01340c3976d6a4/78612/image-2.png 1260w,\n/static/b2557d6202d9996edd01340c3976d6a4/4f9e8/image-2.png 2432w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이 데드락이 발생하는 경우를 잘 보아하니, 아래 <strong>4가지 조건을 모두 만족하는 경우</strong> 데드락에 빠지더랍니다</p>\n<ul>\n<li><strong>Mutual Exclusion</strong> : \"열쇠\"같은 자원에 상호배제적으로 접근하도록 되어있습니다. (관련한 설명은 <a href=\"https://sungpaks.github.io/mutual-exclusion-software-approach/\">전에 쓴 글</a>을 참고해주세요)</li>\n<li><strong>Hold-and-Wait</strong> : 자원을 가진 채(Hold)로 다른 자원을 요청하여 기다립니다(Wait).</li>\n<li><strong>No Preemption</strong> : 자원을 강제로 뺏어가는 경우는 없습니다.</li>\n<li><strong>Circular Wait</strong> : 자원을 가지고 있으면서, 요청하고, 요청하고, ... 가 순환적으로 연결됩니다</li>\n</ul>\n<p>이렇게 자원을 요청하거나 할당하는 양상을 <strong>Resource Allocation Graph</strong>로 나타낼 수 있는데</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a44266041c37116a90dafb08f46fc83e/6029f/image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABXElEQVR42qVSXU+DUAzl//8VfdiT08UXN/RBTYzRbAqGOQYMmMAYXC4fg2N75x40TB+8SdMG2tP2nGo48rquQ5IkCIIA2+22P4fs1gfGLqCvgDuKNS5ar9dI01QB+L6PzWaDKIpg2zYMw4DrupBSqiZFUai8tm1R0Lcrp8X5vMFgmkL3CDCOY4RhqAA5dhxH+QOgaZrwPA95nqOua+UZsK4qZBRPVh2GVoWTxw9M3A7af1ZuKefieYWRmeOa1r0PaUIu7LO+Bn1WygJlKb8Y/QOQeWqa5luDn3lyB4gGyGvil/zRlRmIuWX+mM/eqbFXeGQDlw72orCqy+VSKc2xZVkKhI1Fmc1mSmX+L4RQoh0sIvH0d4mhkeP0IcANA/I5sHJlWaqT4JPJskx5LlosFgqc85gCzmWRMjIhCjob4Gy+w+BFUPyLyvx4Ij4hBjt2CeOpA/0txlMEvCbAJ2Od/+ZZSOu5AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Resource Allocation Graph 0\"\n        title=\"\"\n        src=\"/static/a44266041c37116a90dafb08f46fc83e/f058b/image-3.png\"\n        srcset=\"/static/a44266041c37116a90dafb08f46fc83e/c26ae/image-3.png 158w,\n/static/a44266041c37116a90dafb08f46fc83e/6bdcf/image-3.png 315w,\n/static/a44266041c37116a90dafb08f46fc83e/f058b/image-3.png 630w,\n/static/a44266041c37116a90dafb08f46fc83e/6029f/image-3.png 906w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>\nWait / Hold\n</figcaption>\n</figure>\n<ul>\n<li>프로세스가 자원을 요청할 때는, 리소스 Ra의 까만 점으로 바로 연결되지는 않습니다. 아직 요청이 받아들여지지 않았기 때문</li>\n<li>프로세스의 요청을 받아들이고 할당(hold by)하는 경우, 리소스의 까만 점에서부터 프로세스로 화살표를 긋습니다</li>\n</ul>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9fe15c38c42eccfdee548d80caf64ac9/fcbaf/image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 49.36708860759494%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAKCAYAAAC0VX7mAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABaElEQVR42m1SCWrDMBD0/59QCu1jUggNhUIPQmnr2PhQLAcrju34kDTVKpZKcBaEjp0d7TGBlBLjOEHLCUUHrHON+ARrGv+mlDK40S7yhLXBMg0xXGMDIQSKgqOpBaIGeHxmeC/VgrDrOjDGUHBuPasfgfunBHHVX7AzOHABQ9+jagdsoz2KYwc5TbhllGlvsF9hjNftL3K2t296ZrSEkwmm3wlIdjrVOBwOoHY4oNubpgE3WZKPrG1be5/mBIIkSUzJhQ9SSvum0HsURRY8DAN2ux3quvaZSqX8OU1T5HmOwB2UcxpSl01VVZ6QhhHHsc3c9Vcq7XtHFWZZhkDPBDQcYQguLZAWcD6fFz0k8rIsbaluWFSJL9k328iGhvIR5uB1j96QKa0XhPS5NFgmOrx8fiNlhb1fDcXFRUZ/D+scb1wuZPNPeNk32Yi7lZHNLMQr2bhAbirc7BWSG8L2hPMeHrXBLoX9B3W/CIDShzkkAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Resource Allocation Graph 1\"\n        title=\"\"\n        src=\"/static/9fe15c38c42eccfdee548d80caf64ac9/f058b/image-4.png\"\n        srcset=\"/static/9fe15c38c42eccfdee548d80caf64ac9/c26ae/image-4.png 158w,\n/static/9fe15c38c42eccfdee548d80caf64ac9/6bdcf/image-4.png 315w,\n/static/9fe15c38c42eccfdee548d80caf64ac9/f058b/image-4.png 630w,\n/static/9fe15c38c42eccfdee548d80caf64ac9/fcbaf/image-4.png 895w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>\nCircular Wait으로 데드락이 발생환 상황 / 데드락이 아닌 상황\n</figcaption>\n</figure>\n<p>그럼 두 프로세스 P1, P2가 자원 Ra, Rb에 접근하는 경우를 다음과 같이 생각해볼 수 있습니다<br>\n왼쪽의 경우 P1, P2 사이에 데드락이 발생한 것을 알 수 있습니다..<br>\n그러나 비슷하지만 오른쪽의 경우, 데드락이 발생한 것은 아닙니다. P1과 P2의 요청을 받아들일만한 재고가 남아있기 때문입니다</p>\n<h1 id=\"데드락-해결을-위한-방법\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EB%93%9C%EB%9D%BD-%ED%95%B4%EA%B2%B0%EC%9D%84-%EC%9C%84%ED%95%9C-%EB%B0%A9%EB%B2%95\" aria-label=\"데드락 해결을 위한 방법 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데드락 해결을 위한 방법</h1>\n<p>그럼 데드락을 어떻게 해결할 수 있을지 알아봅시다?\n크게 세 가지 접근법이 있는데</p>\n<ul>\n<li><strong><em>Prevent Deadlock</em></strong> : 데드락을 <strong>예방</strong>합시다. 이를 위해, <strong>자원 할당 시 규칙을 잘 만들고 이를 지키도록</strong>합니다.</li>\n<li><strong><em>Avoid Deadlock</em></strong> : 규칙을 따로 두고 지키는 것이 아닌, <strong>자원을 주려고 할 때 데드락 위험을 확인</strong>하고 할당해주도록 합니다.</li>\n<li><strong><em>Detect Deadlock</em></strong> : 별 규칙이나 확인 같은 절차 없이, 그냥 두고, 단 <strong>OS에게 수시로 확인하도록</strong> 합니다. 초기 진압을 목적으로 합니다.</li>\n</ul>\n<h2 id=\"deadlock-prevention\" style=\"position:relative;\"><a href=\"#deadlock-prevention\" aria-label=\"deadlock prevention permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deadlock Prevention</h2>\n<p><strong>데드락이 발생하지 않을 규칙을 만들어 예방</strong>하는 것이 목적이라고 했습니다.<br>\n그럼 어떤 규칙을 만드는게 좋을까요?</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 224px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d0f0cf0f4a1e23192507056a401dcde4/80b2d/image-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100.63291139240506%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEeklEQVR42j2T2U8bVxSH53/IQ6W2Em3V17ZSXivxVqWtEilRW6qmIYIi0SasxhAZAiRhS0GEPXWSYpaACUugaVhDgtmMF7ANeDyMx3j3jMfGxuvsNp5eE6nS1ZWOdL/7uzrnu1A0wYIViTNJJhU6jSmfdA0/7jiNxWguxfOZtbeq324WdDQ9DJBhhs8kaCFO8WBP0KkkK0D/w1xatNusHWX5yvY6v88riqJOZ/ws59MPLnz4yYWP2prbM6J4jgkUmwZJNJuCAPYeprhMOBxSKTrnWqTYoYHPiH4iWPLD5V9yL166+OW9W39EEjTNnYFkACeYFAPg0xidhRMMzaXxk9h0/6OJ6oKh7ofyJwM6w+HW9OjfxVeU9SWTzTVWxIITJ1EQw6YpRmBYHoomuXOe8eDBvoERWXmFvPL63dKCmqqy7t4nBxvro1VFTT9+019WiJhMLsxD4qEEJdB8BrwCCoUjZCBgtx+jVmx5eQXDUP3Ohg2zKAaHutraFx81bT6Xt0tuTcn7dtUaJ+ryuohIjIonmHichlCzyY97vF63y+WIRMKBAMkwLOjW9Ozys462FeVTg37HuG8wmPYQGMZQ1IIgu3t7uNcdJHHIgVh8bgdmO0IQeGFpZXp6ZmF50YxiCsXYcL3EsqfFgwEc9/oInAySbp/vJBRiGJoX+CCOQxa9BtbvoEatcXu9o6b66neXJT9//6e0vK4o/8G1XKXiGbhUq9EcajdN6lXD5qrDiqbTZxzLulAYAtiRQYMadbq3y3M9rTUVVaVFhY1VFY2/FzYV55dLqvUa9eqbjZn+LtXA/e3HbWsvZy0whh2hiEkHxWkuyQjAEI/bvjo78c+Ywu8PUrzIpzJqtbb8tqTlXhtBhrgUMISPxelgKBoInPrJcJLhgSRCPCmwKVGz9KKx8HJ3RcGhRpUSRbvDe+nr3K8+zvki5/POzj7QwvdictkhpcGcGDCqaBwYl2aFs/nh3qG7pa9a7mjnZ8BRnz801tE6JSuW15YMdXWnUmfAxwTFM2yaZlLAkywciXPAMP5M3Jl/Mdl4a76h5FVv+67pMJqkLZpNYMjio4a1qTESx2PALVrIZmbJbDjQk2GFjP8kMqZ82XD7xmDlrz21lfX1dZN/9djV26P3a3uKfhpprbPBBx43EYokKRCb/RXnyVGK8weCPtyHWFEr0Hdff4TAy0uL86MK85bq9dTUcE/n+KBcp9VYYNTr8wtCBrjJCiL4sBCBEwThARpYUcTlcTg9LlC/e6cyGuFoIg4KIZ3meC4cPonFoizLUhQVIElgYiQQhDCL2e91jQ6O3MjLb6x/8GZ9q7f3sUx2z+nAFyZG1ueUbngfx09C4VMqyVAUSxB+FwI7LWYvhkLHyIEdNQ89VVz59mretbz6B803C4pbpNLtcbn0et5kf9+79rp/5QOq1Q23kzi2e62Yy2lBbCajG0EgJ2r22o8WXy9IJbLy22VSWU31HdlcX+t4k6SqvEqtNa6ND+4+7zpYmLYb9B6ny+MjfXanEzb7bLb/AF0inMqhl734AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"규칙..\"\n        title=\"\"\n        src=\"/static/d0f0cf0f4a1e23192507056a401dcde4/80b2d/image-5.png\"\n        srcset=\"/static/d0f0cf0f4a1e23192507056a401dcde4/c26ae/image-5.png 158w,\n/static/d0f0cf0f4a1e23192507056a401dcde4/80b2d/image-5.png 224w\"\n        sizes=\"(max-width: 224px) 100vw, 224px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>\n규칙은 예외없이 지켜야 합니다\n</figcaption>\n</figure>\n<p>우리가 위에서, <em>데드락이 발생하는 4가지 조건</em>을 언급했고,<br>\n이 4가지 조건이 모두 만족된다면 데드락이 발생한다고 했습니다<br>\n그렇다면.. 4가지 조건 중 하나라도 깰 수 있는 규칙을 만들면 되겠네요?<br>\n4가지 조건을 다시 살펴보며, 깰 수 있는 방법에 대해 생각해봅시다</p>\n<ul>\n<li><strong>Mutual Exclusion</strong> : 근데 이건 동시성 문제 해결을 위해 꼭 필요해서.. 이걸 깰 수는 없습니다 ㅜㅜ</li>\n<li><strong>Hold and Wait</strong> : 프로세스가 자원을 Hold만 하거나, Wait만 하거나, <strong>둘 중 하나만</strong> 하게 만들면 어떨까요?\n<ul>\n<li>그렇다면.. 실행 시작 전에 <strong>필요한 모든 자원을 할당(Hold)하고 시작</strong>하면 wait은 없을 것 같습니다\n<ul>\n<li>그런데 이렇게 하려면, 자원이 총 얼마나 필요한지 알아야 하는데 : 이건 사실 컴파일하면서 알 수 있어서 어렵지 않습니다</li>\n<li>그런데 모든 자원을 한꺼번에 Hold한다는 점이 문제입니다 : 언제 필요한지 모르는 자원을 시작부터 끝까지 점거하는 셈이고, 이건 굉장한 낭비입니다</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><strong>No Preemption</strong> : 프로세스가 자원을 요청했다가 <strong>Block</strong>당하게 되면, <strong>자원을 강제로 뺏고 종료</strong>시킨 뒤 다시 실행하면 어떨까요?\n<ul>\n<li>그런데 이렇게 하면 실행 시간을 예측할 수가 없고, 비용 또한 많이 들겠습니다</li>\n</ul>\n</li>\n<li><strong>Circular Wait</strong> : 모든 자원에 <strong>정수 번호</strong>를 붙이고, 자원 할당은 그 정수 번호 <strong>오름차순 순서로 할당</strong>하게 하면 어떨까요?\n<ul>\n<li>만약 프로세스가 5번 다음 3번을 할당 받으려면, 3번을 먼저 할당받고 5번을 할당받게 합니다.</li>\n<li>3번을 먼저 할당받는 점이 조금의 낭비가 발생하는 지점이지만, 다른 방법들보다는 <strong>가장 현실적</strong>인 방법입니다 그나마..</li>\n</ul>\n</li>\n</ul>\n<p>그런데 <strong>Circular Wait</strong>을 깨는 조건으로 말한 <strong>정수 번호 순으로 할당</strong>하는 방법이 실제로 어떻게 데드락 발생을 막을 수 있는지 어떻게 증명할 수 있을까요?<br>\n\"어떤 방법이 데드락 발생을 막는다\"? 를 증명하려면 간단히 \"그 방법을 적용해도 데드락이 발생한다\"를 가정하고 이것이 모순임을 증명해야 합니다<br>\n<a href=\"https://www.cs.cornell.edu/courses/cs4410/2017su/lectures/lec09-deadlock.html\">코넬대학교 자료</a>를 보면 다음과 같이 써있는데</p>\n<blockquote>\n<p>That means that when traversing any path in the resource allocation graph, the numbers must increase (because if resource A is held by process P which is trying to acquire B, B must be bigger than A). This means that there can't be loops, because in a loop, the number must eventually <strong>go down</strong></p>\n</blockquote>\n<p>요약하자면.. 순환이 발생하려면 결국은 <code class=\"language-text\">1->2->3->1</code> 이런 식의 <em>go down</em>이 발생해야 \"순환\"이 성립한다는 내용입니다<br>\n생각해보니 당연하죠? 그것이 \"순환\"이니까</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 225px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/15f05532cdf1a2606c476f7256f4a8e0/3684f/image-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEsklEQVR42iWT21MaZxjGdxdEBRZBQA6CIEJjJDHRTDVpouakZjQemjqIoWk1SsIZjzHKLosIiCAsJwXlLCTamjTWi6SZyU0PmU47nVwkk/amnelFp9Np/oF2epGu7c138X3ze5/nfZ/3A4an0JvzS2bU64vn8GTeshyyuiNYNBcvfhbK7rrDCcP03MSMzR5KrqXuJ4p7qxtZs33ViK1hoS1geBL5aMauRzzejQwBm5dxkyeChFKZh4+nFrFKNpcEgiw293T7hWn7cmbvwLueNqFeMxZYCicB9STy8QyqR9y+eDaU3La4Qnp3CIvlVzYyPD4fBAEms6KstJQEgexKjisQDWwVdDaPEfMvRVLAyBQ6OovpUY8vkQunihY3bvSE3Vs7PR+MkEggHWbAjIoKJotOpwMA0DNwLZLb1dnch3A4BQxPH8K6RdcqoZwqmJaDFu/6nbV4g1we041Y+zpbasVwWSkIQQTcerYdz+wYkFUztuYMEban7GNzDt2C63Bg6W2jM2jxxJDo9lBf//erkz+m/V/40U29pp7PpZOhiaH3VxJ5I+o3O4KuSBq4bkUPYZvbu5ELpgrEwCyusDNRXPLgdlUPfmNwfqD7ZdKfn9Ea3jv5LOR1JbZN/8EOwrbKYpu66/AvuX2JQjS7Y3KGLK4IEs1F8p/evdb95Zpjf978rd/+eH788zntbjbviedNdr/B/n9UVnTcfDc6O727HkvFkzonkXMUDWdj9/Z3V7CvfLYfIu7nK7PPMB021OUOxALJgm7Rq0f9dnwTUFltastCwKh9HvIk8Mgh7AojeDpWeBSNby1f68poP9y2jMRv9hQtw3uZNNGqCQvoER8aTBza1kwuLk/ceJFd3ysUJhAfoezcuLd5/yCY2TGPjdt7z+GjvRHVxVeP0g/39o80tIxNo8QiLkXTgMq4MGxZQPQ3v8tEc5sJrQM32AOXetTtF/sViiY+XzHW3+vqO3PgWXzzx58aze0KWnWd7ERrW8+tGQxQm1G1FXFabz9wTkcSqduOwJnzA5UMEROu5rBqYBpvcECdss198+TJ189fHFW0yiRNUrFSzK+XS5uBjsHrJvtqMeJ/lIoFU8XWtl4BR0E8VAvqpRIlq0LU36f65edff//tDR7YlMuaG99pqpOcUMhO1dWcBE53Dpy/MvD06dNP9h6cau6Qihp5HFmtuLG25oRUfJxCZhkMU2/fvv3r73/UqtGz77bJJUqxQFlbc5LHUQBXxy0MJvfcmQtHjhyllrGFvHpaOUfIUxC15bXNTIawq/MqAb9+/ZNC1iQRHati10pESrGwoZIpAbo1t5iVVcTegiBUXg7TqJUQRGGzquukTYS4SHiUuHn18mU4lOCy5I3KVh5XKuApmAwBA+YBV24YWVweBIJkMplEIoMgiShUXgqLBA011cfEQiW1nG1bRAf7NExY1NLcIRIoykqZlBIancoFekdNiuPNIEB8GwgCSeVUuKXjMofLh6kcYVU9gybsaO/O54pVHBmLIYKpfAoZLqXAEFRCnEDniPby8GjXkMYwi9yaQYf0d7TYGq+6hgSUEFHRy6raznbjgXVKCcyg8+k0HqWEDkGEQaiETP0XWzC2l0idyccAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"신지로\"\n        title=\"\"\n        src=\"/static/15f05532cdf1a2606c476f7256f4a8e0/3684f/image-6.png\"\n        srcset=\"/static/15f05532cdf1a2606c476f7256f4a8e0/c26ae/image-6.png 158w,\n/static/15f05532cdf1a2606c476f7256f4a8e0/3684f/image-6.png 225w\"\n        sizes=\"(max-width: 225px) 100vw, 225px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"deadlock-avoidance\" style=\"position:relative;\"><a href=\"#deadlock-avoidance\" aria-label=\"deadlock avoidance permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deadlock Avoidance</h2>\n<p>이번에는 따로 규칙을 두지는 않고, 자원 할당 전에 <strong>데드락 가능성을 판단</strong>하고 수행하도록 해봅시다.<br>\n자원 할당을 해주면 데드락이 발생할 것 같을 때, 프로세스의 요청을 거절하고 block상태로 대기하도록 하는 방법입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 177px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/afeed013f1039c701e78172ba1a0ea18/6e666/image-7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 160.75949367088606%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAgCAIAAACdAM/hAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEkElEQVR42nWV10tcWxjF5//xxRcJoiLYEUGwd8UuVlTE3sGOBXs3Yi+xYom9xhI7YsFeosZeY7ne+5s5QxxN7n4Y9jmz1/7WWl85on//f72+vv4jWWxk37+8vMzPzy8vL4v+xAiADy9vbm4mJyerqqpCQkI0NDSUlZXr6+tFfw0obO7v71dWVjo6OmJiYgwMDLS0tJKSksrKyqKjo+3t7b9//y76E7mwsNDc3JyYmOjk5GRiYmJmZmZhYZGbm3txccG/z8/PHNvf39/c3BR9CHh8fKypqamrq2toaKioqCgvL6+url5QUHB1dcWla2tr29vbR0dHPyVLJCuVX4RBCYyOjo6/v7+cnJynpyeAjY0NdAYEBHz+/Hlubg4WhPkIbmtr8/HxUVNTc3d3J7iSkhLGPD4+np6eZmVl5eXllZaWwhkiJycn7zSjJz8/Pzg42MPDIzAw0M3NzcjIKCoqqqKioqamBqtRnp6eTvCWlpbz83ORrGCuDwsLw1uQLi4ufn5+MMet0NBQbkS8paWlra0t+5SUlMvLS5EsZ8QEBQWBgbmDgwO/XOTl5TU0NITm2trawcHB4eHh0dHR9vZ2SuUduLW1Fbe8vb0Ja2Vl5evrGxkZCYuSkpLr62shT2A4eXh4+OvXr3eakZeRkVFUVIRUc3NzIjs6OnIdXJqamg4ODnZ3dykbNCPn6elJJCsYZFdXl42NjYFkkW3UpqamcjQ2NjY8PNzZ2RkX7ezs4uLiQIl+c15cXCQUQbS1tfX19UlSfHz8jx8/OIdDCMGFhoYGfIZLYWEhkLfIMzMzhOXuT58+qaqqUsCompqa4qirq2tycjI6OUaeOUNGpWBhkcnKykpIGhsbs+fQ3t7exMQE8YuLi/Hyy5cvmIKQiIgI4ovBQlhu7enpaWxsJJPU4/T0NPz19PSwmsKiSVBEzkxNTWkVHkdGRt7AFCrVTzR8SkhIoPSrq6u5BQBtSFfChV9ra2sFBQWMhNEbmAeKHp9I0vr6+u3tLc3c3d1Nhvv7+4kDBdKOl3iOYCaJVDOpp5nIJKWHT9QTJXF3d4eF5BlGvb293EKr8NjX17e0tESRScFnZ2cUXWdnJ1fyB7bRgwTn0q2tLfjzkrkBZ1jgC559+/ZNCsYenORKaoj0kDAmCUOL+DxSBbCghyC/urpKtvGSwSAFcxR5MJmdnSXm+Pj4169fARNcuAIw3U9tZmZmEnxnZ4e7xGC4QQwy2dnZuEINkWrMxzABL1xBLpEjmMwAovLEYN7SOtQ6yFLJupOsa8kS8MyNgYEBdCIBg5gN4MVgCpACoELIZF1dHYMC8tABIBBmI8w99ryHNs7xUgxOS0tTUVEhGfBkmjJo6Gece3h4AEyrjY2NkXmcgwJzC9t4w0VicHl5OWXEWCFVkKFLoZCTk8NR8MwWPiuQFxxCHcOcIUmkt8bgb8xAAs2AsfiJNtiCZHRAgV/2VCG2MS2kYNnvGBsOEZM4MGRiIQQJMMJXaoPIQmqEYSTtZ+GD+OFryIL5mWRRggwAEkk6wAsn//6h+70+fD0Ztyhi6AvD5z9026vdvPDdxAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"거절한다.\"\n        title=\"\"\n        src=\"/static/afeed013f1039c701e78172ba1a0ea18/6e666/image-7.png\"\n        srcset=\"/static/afeed013f1039c701e78172ba1a0ea18/c26ae/image-7.png 158w,\n/static/afeed013f1039c701e78172ba1a0ea18/6e666/image-7.png 177w\"\n        sizes=\"(max-width: 177px) 100vw, 177px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그런데 그러려면 <strong>어떤 프로세스의 요청 상한선</strong>을 기준으로 판단하게 되고<br>\n이는 최대치를 가정하고 작업하는 것이므로, <strong>불필요한 낭비를 하는 경향</strong>이 있을 수 밖에 없긴 합니다<br>\n어떤 사람이 3시간 동안 과제를 할건데, 중간에 프린트를 해야한다고 해서 3시간동안 프린트기를 쭉 점거하고 있으면 매우 낭비겠죠?</p>\n<p>일단 이 Deadlock Avoidance에는 두 가지 종류가 있습니다</p>\n<ul>\n<li><strong>Process Initiation Denial</strong> : 프로세스를 시작할 때, 이 프로세스의 요구치가 데드락을 야기할 것 같으면, 프로세스의 시작을 거부합니다.\n<ul>\n<li>이 경우, 가장 최악의 경우를 상정하는 Not Optimal한 방법입니다</li>\n</ul>\n</li>\n<li><strong>Resource Allocation Denial</strong> : 프로세스가 자원 할당을 요청하면, 이를 받아들인다면 데드락이 발생할 것 같을 경우, 자원 할당 요청을 거부합니다.\n<ul>\n<li><strong>banker's algorithm</strong>이라고도 합니다</li>\n<li>먼저 시스템이 고정된 양의 자원을 가진다고 가정하고, 현재 상태에서 자원 요청을 승인하면 <strong>safe</strong>한지, 아닌지, 를 확인합니다</li>\n<li>이 <strong>safe</strong>상태란, 데드락에 빠지지 않는 sequence가 단 하나라도 존재하는 경우입니다</li>\n</ul>\n</li>\n</ul>\n<p>자원 할당 상태를 행렬이나 벡터 등으로 나타내어 safe상태를 확인해볼 수 있습니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6f049e1b6f058f885ad749cf22ddd666/bce72/image-8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.34177215189873%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQ0lEQVR42k2QWUvDQBCA8/8FpaCooFL0QfC1LwqptYfVtlZbUSm97JE07W6SzWZ3m6vZOAltcRgG5tsZ5mMVKSUTvkWFTQUmzAvCJEkAUra2dzCMNgA3cUxcYTkcIFRoFU+w4je6qOg39QXU7tSBOc5F4WN5mcHzx8nUXAPENr1rLa+qWr6mX9cXiHoKJWahg4+ezLNn67CEGuN02bTIbRPlyuZpzTpQjSHywGZuoHzDypVWxxV0UsWG4ylRGEwwL3/O1PbgtWfYPEgNN1FPs9X2qNwZv/xozE+1157fM3hriJv91ZfmCj9Ukm1IyCCKdOzqFtdNjghLFRy2stmSiCmiwo+yOZkNp6Fkv5PEWUt4UOpMiu+jh9ag+4uB9HV63+irbwNQwy7IJ3EMC9vcX94bwCNISs7YbDanjgNEAtxd+x9/AjmADlQwSrgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"initial state\"\n        title=\"\"\n        src=\"/static/6f049e1b6f058f885ad749cf22ddd666/f058b/image-8.png\"\n        srcset=\"/static/6f049e1b6f058f885ad749cf22ddd666/c26ae/image-8.png 158w,\n/static/6f049e1b6f058f885ad749cf22ddd666/6bdcf/image-8.png 315w,\n/static/6f049e1b6f058f885ad749cf22ddd666/f058b/image-8.png 630w,\n/static/6f049e1b6f058f885ad749cf22ddd666/bce72/image-8.png 633w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>프로세스 P1,P2,P3,P4, 자원 R1,R2,R3에 대해 이러한 상태가 있다고 생각해봅시다.<br>\n각 matrix와 vector들은</p>\n<ul>\n<li><strong>R</strong> (Resource Vector) : 시스템의 전체 자원 수(R1,R2,R3에 대한)</li>\n<li><strong>V</strong> (Available Vector): 시스템에 현재 남아 있는 자원 수</li>\n<li><strong>C</strong> (Claim Matrix) : 각 프로세스들의 최대 자원 요구치\n<ul>\n<li>P1은 <code class=\"language-text\">[3,3,2]</code> : 실행 시작부터 끝까지, R1을 3개, R2를 3개, R3를 2개 요구할 것임</li>\n</ul>\n</li>\n<li><strong>A</strong> (Allocation Matrix) : 각 프로세스가 현재 가지고 있는 자원의 양\n<ul>\n<li>P1은 <code class=\"language-text\">[1,0,0]</code> : 현재 R1을 1개, 나머지는 0개 가지고 있다</li>\n</ul>\n</li>\n<li><strong>C-A</strong> : (전체)-(현재) 자원 양이므로, 각 프로세스가 앞으로 요구할 자원의 양.</li>\n</ul>\n<p>이 각 matrix와 vector들의 의미를 정확히 알아둔 다음, 두 가지 Deadlock Avoidance 기법으로 데드락 가능성을 확인해봅시다</p>\n<h3 id=\"process-initation-denial\" style=\"position:relative;\"><a href=\"#process-initation-denial\" aria-label=\"process initation denial permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Process Initation Denial</h3>\n<p>P1, P2, P3, P4가 모두 시작을 대기하고 있고, 프로세스 번호 오름차순 순서로 확인 후 시작한다고 생각해봅시다.<br>\n그럼 <strong>R</strong> == <strong>V</strong>인 상태로 시작하므로, <code class=\"language-text\">V [9, 3, 6]</code>에서 시작하고, Process Initiation Denial 방법은 <strong>C</strong>를 잘 살피면 됩니다</p>\n<ol>\n<li>P1의 <strong>C</strong>값은 : <code class=\"language-text\">[3,2,2]</code>이므로, <code class=\"language-text\">V [9,3,6]</code> 이내입니다. 할당해주고 나면, <code class=\"language-text\">V [6,1,4]</code>가 됩니다.</li>\n<li>P2의 <strong>C</strong>값은 : <code class=\"language-text\">[6,1,3]</code>이므로, <code class=\"language-text\">V [6,1,4]</code> 이내입니다. 할당해주고 나면, <code class=\"language-text\">V [0,0,1]</code>이 됩니다.</li>\n<li>P3의 <strong>C</strong>값은, <code class=\"language-text\">[3,1,4]</code>인데, <code class=\"language-text\">V [0,0,1]</code>을 초과하므로, 시작할 수 없습니다. (거부)</li>\n</ol>\n<p>이렇게, 자원 요구의 최대치를 기준으로 계산합니다.<br>\n그러나 모든 자원을 한 번에 사용하는 것이 아니므로, 가장 최악의 경우를 상정한 Not Optimal 방법입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 480px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/723213363d1fbc8827b1ccbd7e5cc6ec/e85cb/image-9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.9746835443038%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABqUlEQVR42g2Ry26bQABF+YxWlRo7JuAXTw+egRkGGJiBAQyOwCYmD29SKc0im6z6AVUX3faDi3S2V0e6R7mxU8mKz0vfpNyOjxtSL/3yox9/Pw+PBXdgZEQtkE923KP6WbXJ14WxtIKGpSLAyp3LU591cRZ5BNJKx42XX2Tdv9X5r+tQ1Q3jRyxOVjpY/EEz/YXmqhuEQQBMbxrnJChYEDs2WlnoxopclNEweevvf56PCIWCy4yXohns7KTbkao5S5dOnr2DFA1K1UnUrb/YQBhJRIUDcJPn13M33teSi2Ndn9vqpTtcX55E1YEg09xwtw8pTpTLMKZcuoCgMJW5jENcCnE61F1ZNoKfyuLAUwgQJVFf5Q+N/Pf3z/vr+4+uwyhSOCaSRYdcVIIzGs7VFSHRpMoT1pXFqZYZwfY+WQF2p5ttJsayKZMC7mPDDZUvs7Xl+JRmIUlili8taLrB0FaPXTt2zdjWnFI7LH12/H5rfFtYtzpQ13CugdXWV2b6bmK6cQpg7Ki2hbqxh4gEOEaIQM/3PGzSdrVj84UxWwLd9E07AICsjeA/DgB2vMBaaQEAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"끝나버렸다\"\n        title=\"\"\n        src=\"/static/723213363d1fbc8827b1ccbd7e5cc6ec/e85cb/image-9.png\"\n        srcset=\"/static/723213363d1fbc8827b1ccbd7e5cc6ec/c26ae/image-9.png 158w,\n/static/723213363d1fbc8827b1ccbd7e5cc6ec/6bdcf/image-9.png 315w,\n/static/723213363d1fbc8827b1ccbd7e5cc6ec/e85cb/image-9.png 480w\"\n        sizes=\"(max-width: 480px) 100vw, 480px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"process-allocation-denial\" style=\"position:relative;\"><a href=\"#process-allocation-denial\" aria-label=\"process allocation denial permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Process Allocation Denial</h3>\n<p>프로세스가 자원 할당을 요청하면, 그 요청을 받아들일 경우를 가정하고 진행해봅니다.<br>\n데드락에 빠지지 않고 끝날 수 있는 실행 순서가 단 하나라도 존재하면, <strong>safe</strong>상태인 것으로 간주하고 요청을 받아들입니다.<br>\n그러나 어떤 경우에도 데드락에 빠진다면, <strong>unsafe</strong>상태로 간주하고 요청을 거절합니다.</p>\n<p><strong>Banker's Algorithm</strong>이라고도 하는 이 방법은, 프로세스를 <strong>하나씩 종료</strong>시켜보며 safe/unsafe를 판단합니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/6f049e1b6f058f885ad749cf22ddd666/bce72/image-8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.34177215189873%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAHCAIAAACHqfpvAAAACXBIWXMAAAsTAAALEwEAmpwYAAABQ0lEQVR42k2QWUvDQBCA8/8FpaCooFL0QfC1LwqptYfVtlZbUSm97JE07W6SzWZ3m6vZOAltcRgG5tsZ5mMVKSUTvkWFTQUmzAvCJEkAUra2dzCMNgA3cUxcYTkcIFRoFU+w4je6qOg39QXU7tSBOc5F4WN5mcHzx8nUXAPENr1rLa+qWr6mX9cXiHoKJWahg4+ezLNn67CEGuN02bTIbRPlyuZpzTpQjSHywGZuoHzDypVWxxV0UsWG4ylRGEwwL3/O1PbgtWfYPEgNN1FPs9X2qNwZv/xozE+1157fM3hriJv91ZfmCj9Ukm1IyCCKdOzqFtdNjghLFRy2stmSiCmiwo+yOZkNp6Fkv5PEWUt4UOpMiu+jh9ag+4uB9HV63+irbwNQwy7IJ3EMC9vcX94bwCNISs7YbDanjgNEAtxd+x9/AjmADlQwSrgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"initial state..\"\n        title=\"\"\n        src=\"/static/6f049e1b6f058f885ad749cf22ddd666/f058b/image-8.png\"\n        srcset=\"/static/6f049e1b6f058f885ad749cf22ddd666/c26ae/image-8.png 158w,\n/static/6f049e1b6f058f885ad749cf22ddd666/6bdcf/image-8.png 315w,\n/static/6f049e1b6f058f885ad749cf22ddd666/f058b/image-8.png 630w,\n/static/6f049e1b6f058f885ad749cf22ddd666/bce72/image-8.png 633w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>아까 위에서 봤던 상태도를 다시 가져와봤습니다<br>\n먼저 이 상태가 safe인지 확인해봅시다.<br>\n<strong>C-A</strong> matrix (앞으로 더 요구할 자원 양)에 주목해야 합니다</p>\n<ol>\n<li><code class=\"language-text\">V [0,1,1]</code>인 현 상태에서, <strong>C-A</strong>를 보아하니, 지금의 자원 내에서 종료 가능한 프로세스는 P2밖에 없습니다.</li>\n<li>P2를 종료하면, P2가 가지고 있던 자원의 양(<strong>A</strong> 행렬 중 P2)이 모두 반납되어, <code class=\"language-text\">V [6 2 3]</code>으로 늘어납니다.</li>\n<li>Available Vector <strong>V</strong>가 매우 풍족해졌으므로, <strong>C-A</strong>를 보면 남은 P1, P3, P4 뭐든 종료할 수 있습니다.</li>\n<li>이럴 때는 번호가 작은 P1을 종료합니다. 우리가 반복문 코드 짤 때는 응당 <code class=\"language-text\">i++</code>처럼 짜기 마련이죠</li>\n<li>이제 P1을 종료하면 <code class=\"language-text\">V [7,2,3]</code>이 됩니다.</li>\n<li>이제 P3종료, 또 P4 종료가 가능하므로, <strong>safe</strong>상태임을 알 수 있습니다.</li>\n</ol>\n<p>이제 아래 (a)상태에서, \"P1이 <code class=\"language-text\">[1, 0, 1]</code>의 자원을 요청\"하여, 이를 받아준 경우인 (b)를 생각해봅시다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 511px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f1aa48ac54f017ca6f52891ff2b4c390/92e00/image-10.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 79.74683544303798%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAACbklEQVR42nWSaU/bQBCG/f8/ljOIQunnVkI0UoCQQMnBEQ4lxiThCATnsHfX3sPrM7bTcVJAgnY0WnlevTNez2MlTVMufcIkJGaO9MPpdAqicD3CMwUz6XjBTEykF4Ay0yWXnuJKUVCt1QrarKOVY/PkkYHPd2Xp1l6poG91tFoxDzs2iKHv1u5sKMGZOzahSxGc/VLZco1tNsRilVUfBPik4Hu3bKnGNhpiuc4POhxET4rfXbpYpeun9lLVzqtMCQP/8llsXxo7l8PtK7NreOCLwuC6z380Rvnr8c/GsPki5mJ75BQ0uqviwo111RfKdPY1MML3nCj00ySGSJIknoDmZukKKJJMjOfriCcRGOBZmdVZQhAn2G8ZJQ0VVaOsoUmc9pAsarikmfuqedGz35zzh7dm0NIgSh6G9v0Ad/rmk0FjAOGFXZ10X9DdgGDhv7W9N/8z4NLINBi14ML/8yhAjzB3gJ0hEToWTGbjkzQBkjriOmI6EpYzf2fKHH+ABTjhJNxTpMN3NbpWs7bOrFyVnPayxXquU+7QXI18P7dyNeuoy+fwa/d0rW5tnRI4dzWmODPOS1W2cc4XKvSdswZI2dczDrSLr5yPuvRLha6f0IWKvdOiShD4TV0UmsZec1RomY9oxjkIVJ3nr0aw9vz1SBvOOYd3hoQblW9xqW21Bn85Z+uBwVHgA1KI7Igyzr7reIJNJmEmxpPPnNN3ziLYaxkw+OAGwRnFyYwzKbdx8QZd9Giaph85v0YaTpLHkd3to/bT+Glsw0/F3aDzYrafx4DacsKPqD7UMJnaFiSjNsaEYGwRDMClIz5z/gPZ4nBmvUSlMAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"할당해주면..\"\n        title=\"\"\n        src=\"/static/f1aa48ac54f017ca6f52891ff2b4c390/92e00/image-10.png\"\n        srcset=\"/static/f1aa48ac54f017ca6f52891ff2b4c390/c26ae/image-10.png 158w,\n/static/f1aa48ac54f017ca6f52891ff2b4c390/6bdcf/image-10.png 315w,\n/static/f1aa48ac54f017ca6f52891ff2b4c390/92e00/image-10.png 511w\"\n        sizes=\"(max-width: 511px) 100vw, 511px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이 경우 현재 <code class=\"language-text\">V [0, 1, 1]</code> 내에서 감당 가능한 <strong>C-A</strong> 양을 갖는 프로세스가 단 하나도 없으므로, 자원을 더 이상 할당해줄 수 없습니다<br>\n즉 <strong>unsafe</strong>한 상태가 되어버렸습니다..<br>\n따라서 P1의 요구를 거절하고, P1의 요청을 받아들여도 괜찮을 때까지 block시킵니다.</p>\n<p>그런데 다만, safe한 순서를 발견했다고 해서 그 순서를 따라가는 것이 아닙니다<br>\n그저 \"가능한 세계선이 존재한다\" 뿐이죠<br>\n따라서 매 할당마다 unsafe/safe 여부를 확인해야만 합니다</p>\n<p>아무튼, 이 과정을 코드 로직으로 나타내보면 아래와 같이 나타내볼 수 있겠습니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 184px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/78f50760d98a50e1691d03ab3b7d064b/5a64f/image-11.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 94.30379746835443%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAIAAAAf7rriAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEbUlEQVR42i2S2VNTVxzH77/Rlz70vdOptdNpO1OGKgMFFFzCIsogwQqoRFAWWUIshCRoNgkJN9sNyU1uFhJIIhCJRog6KYhssgmyBEiALPcm9+YC9sUepz3zmfNyzufM7/f9HUgqlyjU8j6tQo3AOr0GxfTWAczpso963GPPR33+F76pwMza8nZoN3QY2Y/GDuN4FMej8dhhNAIpVL0qBEZQLdDMVuOgc8BmN5vNBuC7nw7Ozk8vra2uBjcP47EokQAQVIpMpUiKTJIkpNHCBlRntWEOp83tcXnGnhoMiE6rMhn7bVaT7+Wzvf29GB5PUmQiRRMURaao1BGdolMUnYIwq8nhsg97nB6fZzzgHxi0oihiMaNGVAd8u92yvvEB3AMCdUQTJIknk0SSxEkymiAg59jI6ITXF/C/mZ3cCG76X0+IRXytpk8Jy4FvNOqWVxfo4yPgJ5KJGIF/KT5O7OP4fiwOvZr+e2phdn59dXNvh0pRyyvvuTx27d2bAsFDk0mHYUi/Hl5cmkuQSRASqJ9IJhIkRSQBJLQTCoUPD3bDoUgsuhvac7od8j7h7dvlNTXMsrLLEgmXz297Exinj2ngg85BzxQN1jFJ0RB4CU8Qof1wKBxyue33Gu6IhF1NTSxu5wN+R5NE9NfU1MR28OPxp+P/ozqiExQVSyR3IxEoEo+FD8Jbwe3pd28H7JhIwuNwGhsbb7c0s4Td7e3sWrvDsLQyd/LPydGnE5DWYTQajkTAtCM4AS2uf5hbfr+ytjzmfWaxGHpkjx801124mFVaeqmhoZrzsM7lxqQ9fL/fs76xsrEbBNOiTz7hJPVFDszPrO9szS/M2AbMBhRpab1f38g6/ev3X3/zVcm1i0IhRwGL2jj3bQNag17uGx9ZXJ2bW57HKSpJ09Duwf7WThBWSpuaWR1dbcyKqx2dray6ql/Sfvzup28zc3+vravUIFKLTTs0hI55HSXljB/OnmZUXHk9GYDmFmaulTE0GqlSJVbAwrb2Ojbnfvejh1x+G7PyWvmNYhgWGgwKoxH2vXCqdbJTaafutdeJYKHWoIEQvfo6k6HXy+WKx0MuzGzVqDQSobhTLOGKxNwnT7rAkQlTORz6lz5Xc2tt+h9p7hH75JR/dW0JmnwbeO4F/1nZI+OLJQKrDTWg6t7eRzJZN9jV6h4M05owBDVqUJOqjFl8gZGjUkmHRxwL72ehaOzgld+r1fQolaJy5tWW1nqJlC+R8npkAkTXq1bLQP7/we1qzb+cnZmT3qt4bDIjXu8QtLn9cXR0UCxgKxWCgqK8wqIL9fV32Jx6fjcbwOWyu3jsLj6HzW6ormZm55z5s6qsk9eiVIthBQ9anH/3emJMDYsQrbTwyvnM7PTyipIbN0vv1lYCqm8xWXcrq26Vl5YVFRblp5/5GbPoHUMWVm1FN68BGrT2a2Exp7mmm9dyq+Z6RtZvBcX5BYV5DMb5S5dzc89l5OVnZZ87m3M+A3AuL2N4eOjz5886XR+zNPdfbU7x63F3uisAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"띵킹\"\n        title=\"\"\n        src=\"/static/78f50760d98a50e1691d03ab3b7d064b/5a64f/image-11.png\"\n        srcset=\"/static/78f50760d98a50e1691d03ab3b7d064b/c26ae/image-11.png 158w,\n/static/78f50760d98a50e1691d03ab3b7d064b/5a64f/image-11.png 184w\"\n        sizes=\"(max-width: 184px) 100vw, 184px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>일단 아래와 같이 각 행렬과 벡터들을 정의하고</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">struct</span> <span class=\"token class-name\">state</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//m개 자원, n개 프로세스</span>\n\t<span class=\"token keyword\">int</span> resource<span class=\"token punctuation\">[</span>m<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//시스템의 전체 자원의 양인 리소스 벡터</span>\n\t<span class=\"token keyword\">int</span> available<span class=\"token punctuation\">[</span>m<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//시스템의 현재 가능한 자원의 양인 avilable 벡터</span>\n\t<span class=\"token keyword\">int</span> claim<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>m<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//프로세서가 요구하는 자원 최대치인 claim matrix</span>\n\t<span class=\"token keyword\">int</span> alloc<span class=\"token punctuation\">[</span>n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">[</span>m<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//프로세서가 현재 할당받은 자원의 양인 alloc matrix</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>resource allocation algorithm을 아래와 같이 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>alloc<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span> <span class=\"token operator\">*</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> request<span class=\"token punctuation\">[</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> claim <span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token operator\">&lt;</span> error <span class=\"token operator\">></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//할당받은 양 + 요청할 양 > claim이면? 거짓말쳤네?</span>\n<span class=\"token keyword\">else</span> <span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>request<span class=\"token punctuation\">[</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">></span> available<span class=\"token punctuation\">[</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span>\n\t<span class=\"token operator\">&lt;</span> suspend process <span class=\"token operator\">></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//request(C-A)가 가용한도보다 적으면</span>\n<span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token operator\">&lt;</span> define newstate by <span class=\"token operator\">:</span> <span class=\"token comment\">//이제, 자원 할당을 가정한 새로운 상태를 정의함 :</span>\n\t\talloc<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> alloc<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">,</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">+</span> request<span class=\"token punctuation\">[</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//alloc[i]에 할당한 만큼 더하고</span>\n\t\tavailable<span class=\"token punctuation\">[</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> available<span class=\"token punctuation\">[</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> request<span class=\"token punctuation\">[</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//현재 양에서 할당한 만큼 뺌</span>\n\t<span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">safe</span><span class=\"token punctuation\">(</span>newstate<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">&lt;</span> carry out allocation <span class=\"token operator\">></span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//safe하면 할당 진행</span>\n<span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token operator\">&lt;</span> restore original state <span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n\t<span class=\"token operator\">&lt;</span> suspend process <span class=\"token operator\">></span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol>\n<li>만약 <strong>A</strong>(현재 할당량) + 요청량 > <strong>C</strong>(최대 요청량) 면, 사실 말이 안되는 상황이죠? 지금까지의 계산이 모두 잘못되었을 가능성이 큽니다(error).</li>\n<li>request하는 양보다 avilable한 양(<strong>V</strong>)이 벌써 작다면, 줄 수조차 없겠죠?(suspend)</li>\n<li>이제, 자원 할당 요청을 받아들인 상황을 가정하여, 새로이 상태를 정의합니다\n<ol>\n<li>allocation matrix <strong>A</strong>를 업데이트</li>\n<li>available vector <strong>V</strong>를 업데이트</li>\n</ol>\n</li>\n<li>그 상태가 safe한지 판단하고, safe하면 할당을 진행</li>\n<li>unsafe하면, 직전 상태로 복귀하고, 프로세스를 suspend</li>\n</ol>\n<p>safe한 상태인지를 판별하는 것은 아래와 같이 합니다:</p>\n<div class=\"gatsby-highlight\" data-language=\"cpp\"><pre class=\"language-cpp\"><code class=\"language-cpp\"><span class=\"token keyword\">bool</span> <span class=\"token function\">safe</span> <span class=\"token punctuation\">(</span>state S<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">int</span> currentavail<span class=\"token punctuation\">[</span>m<span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\tprocess rest<span class=\"token punctuation\">[</span><span class=\"token operator\">&lt;</span>number of process<span class=\"token operator\">></span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\n\tcurrentavail <span class=\"token operator\">=</span> available<span class=\"token punctuation\">;</span> <span class=\"token comment\">//변화시킬 available 벡터</span>\n\trest <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span>all processes<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//하나씩 종료시킬건데, 남은 프로세스들</span>\n\tpossible <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>possible<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token operator\">&lt;</span>find a process Pk in rest such that <span class=\"token operator\">:</span>\n\t\t\tclaim<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">,</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">-</span> alloc<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">,</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">&lt;=</span> currentavail<span class=\"token punctuation\">;</span>\n\t\t<span class=\"token operator\">></span>  <span class=\"token comment\">//남은 애들 중 하나인 Pk가 C-A가 currentavail 내에서 감당 가능?</span>\n\t\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>found<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//true : Pk에게 자원 줬다고 보고, 계속 진행</span>\n\t\t\tcurrentavail <span class=\"token operator\">=</span> currentavail <span class=\"token operator\">+</span> alloc<span class=\"token punctuation\">[</span>k<span class=\"token punctuation\">,</span><span class=\"token operator\">*</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span>\n\t\t\trest <span class=\"token operator\">=</span> rest<span class=\"token operator\">-</span><span class=\"token punctuation\">{</span>Pk<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token punctuation\">}</span>\n\t\t<span class=\"token keyword\">else</span> possible <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//false : currentavail 내에서 감당 가능한 C-A가  없으므로, unsafe함</span>\n\t<span class=\"token punctuation\">}</span>\n\t<span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>rest <span class=\"token operator\">==</span> null<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ol>\n<li>먼저 available vector를 복사하여 <code class=\"language-text\">currentavail</code>를 만들어 요놈을 업데이트하기로 하고, <code class=\"language-text\">rest</code>에는 종료되지 않고 남은 프로세스들을 넣습니다</li>\n<li>이제 <code class=\"language-text\">while</code>문을 계속 돌며, <strong>C-A</strong>가 <code class=\"language-text\">currentavail</code> 이하인 프로세스 <code class=\"language-text\">Pk</code>를 찾습니다\n<ol>\n<li>찾았다면 <code class=\"language-text\">currentavail</code>을 업데이트하고, <code class=\"language-text\">Pk</code>를 종료시켜 <code class=\"language-text\">rest</code>를 업데이트합니다</li>\n<li>찾지 못했다면, <code class=\"language-text\">possible</code>을 <code class=\"language-text\">false</code>로 세팅하여 반복문을 끝내게 합니다.</li>\n</ol>\n</li>\n<li>이제 반복문이 끝나면, <code class=\"language-text\">rest</code>에 프로세스가 남아있으면 unsafe, 없다면 safe입니다</li>\n</ol>\n<p>이렇게 해서 Deadlock Avoidance에 대해 알아보았지만<br>\n위에서도 계속 언급했듯이,<br>\n자원 요구 최대치를 미리 알고, 최악의 경우를 상정하여 대비한다는 점이 문제입니다.<br>\n너무 <strong>소극적, 보수적</strong>으로 시스템을 운용하는 셈이고<br>\n또한 시스템 내 자원의 양이 <strong>고정되어있음을 가정</strong>했는데<br>\n사실 <code class=\"language-text\">semaphore</code>같은 경우만 해도, 프로세스들이 막 만들고 없앨 수 있어 변동이 존재할 수 밖에 없습니다..</p>\n<h2 id=\"deadlock-detection\" style=\"position:relative;\"><a href=\"#deadlock-detection\" aria-label=\"deadlock detection permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Deadlock Detection</h2>\n<p>Deadlock Avoidance가 너무 보수적으로 자원을 운용한 것에 반해<br>\nDeadlock Detection은 꽤나 적극적으로 자원을 운용하는 방법입니다</p>\n<ul>\n<li>자원 할당 요청이 들어오면, \"일단 줘\"를 시전합니다</li>\n<li>이제 정기적으로 데드락 여부를 체크하도록 합니다.</li>\n<li>데드락이란 초기에 두 프로세스에서 시작하여 셋, 넷, ..으로 번지기 마련이므로, 초기 진압을 목적으로 합니다.</li>\n</ul>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 225px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/86051c79bf9175eb478c1f7df7f54ee2/3684f/image-12.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEi0lEQVR42h2S2W8TVxTGpyrqAnbtjMdjz+LZx7N4vMRJiAgoQYUgUSEhitRFfanSQiXaRkBVpKYB1ICAsMQFJYQQ0mRsB9shCY1pPN53Bzcmu6BVqwpBH/pvdOA+nIer+53fd757AFsTRlOyy9uh+HZ7296X5VaakRRPG0FyNoxpgnDITsIIRTh4ihIpWgRh3GS2m8ywwQgCDpynadnb3KV4d4tKu+Jul10tbm+Hg+BghDRbEBBCmyx2BGP1G5IWSFqEIAyCUAiyAyjGcpy7bWe3v3WfpOxUvO08LztFv/4Od9AwQljtDqsNh2wEhjMoTnO8YkMIC4xa7QRggVCSFGSl3ePb4/LsEmU/S/Oi5JNFD0MxdhsOgghosVsgBLETBMFRjOAgOdTBWhEKAEGUYVw6qrPrsKftgK+tWxIUxbPLpbQRGElhFKY3x0kMxyEYpUmWZkSWFXWk0WwDduyA9JkFoblj90HBtcfT3CXpTN6rWyBxBkfQ90wQijhA0ApaYIqkKcrJOb0mEH3rHRNgMFgpUnTyPl9Ll8/fKUp+WWnlRT9D8xLDH/lgH+YgfW7ZJYjGJpuTcXK6T+9OnBDefcesky04xtGU5Gvp9DbvFcVWUXDzTjeOkQe7u2PB0eVqZiJwmeOlJpggqFdiWfJSrAJaccBkgl+LheaWvf7W/TTjkiQfy8gYzo5P3KvXcmv17Hxw1GCGtpsgBy07eZfolCjeY9MD27bNiCAURbFud6s+MEE6RacLQ5jDH340qY4ltEfL1UJf7zGjyWIwWQ1Gq56OLLpZXqFpBjAarQjKIjhvh1HYTqEog9scBONSw+F7E3cGrwx8f7JX5gUzCFthzNwE86JPUlo4VvDIEjA0dPPG0K0rg4HvTp85evTjQ4eO7Ono7Dl+IpPPRmJBbXbqzNfH3njz7e0Gy3YjCOrLiVOc1MwxvCgIwPz8w3B4OplK5wulSqVSrzeWlxuNJytzcw+Dwam5yOTYzaFPP/mMl7x62gazhaYY1um121ASJ4C1tbVkMhmLxaYmp0KhUDqdaTRWnv3x98t///vzr+e1+qqW1EqFfCgYOn/+Qs8XX+3bf+Dbk6dPnT7V83kPsLGxUX99tMVEUJ2ang7rRsJhtVIuvHzxz8sXzzMZLZ/PxaLT0ej9QrEcCNzq6+sPBH4ulyvA+vp6qVR8/HipVqsVCvlsNrOwEA+H1PFx9eQPE3cnF5OJR5ubm+VKUQ3+Ui6XU6lkJBI9d/anEyd6dfFGpVKuVsu1WqVarVYq1dXVtdWV3y9cUr/8ZvTS1UgwvLC62tja2kgk4jqjVCppmhaPx69fvwbkshlNW0ynkzo1l8sUi3ld/OzpViJV7xv47Xhv6EYglFiMp5Larw/nlpaquoulJb1FMb4wD4zdHRsZGRkeHr59e+T26PD4+NhMbGZ+dn4mFgncmhq4PHk/ElPVSVWdGLx8MTB0bXb2wYOZaDabKhZywObW07X1rZW19eUnDd1zLpdPZdLZfF7T9E9YzKQT0WhEDapjd+9cHbxy7mz/ubM/vqr9/RcvDvwPMAK8lS6IZTgAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"강아지 CCTV\"\n        title=\"\"\n        src=\"/static/86051c79bf9175eb478c1f7df7f54ee2/3684f/image-12.png\"\n        srcset=\"/static/86051c79bf9175eb478c1f7df7f54ee2/c26ae/image-12.png 158w,\n/static/86051c79bf9175eb478c1f7df7f54ee2/3684f/image-12.png 225w\"\n        sizes=\"(max-width: 225px) 100vw, 225px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>위에서 살펴봤던 자원 할당 상태도와 비슷하게 해서, Common Detection Algorithm에 대해 알아봅시다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/44e618decefcbc4a52bb83143c04e7c4/3996e/image-13.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 37.9746835443038%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAICAIAAAB2/0i6AAAACXBIWXMAAAsTAAALEwEAmpwYAAABk0lEQVR42jVR227TQBD1/78hBRCUPiKBokKURn1qK1LTkCDXCU1JKxwnzaVe22vvrteXvfjWSVFHZ2fnHM3MWWmNosgJIZRRxhilNMvytm2VkoTEQJMERMY5r+s6JvTQlEDwKIqVUoZ5H3TtuDeLvtnBl9++9cjbWs3XYfcmAvH7FHet8GKBfSZ7tn86J6e3cX8antihE+bGwEbvR/TTmBxd484w/OFkbSl+PYBIjsf0aBS9M/FXKxKqilJ5v0bONnR2AaKF0LXRt57emvHHa/zBDN5covMH1lbSvNt1rvCLGHaGweexr8uqKlWpZKXlodCiaWpjtmH9WXD2JxjYXu/GW6CirculR/tTfzD1AD1rP3YZSeXPv95kGU+caOLg4QI9kdyABSlnKU8ynuRZ2r4G1CDmKYerrSsuqpHLzufoYo4u79DVP+YxZTSv3WVZKq2lUkIIKaV+oQK40kVRaAVvFnmaFBkXeVZpBSMGHDCHDP/guiuEEMZ4v98vl67nofX60V2ttrvdZrMFgMF/p6Y54Ble164EWFmQZQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Request matrix\"\n        title=\"\"\n        src=\"/static/44e618decefcbc4a52bb83143c04e7c4/f058b/image-13.png\"\n        srcset=\"/static/44e618decefcbc4a52bb83143c04e7c4/c26ae/image-13.png 158w,\n/static/44e618decefcbc4a52bb83143c04e7c4/6bdcf/image-13.png 315w,\n/static/44e618decefcbc4a52bb83143c04e7c4/f058b/image-13.png 630w,\n/static/44e618decefcbc4a52bb83143c04e7c4/3996e/image-13.png 648w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>조금 달라진 점은, Claim Matrix <strong>C</strong> 대신, <strong>Request Matrix Q</strong>를 사용합니다.<br>\n이 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><msub><mi>Q</mi><mrow><mi>i</mi><mi>j</mi></mrow></msub></mrow><annotation encoding=\"application/x-tex\">Q_{ij}</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.9694em;vertical-align:-0.2861em;\"></span><span class=\"mord\"><span class=\"mord mathnormal\">Q</span><span class=\"msupsub\"><span class=\"vlist-t vlist-t2\"><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.3117em;\"><span style=\"top:-2.55em;margin-left:0em;margin-right:0.05em;\"><span class=\"pstrut\" style=\"height:2.7em;\"></span><span class=\"sizing reset-size6 size3 mtight\"><span class=\"mord mtight\"><span class=\"mord mathnormal mtight\" style=\"margin-right:0.05724em;\">ij</span></span></span></span></span><span class=\"vlist-s\">​</span></span><span class=\"vlist-r\"><span class=\"vlist\" style=\"height:0.2861em;\"><span></span></span></span></span></span></span></span></span></span></span>는, <em>프로세스 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>가 자원 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>j</mi></mrow><annotation encoding=\"application/x-tex\">j</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.854em;vertical-align:-0.1944em;\"></span><span class=\"mord mathnormal\" style=\"margin-right:0.05724em;\">j</span></span></span></span></span>를 요청한 뒤, 아직 요청이 받아들여지지 않은 자원의 양</em>입니다.<br>\nOS는 여러 사정으로 인해 자원 할당을 지연시킬 수도 있지만, 이게 실제로 <strong>데드락이 발생</strong>하여 무한히 기다리고 있는 상태일 수도 있습니다.<br>\n이 대기 상태의 원인이 데드락인지, 아닌지를 가려보자 하는 방법론입니다</p>\n<p>Common Detection Algorithm은, \"확실히 데드락이 아닌 프로세스에 <strong>Mark</strong>\"합니다</p>\n<ol>\n<li>allocation matrix가 전부 0인 프로세스는 바로 <strong>mark</strong>해줍시다.\n<ul>\n<li>hold-and-wait 조건 생각 나시나요? hold하는 자원이 없으면 데드락 조건에 부합하지 않습니다.</li>\n</ul>\n</li>\n<li>이제, available vector를 카피한 <strong>W</strong> vector를 만들어서 이를 이용해 available을 시뮬레이션합시다.\n<ol>\n<li>mark되지 않은 프로세스들 중, <strong>W</strong>값보다 <strong>Q</strong>값이 작거나 같은, 즉 대기중인 자원 요청을 즉시 받아들여 할당해줄 수 있는 프로세스를 찾아봅니다.</li>\n<li>P3이 가능하므로, 이 P3 또한 <strong>mark</strong>합니다.</li>\n<li>mark한 프로세스 P3이 종료되어 자원을 반납한다고 생각하고, <strong>W</strong>를 업데이트합니다. (<code class=\"language-text\">W:[0,0,0,0,1] -> W:[0,0,0,1,1]</code>)</li>\n<li>위 과정을 계속 반복할 것인데, 지금 <code class=\"language-text\">W:[0,0,0,1,1]</code>상태에서 <strong>mark</strong>할 프로세스가 더이상 존재하지 않습니다.</li>\n<li>따라서 P1, P2가 데드락인 것 같네요. 조치를 취해야 하겠습니다</li>\n</ol>\n</li>\n</ol>\n<p>이를 <strong>resource allocation graph</strong>로 그려보면, 다음과 같습니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8cd901e1b56ecc3ee836bf50fed49b68/442cb/image-14.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 92.40506329113923%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAASCAYAAABb0P4QAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACa0lEQVR42oVU2W7bMBDU//9G0ZcCCVIgPT6h6EMe0qAFCsSWj9q6LIm6SZGa7q4sQU7chgBtkrOanT1ID2+Mvu8RBAHCMJT1Nfx4PIqNtRbeW4RN02Cz2cD3fVm/HFprwdiG195Ah9NcDucGMejJa1mWKKtK1GhjYJ2b7eu6xoEU1nWDYRiuKRwwWCOTLM5hGXLgzjDhPeM9BjpTKochx86OuFdTWrYF4NMs2x6q0VjlFhva0xadBZ5Ti3Vm0drxjDFfDThEKZK8lPWK8IYwL6C0fPUt7tcOQWVxagd8Wjl8pn3SQua0j8k2pv0X3+Hudws/yhHWDvfPVvCQcI9/bh9jvP/+B0FhoMjL7VOOm8cTMg2kNG9+pLj7qWQdktMPDyHefdsiKg2SjvCnDB9/FUgI93pKkx/mOOQNkjRH1XYIC41dUtBaQ/eOlCiE9HFrLFJVIlQt4tqi7gwaTW2jOiSNg6E0SlHKsph7jKumspMUh9skikJJvqMinE4JDFWZMceFGcZC9EbPJRXCjqo09Rg3J7eIUkpmHMfksEKeK7RtS7ODIefDuQP4X2szNcRIyP1WFIUcsILRiMLe7eR8v98TYS6tw6RzC51vCou4UMgE/MFE5KS/FLquk2uVJAmFe0JFyhljm2mwgOWVnBs7y7IZ5DzynieT8jkrjaJIbg0rmlRNEb0i5A/YMxPwh6xoLADmXHG4h8NBHE1hL9VeELIqJtput/KyLPM0ES5fF84vky2dXhCyounVWIbwknTCuFBsz8/WqxyyEXtdrVaSo/+NpVJ2vl6vL8L2lu8a5/HaI/ovYq46p2oZ8l8TR3UEZBsFNAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"Resource Allocation Graph 3\"\n        title=\"\"\n        src=\"/static/8cd901e1b56ecc3ee836bf50fed49b68/f058b/image-14.png\"\n        srcset=\"/static/8cd901e1b56ecc3ee836bf50fed49b68/c26ae/image-14.png 158w,\n/static/8cd901e1b56ecc3ee836bf50fed49b68/6bdcf/image-14.png 315w,\n/static/8cd901e1b56ecc3ee836bf50fed49b68/f058b/image-14.png 630w,\n/static/8cd901e1b56ecc3ee836bf50fed49b68/442cb/image-14.png 752w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>검은 색 화살표는 할당(hold), 회색 화살표는 요청(request)입니다.\nP1과 P2 사이에 <code class=\"language-text\">r1->h3->r3->h4</code>와 같은 <strong>circular wait</strong>이 발생했고, 데드락에 빠졌음을 알 수 있습니다.</p>\n<h3 id=\"데드락-발생-시-조치\" style=\"position:relative;\"><a href=\"#%EB%8D%B0%EB%93%9C%EB%9D%BD-%EB%B0%9C%EC%83%9D-%EC%8B%9C-%EC%A1%B0%EC%B9%98\" aria-label=\"데드락 발생 시 조치 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>데드락 발생 시 조치</h3>\n<p>그럼 데드락이 감지되었다면, 어떻게 조치할 수 있나요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 360px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e84cd77edb5853efb43acfcfc198d7ef/f21e7/image-15.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 68.35443037974683%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAA7DAAAOwwHHb6hkAAAClklEQVR42kVTx3biQBDk//9oo9fGgA0IECJnhNJolHA4l6tGu28PPGCmpyt0defjlqD0N6iWOzSnKz7zEjV/l8Ea1WqH99TgPUxQL7as2eJ+CvFpCzS7E5rDGfX2iI/E4O0a4b47o1Ot90iehshHcxhvDstHyZ8Bki7PxjybLpHPljCDCcxwhpz/7XwDM/JhJgEs/7vv+Qp2skCnJJu0N0Rzi1Gyubv0+Am2aIiaPQ9h2DjneXW8sob1BHNN/RWqwwXpywQ5yRT+Gp23OENF+vHPZ6TPY6IEaC435PO1K7RkZym/pOSk++qYi00TxjBPr4gfegT0UR8vqPeUXK4OSHpjV1huDkQKyFLyxZLe8iwhUE6JuhN4PiHIYoP08QXWX6Kk1yktKaiWHh4ds0IsaLAYGXphKcc1JGo28GDZUOwlUb4WvJMNlk3UKGVNtTmyIZsU9K7anxxLM6Lxs1XrHyWLqQDrc0ipa0Tfu62HZNaEt3ZwekMPqx0b1tszooc+YvqT8nF9YaPeCNHvAc+GqC5hy6A7ol99N7T6ekPGJhm9yzj56nh2NRpeRzRFt1ztnYyCsTFsKM+q9aGVRcZiUPJOdXZGS6YLNzh5nE8DZ1HBTxub/pgoFxScZO79Ly4ZXMM75VOTlMcFh5F0X5znGet0JkLWxYYN71HitEffHjnNYRsBbowQEzHVkMgg57kCnxFAXt6vMWK+iX/1GC+PNoSomYCOZEQP3AyiNDJeDehFRskFJStfGpYbkDLKBRCIGxBj82+gKaMntR3tolZKWVJRzgzqgYC0ZjrPBn8DTonKnwAV9ILblGvl+M68Tt1eu4bKkkKdUqL1/HbNKFusHeO+5zxWw+jHk/NMYIqSYb0Za6cDF5svPeHl2YjUMX0AAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"우뜨캐\"\n        title=\"\"\n        src=\"/static/e84cd77edb5853efb43acfcfc198d7ef/f21e7/image-15.png\"\n        srcset=\"/static/e84cd77edb5853efb43acfcfc198d7ef/c26ae/image-15.png 158w,\n/static/e84cd77edb5853efb43acfcfc198d7ef/6bdcf/image-15.png 315w,\n/static/e84cd77edb5853efb43acfcfc198d7ef/f21e7/image-15.png 360w\"\n        sizes=\"(max-width: 360px) 100vw, 360px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<ol>\n<li>데드락에 걸린 모든 프로세스를 중단(<strong>abort</strong>)해버립니다. : 무식하게</li>\n<li><strong>backup</strong>포인트를 뒀다가 그 포인트에서부터 다시 시작합니다. : 처음부터 시작하기엔 아까우니까요</li>\n<li>데드락이 <strong>풀릴 때까지 프로세스를 종료</strong>시켜봅니다. : 적당히 circular wait 사이클이 끊어질 때까지 종료시켜보면 되겠죠?</li>\n<li>데드락이 <strong>풀릴 때까지 자원을 preempt</strong>(빼앗기)해봅니다. : 데드락 발생 4가지 조건 중 No Preemption 조건을 깨는 셈.</li>\n</ol>\n<p>Deadlock avoidance로 데드락을 막을 때는, 자원 할당을 할 때마다 알고리즘을 수행하려면 부담이 너무 큽니다..<br>\n그런데 이렇게 Deadlock Detection 방법은 resource graph만 유지하면<br>\n쉽게 둘 or 세 프로세스 사이의 사이클을 감지하여 조치할 수 있어서 아주 굿입니다</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 259px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/55fd3fdfbabc263e71a0c4e316c97b8e/a2ead/image-16.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 74.68354430379746%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAIAAABr+ngCAAAACXBIWXMAAAsTAAALEwEAmpwYAAADWklEQVR42iWQaVMaBxiA94d12n7JpJOx1rSxJc7YGXVMJcnAVMtMUQxVcLn3AvaSdS9EPPDgEDmEhQU3GBMdkRsUQ6ptMv0P3aYzz4fny/O+77yAYXHJ6vGBMG5DCDtK21HS4aOdftqF0xDFIhSHUSxGs94A78GZ7XjKbHdopqYmdbo58yLwCnRZnNiyE112YRaP7/MgwoYSdi/lwQMwyWA05wvwPkaEyTU0wP6sfamZntYaDPqFeWDFg4Ievw0mQAi3q5kqsHoCZYPwJbfX7ISNy7Y509KMfnZs+tnoxLhW/9xhX/YjjjBHAd+MjAw90Qxrnn5GMzo+PjYxMfRk9OHw8KPvR756+ODRd98+/vGHl88n1xBrgidyO2vFCPcus/+pdQEYdRPm2V9ezU6B8y8wi2HFqB8ZevDl11/MaJ+hCHJ0mDx/dy7LJx4YERlCCrPyJlPcFe5qlY+tt4Ac8l/GgtX4ek4gKKvxp8dDul/1xUKpXm8OPtwPbv/s927vBveFvMwE+eS2IG+sNuWjfzrnfzXOgAhujVKQy6j7XTu2Ypj+w7xYvarfdPutRrtZb/U61+1mR5VmrRXaCiv5eJbz9ZTj+1ql91YGYrRr1+8grbqQ57co74vFE816s9Pqqtz0+ipqrHq70dmLHVycSoUg8Sa6MbiQa3ISKIcDMcKWYZyy4M3vbW7t7DRrTXWhulltuu3e/1xeXO0eHFSVdEH0lbeZ/lm+WzkG4qR1H7ecbQcq62RhSxBE8aSsDG4HrUar0+pcd65r1fr94C6TOT5MHJxGxRyHKZtUNbvbKCWBDAdtQEbOMZcOuCohOhUJ4TRdOX1z2//Q6/av2ze9zk06lXWjcCrCZVaROOk8pJwdOT44LwIFEcsyCO8w7KCmBAGmGASxmExzOt6H8H5kj1/l/J6Zyafggi7NIhKPx0l3lvVdpiKfrhRAEuGSgFdChLKOHjPuPcwShkwhz/wmtHBE2WUelng0w0IJCoySoCSgedab4/H3Z1JNigGSAJVFoqy+QYBOREQJYmpQYN1yEC0GUVlEkpSjIGASByeIlQQJZhlI3qD/vlJ6r9NA4b8YL4v+kgDJAlzioDIPl0VEdRVVsmuuJGUriVhRQHM8vO9dilOO/uvsx6ryLyVgPgGUAUbEAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"백안!\"\n        title=\"\"\n        src=\"/static/55fd3fdfbabc263e71a0c4e316c97b8e/a2ead/image-16.png\"\n        srcset=\"/static/55fd3fdfbabc263e71a0c4e316c97b8e/c26ae/image-16.png 158w,\n/static/55fd3fdfbabc263e71a0c4e316c97b8e/a2ead/image-16.png 259w\"\n        sizes=\"(max-width: 259px) 100vw, 259px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>\n백안!!!!\n</figcation>\n</figure>\n<h1 id=\"철학자-문제--dining-philosophers-problem\" style=\"position:relative;\"><a href=\"#%EC%B2%A0%ED%95%99%EC%9E%90-%EB%AC%B8%EC%A0%9C--dining-philosophers-problem\" aria-label=\"철학자 문제  dining philosophers problem permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>철학자 문제 : Dining Philosophers' Problem</h1>\n<p>데드락 응용문제로 유명한 문제가 있습니다<br>\n철학자 문제 (Dining Philosophers' Problem)\n(<em>포크 두 개 들고 밥먹기</em>) 또는 (<em>생각에 빠지기</em>) 둘 중 하나를 하는 철학자 5명이 있습니다<br>\n이 5명의 철학자들은 원탁에 빙 둘러 앉아있고<br>\n5개의 포크가 철학자들 왼편, 오른편에 놓여있습니다<br>\n그림으로 나타내면 아래와 같습니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 324px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/5b04ab0cfddc4627775a7fb15240f2a9/67580/image-17.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 98.10126582278481%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAABc0lEQVR42pWUyY6CUBBF+f/vYWHikj1rNiYGgeBAQHBgUOijRVc/BjF9E+PjVd2qWwNY3S+ez+f5fG6ahnPbtmVZPh6Puq7lRi7zPOdGKZaecNrtdphvt1uaptfr1fO8KIru9ztBeYTm+z4OEmhAxhYEwX6/JwoquFmv18fjUURBjuMYK6FnyJiTJBGaoKoqcRJQBfwZMtkgd0O0b4xuIOtlT0ZPURQaUl27CejL6XQSqyV/juO4rivldZ+Bp23btO0vM4JpLy39lM0Esi+XCyPoyVmWfeWYYC7U+JKNTpo87c0CoKD8cDhYtGqz2XT/ATMLw5CUFtWyG7J0y93SjjB/lodVs6iekzn6r5ANf9XMDxnyvN1uzb2fAo2o1XXql4R3iPyr1UrfodGeyIFtp0HjDQN0X96YBTBUmfCYrHyq0K7qGUVskckckEUM+nGiixTPPBgkveWRuPqdmM+sBvyI4r9BNvNjMp95amZ+ps7pIH8AAhqUXJ7NHUsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"철학자문제\"\n        title=\"\"\n        src=\"/static/5b04ab0cfddc4627775a7fb15240f2a9/67580/image-17.png\"\n        srcset=\"/static/5b04ab0cfddc4627775a7fb15240f2a9/c26ae/image-17.png 158w,\n/static/5b04ab0cfddc4627775a7fb15240f2a9/6bdcf/image-17.png 315w,\n/static/5b04ab0cfddc4627775a7fb15240f2a9/67580/image-17.png 324w\"\n        sizes=\"(max-width: 324px) 100vw, 324px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>어떤 철학자가, 양 옆의 다른 철학자들이 사색에 빠진 타이밍에<br>\n잽싸게 왼쪽 포크와 오른쪽 포크를 둘 다 집어버려 식사를 시작하면 굿이지만<br>\n운 나쁘게도.. 철학자들이 번갈아가면서, 자신 왼쪽에 놓인 포크를 집고, 왼쪽 포크를 집고, ...<br>\n이렇게 되면 각 철학자들이 왼손에 포크를 들고 오른쪽 포크를 기다리며 다같이 굶어 죽습니다...</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/4a3b513ba1d1ea88d5a3e419a3fb860f/5a46d/image-18.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9ADg0J19VR25gUmVaT2deUmxkVGZfUmBYTmZ3ToykZ3N1X3ZyZGxqVrCqkbiXhqmVal1dPFtUQlpNO3FnVwBBPjBfVUNsWkZqXU56bFxuZFVbVUl6cWNqb05bfzptdluAdVlJRS8qLyp+Oy7jkHrGuZIzKxlZTj7IvZ8ARD0yWVJEVE9CZFpPYFdMVFFGdWZRknNii3Jtemdcgn1djYlifHtgQ0EwWkg2s3BfrY13cGZVoZqBiIBmAGdmYHBwaG5vaGNjW0ZGQEJCO3BaTqR9a5Z2bJBxaY1tYX19WYSBX5WFaIqCY3ZzX19VQ97QtrCmhpaPcgBtbm1maGZhZGJUWFNCQzwzNTRJOTGVbVinfm+ngHuUZ2COdWZ5b16Jgm9sY1BURjfEuKDn28HdyqK+sJQAYmFfb3BqdnZucm5jRUZAQDs7f15Tk2lUpHtrtpKMlmtnnn5vo52KfHJkPzcth31pyryi8+ve7OHLwbCYAKiii6ahia6liXx0YzQ1MywoJ39cVZ52Y6R+aa+MgaN7cqiKdrmzlmZcT21lXJCMgop/a8a8rP/++ezi1ACqoIKelHuflXZZU0cgIB8WFxUVEA17V0fGnIG7k3+og3Wrm5K3taqsoouNhHV5c2mYlIaupJHj2sn28+wAopd9o5h8d3BZNDAqKispJCMiEhQUSzcuroRrso95mHhio5idu8Low8TKnJWAem9nc2xgkIx+2NDB8eneAJ+Xfp2WfEU/MyAgHj89MDU1LWdpdnp8hZGPl4yLiH9/f5KQlWJiZkNEP4+Pi4Z7bYd7b3lxZo+Jgd/XygCalX2Vim8+NysMCwwhICRwdoypstezu+G7w+u9xey+xezJ0vmSnLViaYHF0PW8xNiXjoiPgnSGfHGalYurizWFL+wuCgAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"허기\"\n        title=\"\"\n        src=\"/static/4a3b513ba1d1ea88d5a3e419a3fb860f/5a46d/image-18.png\"\n        srcset=\"/static/4a3b513ba1d1ea88d5a3e419a3fb860f/c26ae/image-18.png 158w,\n/static/4a3b513ba1d1ea88d5a3e419a3fb860f/5a46d/image-18.png 300w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>참 내. 양보들 좀 하지.</p>\n<p>이런 일이 발생하지 않도록, 아래와 같이 밥먹는 규칙을 정해줘야 하겠습니다</p>\n<ul>\n<li>먼저, 포크를 동시에 집지 못하게 <strong>Mutual Exclusion</strong>을 보장해야 할 것이며</li>\n<li>철학자들이 굶어 죽지 않게 <strong>데드락, starvation</strong>이 발생하지 않게 해주어야 함</li>\n</ul>\n<h2 id=\"이렇게-하면-데드락이-발생해요\" style=\"position:relative;\"><a href=\"#%EC%9D%B4%EB%A0%87%EA%B2%8C-%ED%95%98%EB%A9%B4-%EB%8D%B0%EB%93%9C%EB%9D%BD%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%B4%EC%9A%94\" aria-label=\"이렇게 하면 데드락이 발생해요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>이렇게 하면 데드락이 발생해요</h2>\n<p>Mutual Exclusion을 보장하기 위해 Critical Section을 구현해야 하니<br>\nsemaphore를 이용(semaphore 또는 monitor에 대한 자세한 설명은 <a href=\"https://sungpaks.github.io/mutual-exclusion-by-os/\">여기</a>)하여 간단히 아래와 같이 쓰려고 할 수도 있겠습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">semaphore fork<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">int</span> i<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">philosohper</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">think</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">wait</span> <span class=\"token punctuation\">(</span>fork<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//왼쪽 잡기 시도</span>\n\t\t<span class=\"token function\">wait</span> <span class=\"token punctuation\">(</span>fork<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">%</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//오른쪽 잡기 시도</span>\n\t\t<span class=\"token function\">eat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//냠</span>\n\t\t<span class=\"token function\">signal</span><span class=\"token punctuation\">(</span>fork<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">%</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//오른쪽 포크 내려놓기</span>\n\t\t<span class=\"token function\">signal</span><span class=\"token punctuation\">(</span>fork<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//왼쪽 포크 내려놓기</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token function\">parbegin</span><span class=\"token punctuation\">(</span><span class=\"token function\">philosopher</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">philosopher</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">philosopher</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">philosopher</span><span class=\"token punctuation\">(</span><span class=\"token number\">3</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">philosopher</span><span class=\"token punctuation\">(</span><span class=\"token number\">4</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그런데 이렇게 작성하면 <strong>데드락이 발생</strong>해버릴 수 있습니다...<br>\n위에서 말했던 것처럼, <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>번째 철학자가 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>번(왼쪽) 포크를 집고, timeout되는 과정을 반복하면<br>\n모든 철학자들이 왼손에는 포크를 들고, 옆 철학자가 왼 손에 들고 있는 본인 기준 오른쪽 포크를 기다리며 교착 상태에 빠져버립니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 213px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a403dd66b705cb32626223e944e723ae/3cb16/image-19.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 110.75949367088609%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAWCAIAAABPIytRAAAACXBIWXMAAAsTAAALEwEAmpwYAAAE4UlEQVR42hWT6U8bVxTFB4MXMmbs2d7Me29mvOAF29jGBhtj4wWbxRhiSINN4rAENYCB4OI0OA1NSICKJM1CEppITau0JGrVNEqlVCpVVVWq1OVr/6UOevfj/b2re+45hNks8gDZ2x2SbON4pBYLsIkBJGUWRSRAqFgVm82KMRIh4Dizw+PL9Mf7u/0AsISZRhQNaFZgGESZVIbVt1JarU6r1+r1eoE1ua1iKhrIJGKiwLMs5fL6Uqn+VJdHgoAwGNVuk1pmWv1Y4HjeSBo1GoJs1ae98vp48rA+f/x0+92zex53O8NSKk/TajMFBJo4RbE0A3he5DkV5BGEJGnU6bR9brgxHq5PJD8pF15cmXt/sL0yM22i2yRJhCKPJQAxIAAQOQ6wHC9ArJIQwaBV7rGKpwN4cyy6Ozv+tDZ7eyrzw83Lv3z1NOj3qiSCPMZAkkVCJXleACKCkkVRZBGhgU5XLReeDMLLWf/di8VH1XJ9OPbF0uzxw53+SEgUWIsMZUmUsEAgdSDGitWCJVkQRJpm2khjWBLPhOSVXOdOZfDWhdFrxYFny/PvD/YcdkUArCJDhADGvAorWFIUiyJJitFIEU0nDwtiwo7OBqTlXOe1UrpRGjq6Xd9anm+3IY/H7nLIHpdFxhyBsQTRybamNjNHs6puTisay8VrlfFqvvdS2jWX9NTOJqrF1GI+tlYaqAxHLgyF+3u8EuIJHrCyLNM01aLV9fqcyaA3F+osBF0jvYF7n24+vlV/VDv35Vb18eXFOcVW7nDn+/y5iAMLjIRZVTCOMpmaNITe0EwaDadIveqQlqaWJk1TsS95eHvv13ff//3H8YN6o0iyRZs7Hu7x+dyCYOJYkqAYnuWB3eHAEiLJVp2uxdCqlzgq7beuFGJ788VX+x//dvT8w9KExLIKBO0uZ08oGPN7SpNjhJllVAO3O52q4AZDK9Gkkfm26Zi9OhC8NTv2cmv51Y3q8eHe76+eR6N+I2XwBLpz2Wx1qrC/9RHBsDQPBB6o89lmg45pax31y5eSHQuZ7rWx7I2pkZebS/erla+3G/vXN1RpZAQQ5AbTkeniIMELPEQyllXFeYYyWljyfHf7+mDo6kRy5+Lk9WL/Z+Xs2/3G6+2Nf9980+lzI8Spd3ZaYS4eIZCk2gMhDB0WWO7xBJE57xXWBoJ3ZsZfXFm4mo/WMuG32/Wf9ur/vX15tjCkplLGgtuuTI5kCBFKJw5TrWnB5Zg33yEPucFqLnCzlN2eHlmMB9cGEndnzn97beXng5tD8agIGEURXXZ5JBlRd1YjAZGEtQaDyUDGLGDcBxezvhvns7szIyvZntXBZKNYeLNT/+v1Y2+7hWUoi1XEIpON+gkgnmSYpii/y2qFqLXZ0CuZJ/xwZbirUU5tlTL788Uf9xv/fPfk86tL6VhXd8DudkCXXepw2giaMbfotAzVNhIP9Ic9qVh3MeGdiFjKqY4zfR0Lo+HVcro2nbm+WKicjldOJ+cmYufGoomwy0waiGatRqPVqN76IBOaz4eXhiOr5fzmzOiV8dhGMfHhQKg2mT5cL80norNB36Vo97DVmg6F6nNd9Wme0OlbtNoWnU6HjEb+lJHX6YbCvQe7uw821++vTN1ZKBxtL/959ODJZiNv5HbiuYon1OlyVsZ6H67a/gcApBZb3QLXEQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"기다릴게..\"\n        title=\"\"\n        src=\"/static/a403dd66b705cb32626223e944e723ae/3cb16/image-19.png\"\n        srcset=\"/static/a403dd66b705cb32626223e944e723ae/c26ae/image-19.png 158w,\n/static/a403dd66b705cb32626223e944e723ae/3cb16/image-19.png 213w\"\n        sizes=\"(max-width: 213px) 100vw, 213px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h2 id=\"circular-wait-prevetion으로-해결해봐요\" style=\"position:relative;\"><a href=\"#circular-wait-prevetion%EC%9C%BC%EB%A1%9C-%ED%95%B4%EA%B2%B0%ED%95%B4%EB%B4%90%EC%9A%94\" aria-label=\"circular wait prevetion으로 해결해봐요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Circular Wait Prevetion으로 해결해봐요</h2>\n<p>위에서 살펴본, 데드락 발생 4가지 조건 중 Circular Wait을 깨뜨리는 방법으로 간단히 해결해볼 수 있는데<br>\n먼저 포크에 번호를 다 붙입시다. 0~4번 포크로<br>\n이제 <span class=\"math math-inline\"><span class=\"katex\"><span class=\"katex-mathml\"><math xmlns=\"http://www.w3.org/1998/Math/MathML\"><semantics><mrow><mi>i</mi></mrow><annotation encoding=\"application/x-tex\">i</annotation></semantics></math></span><span class=\"katex-html\" aria-hidden=\"true\"><span class=\"base\"><span class=\"strut\" style=\"height:0.6595em;\"></span><span class=\"mord mathnormal\">i</span></span></span></span></span>번 철학자는 포크를 집을 때, 포크 번호가 작은 것부터 집도록 합시다.</p>\n<p><code class=\"language-text\">fork[0],fork[1],fork[2],fork[3],fork[4]</code> 존재</p>\n<ul>\n<li>0번 철학자 : <code class=\"language-text\">fork[0] -> fork[1]</code> 요청할 예정</li>\n<li>1번 철학자 : <code class=\"language-text\">fork[1] -> fork[2]</code> 요청할 예정</li>\n<li>2번 철학자 : <code class=\"language-text\">fork[2] -> fork[3]</code> 요청할 예정</li>\n<li>3번 철학자 : <code class=\"language-text\">fork[3] -> fork[4]</code> 요청할 예정</li>\n<li>4번 철학자 : <code class=\"language-text\">fork[0] -> fork[4]</code> 요청할 예정 (4번과 (4+1)%5=0번인데, 번호 작은 포크부터 요청하기로 함)</li>\n</ul>\n<p>이제, 데드락이 발생했던 상황인 포크 하나 집고 time-out 당하는 경우를 생각해봅시다</p>\n<ol>\n<li>0번 철학자가 먼저 <code class=\"language-text\">fork[0]</code>을 집은 경우 :\n<ol>\n<li>이후 1번이 <code class=\"language-text\">fork[1]</code>, 2번이 <code class=\"language-text\">fork[2]</code>, 3번이 <code class=\"language-text\">fork[3]</code>을 집게 되어도, 4번 철학자는 <code class=\"language-text\">fork[0]</code>을 집기 전에는 <code class=\"language-text\">fork[4]</code>를 집지 않을 것인데, 이미 <code class=\"language-text\">fork[0]</code>은 0번 철학자 손에 있습니다.</li>\n<li>그럼 <code class=\"language-text\">fork[4]</code>가 남아있으므로, 언젠가 3번 철학자는 <code class=\"language-text\">fork[4]</code>까지 집어들 수 있고, 식사를 할 수 있습니다.</li>\n</ol>\n</li>\n<li>4번 철학자가 먼저 <code class=\"language-text\">fork[0]</code>을 집은 경우 :\n<ol>\n<li>0번 철학자는 <code class=\"language-text\">fork[0]</code>을 집기 전에는 <code class=\"language-text\">fork[1]</code>을 집지 않습니다.</li>\n<li>다시, 남은 철학자들이 하나 집고 timeout, ...과 같은 상황이 발생해도, 3번 또는 4번 철학자 둘 중 하나가 <code class=\"language-text\">fork[4]</code>를 집을 때는 이미 포크를 하나 집어든 상태이므로, 식사를 시작합니다.</li>\n</ol>\n</li>\n</ol>\n<p>이런 식으로 해서 데드락을 해결해볼 수 있겠네요</p>\n<h2 id=\"밥-먹는-공간은-따로-분리하고-인원-제한을-둬요\" style=\"position:relative;\"><a href=\"#%EB%B0%A5-%EB%A8%B9%EB%8A%94-%EA%B3%B5%EA%B0%84%EC%9D%80-%EB%94%B0%EB%A1%9C-%EB%B6%84%EB%A6%AC%ED%95%98%EA%B3%A0-%EC%9D%B8%EC%9B%90-%EC%A0%9C%ED%95%9C%EC%9D%84-%EB%91%AC%EC%9A%94\" aria-label=\"밥 먹는 공간은 따로 분리하고 인원 제한을 둬요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>밥 먹는 공간은 따로 분리하고, 인원 제한을 둬요</h2>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a8e6897a79d1fd19f0ee4a4a9e89d923/d67fd/image-20.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 77.21518987341771%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAPCAYAAADkmO9VAAAACXBIWXMAAA7DAAAOwwHHb6hkAAABrUlEQVR42o2TyY7CQAxE8/+fwx0hJC4QCXFhSUQQhH0L+5YEPHpGzjAMMGPJ6k63u1wuO87tdpP9fi+Xy0UWi4X6arWS2Wwmm81GttutrNdrOZ1Ouu52O3lnYDlseGyBHJofj0c9NyeBJTGHzOFw0PskSe6AXPBhgBiMhsOh+L4v3W5XPM+TZrMp9XpdgiCQdrud3RFHVcvl8g5IKZ1OR6IoyspuNBqa+bmk6/WqblWwx9I0/QZEv8lkolkAHgwGmh0W8/lcy4nj+Be4VYNRIbGOHQLY7/d1rdVq0mq1VFsM3WDPA/bWxEcDcDqd3hk+lkMjWGHnuq70er2MHVqjX6VSkVwuJ+Px+AcgZJzn1gPGJToCAKtisSj5fF4bYMZ9uVzW5n0EfJQAkTGaAyskQOfz+aznyGAxVPERkM7zAK0AMD35BoQ7KoDpSw1fAcLMdB2NRlkjLKZQKEgYhhlDkv4JaMYElEolLZnH3FWrVWVqDGH7FtDGwwyWdJ4Z5SFlM8wWD6AONpnIaivMeAx91v9a9qfAAiBWwHD2MGRkKAlwNMSZPdy+6Swx9qd9AXW6gKmSlcu1AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"밥먹는 공간은 따로\"\n        title=\"\"\n        src=\"/static/a8e6897a79d1fd19f0ee4a4a9e89d923/f058b/image-20.png\"\n        srcset=\"/static/a8e6897a79d1fd19f0ee4a4a9e89d923/c26ae/image-20.png 158w,\n/static/a8e6897a79d1fd19f0ee4a4a9e89d923/6bdcf/image-20.png 315w,\n/static/a8e6897a79d1fd19f0ee4a4a9e89d923/f058b/image-20.png 630w,\n/static/a8e6897a79d1fd19f0ee4a4a9e89d923/d67fd/image-20.png 670w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이런 식으로, 밥 먹는 공간과 생각하는 공간을 따로 분리한 뒤<br>\n밥 먹는 공간에는 4명까지만 들어가게 하면 어떨까요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 300px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/233e866e6071aed6bb44f85cd6f8bfa1/5a46d/image-21.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.69620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACaElEQVR42iWSXU/TUBjHe2dC0BjY1q7nnLbntKftkK1ru746ZCCQgMMQWUgkoENkEOaigMhAhYAzZpEYYmL0wiheeUHCha8Jd/o9/ALGD+FBk1/O1ZPz+/+fPFwvTJZL4e3pioOBp0oFFXkadKlkYoUgpMlyjqDYkEKKfI0NiK7CD7sXRnwrrwicljg3M1ne3WrmEJ/H0CGShYHIJ3iBFwQhkeI7Ojt1wIem6ukkMGleQXubzU/fj+8u3+JcgmwsOpj3Nfa3FOuKhWEyxad4oSuRIBI0sUSE7lCHngr+yYUhp+dqvzdom5yFBFtmYURHES0FkHRSFFIaglhM1a4Uv7RXPzbnRp2eAsWBoTIikxYocbHsq5hjWpuAggqZmcU2FdFEwl5l5NnM6I/na59b9/arE2O24Wkg1KWAokgHsQ7YG2hpLienLRk4p+FhXgEuhn6GvliYOtle/NlePd6cP2zMXs7qHlVCSkJdjQw1PoVGBuWY05ZTOdDlEjHupbFtDQ+NPKnd+FCfOlq/+Xr+2tb4QKSjgLKF/wcxYl2KDchlQWq8VFyam1+u1er1O83NR+sbWxtrD1oLs7uVoaeVcj8rqckBxT6rTUmgq8FpBI2l4Eyh63q59O7NXmtnpb44vbG69OqgtdKoDpd8LyNNDmRNqpgqiagcajDWYKjCUAMRWwEBXEYUZ8Z6v70vH2wP7j/sb1QLjTnv5U7p6+HUydH9t+0rvo3PdycsVYoMwgpHrLZOGMzPOSjZ52QuFV0ra9o5QjDMGMTN4YXqxJ/fv9qtx2c7zrCD6ZHTfaZ00ZD7DKVoyIyIwr8hSJVWUtE+1wAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"함꼐 갈 수 없습니다\"\n        title=\"\"\n        src=\"/static/233e866e6071aed6bb44f85cd6f8bfa1/5a46d/image-21.png\"\n        srcset=\"/static/233e866e6071aed6bb44f85cd6f8bfa1/c26ae/image-21.png 158w,\n/static/233e866e6071aed6bb44f85cd6f8bfa1/5a46d/image-21.png 300w\"\n        sizes=\"(max-width: 300px) 100vw, 300px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그럼 4명이 포크 5개를 공유하니, 누군가는 포크를 두 개 집을 수 있습니다</p>\n<p><code class=\"language-text\">semaphore room</code>을 새로 도입하여 이를 구현하면 :</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">semaphore fork<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">1</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//포크는 여전히 다섯 개</span>\nsemaphore room <span class=\"token operator\">=</span> <span class=\"token punctuation\">{</span><span class=\"token number\">4</span><span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//밥 먹는 방에는 4명만 들어오세요</span>\n<span class=\"token keyword\">int</span> i<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">philosopher</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">think</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//생각은 방 밖에서 알아서 하세요</span>\n\t\t<span class=\"token function\">wait</span><span class=\"token punctuation\">(</span>room<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//밥 먹으러 들어가려면, 4명 꽉찼으면 대기, 자리 있으면 들어가</span>\n\t\t<span class=\"token comment\">//이제 방에 들어왔음</span>\n\t\t<span class=\"token function\">wait</span><span class=\"token punctuation\">(</span>fork<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//왼쪽 포크가 있으면 포크 집어들기</span>\n\t\t<span class=\"token function\">wait</span><span class=\"token punctuation\">(</span>fork<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">%</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//오른쪽 포크가 있으면 포크 집어들기</span>\n\t\t<span class=\"token function\">eat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//냠</span>\n\t\t<span class=\"token function\">signal</span><span class=\"token punctuation\">(</span>fork<span class=\"token punctuation\">[</span><span class=\"token punctuation\">(</span>i<span class=\"token operator\">+</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token operator\">%</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//오른쪽 포크 내려놓고</span>\n\t\t<span class=\"token function\">signal</span><span class=\"token punctuation\">(</span>fork<span class=\"token punctuation\">[</span>i<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//왼쪽 포크 내려놓고</span>\n\t\t<span class=\"token function\">signal</span><span class=\"token punctuation\">(</span>room<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//방 나간다</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이와 같이, 포크를 집고, 먹고, 포크를 내려놓는 일련의 과정을 <code class=\"language-text\">semaphore room = {4]</code>로 감싸버립니다.</p>\n<h2 id=\"monitor로-해결해요\" style=\"position:relative;\"><a href=\"#monitor%EB%A1%9C-%ED%95%B4%EA%B2%B0%ED%95%B4%EC%9A%94\" aria-label=\"monitor로 해결해요 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>Monitor로 해결해요</h2>\n<p><code class=\"language-text\">semaphore</code>말고도 <code class=\"language-text\">monitor</code>라는 강력한 동기화 툴이 있었죠?<br>\n이를 이용하여 해결해봅시다<br>\n코드 먼저 봅시다 :</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">monitor dining_controller<span class=\"token punctuation\">;</span>\ncond ForkReady<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//포크 동기화를 위한 조건변수</span>\nboolean fork<span class=\"token punctuation\">[</span><span class=\"token number\">5</span><span class=\"token punctuation\">]</span><span class=\"token operator\">=</span><span class=\"token punctuation\">{</span>true<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//각 포크가 집을 수 있는 상태인가??</span>\n\n<span class=\"token keyword\">void</span> <span class=\"token function\">get_forks</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> pid<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">int</span> left <span class=\"token operator\">=</span> pid<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span> right <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">++</span>pid<span class=\"token punctuation\">)</span><span class=\"token operator\">%</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/* 왼쪽 포크 집기 */</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fork<span class=\"token punctuation\">[</span>left<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token function\">cwait</span><span class=\"token punctuation\">(</span>ForkReady<span class=\"token punctuation\">[</span>left<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//왼쪽 포크 없으면 밖에서 기다려!!</span>\n\tfork<span class=\"token punctuation\">[</span>left<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span> <span class=\"token comment\">//왼쪽 포크 있으면 집어들고, false 체크</span>\n\t<span class=\"token comment\">/* 오른쪽 포크 집기 */</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">!</span>fork<span class=\"token punctuation\">[</span>right<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span> <span class=\"token function\">cwait</span><span class=\"token punctuation\">(</span>ForkReady<span class=\"token punctuation\">[</span>right<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//오른쪽 포크 없으면 기다려!!</span>\n\tfork<span class=\"token punctuation\">[</span>right<span class=\"token punctuation\">]</span> <span class=\"token operator\">=</span> false<span class=\"token punctuation\">;</span> <span class=\"token comment\">//오른쪽 포크 있으면 집어들고, false 체크</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">release_forks</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> pid<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">int</span> left <span class=\"token operator\">=</span> pid<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">int</span> right <span class=\"token operator\">=</span> <span class=\"token punctuation\">(</span><span class=\"token operator\">++</span>pid<span class=\"token punctuation\">)</span><span class=\"token operator\">%</span><span class=\"token number\">5</span><span class=\"token punctuation\">;</span>\n\n\t<span class=\"token comment\">/* 왼쪽 포크 내려놓기 */</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span>ForkReady<span class=\"token punctuation\">[</span>left<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> fork<span class=\"token punctuation\">[</span>left<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span> <span class=\"token comment\">//왼쪽 포크 기다리는 애 없으면 그냥 놓고</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token function\">csignal</span><span class=\"token punctuation\">(</span>ForkReady<span class=\"token punctuation\">[</span>left<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//기다리는 애가 있으면 걔 준다</span>\n\t<span class=\"token comment\">/* 오른쪽 포크 내려놓기 */</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span><span class=\"token function\">empty</span><span class=\"token punctuation\">(</span>ForkReady<span class=\"token punctuation\">[</span>right<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> fork<span class=\"token punctuation\">[</span>right<span class=\"token punctuation\">]</span><span class=\"token operator\">=</span>true<span class=\"token punctuation\">;</span> <span class=\"token comment\">//오른쪽 포크 기다리는 애 없으면 그냥 놓고</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token function\">cisngal</span><span class=\"token punctuation\">(</span>ForkReady<span class=\"token punctuation\">[</span>right<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//기다리는 애가 있으면 걔 준다</span>\n<span class=\"token punctuation\">}</span>\n\n<span class=\"token comment\">/* --- 모니터 외부 --- */</span>\n<span class=\"token keyword\">void</span> philosopher<span class=\"token punctuation\">[</span>k<span class=\"token operator\">=</span><span class=\"token number\">0</span> to <span class=\"token number\">4</span><span class=\"token punctuation\">]</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>true<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token function\">think</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">get_forks</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">eat</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token function\">release_forks</span><span class=\"token punctuation\">(</span>k<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">void get_forks()</code> : 포크를 무조건 두 개 다 집고, 모니터를 빠져나온다.\n<ul>\n<li><code class=\"language-text\">fork[left]==false?</code> 누군가 왼쪽 포크를 쓰고 있으니, 기다리자.</li>\n<li><code class=\"language-text\">fork[right]==false?</code> 누군가 오른쪽 포크를 쓰고 있으니, 기다리자.</li>\n</ul>\n</li>\n<li><code class=\"language-text\">void release_forks()</code> : 포크를 두 개 다 내려놓고, 모니터를 빠져나온다.\n<ul>\n<li>내려놓을 포크를 기다리던 애가 없다면, <code class=\"language-text\">fork[left]=true</code>와 같이 그냥 내려놓는다.</li>\n<li>내려놓을 포크를 기다리던 애가 있으면, <code class=\"language-text\">csignal</code>로 포크를 넘겨준다.</li>\n</ul>\n</li>\n</ul>\n<p>이렇게 하면 <strong>데드락이 발생하지 않는다</strong>.. 입니다만, 저희 교수님께서 말씀하시길</p>\n<p>왜 그렇죠? 처음에 데드락이 발생할 때도, semaphore로 왼쪽을 잡고, 아니면 기다리고, 그 다음 오른쪽을 잡고, 아니면 기다리고, 의 과정을 거쳤습니다<br>\n그런데 여기서도, 왼쪽 포크 있으면 집고, 아니면 기다리고, 오른쪽 포크 있으면 집고, 아니면 기다리고, 의 과정을 거치는게 비슷한 것 같은데요<br>\n라고 질문하셨습니다.. 잘 생각보라고 하시네요</p>\n<p>또한<br>\n일단.. \"monitor는 그 자체로 내부가 Critical Section이다\", \"프로세스 혼자서만 들어간다\", 같은 설명은 답이 되지 않을 것 같네요<br>\n<code class=\"language-text\">void get_forks()</code>함수를, <code class=\"language-text\">void get_left_fork(), void get_right_fork()</code>와 같이,<br>\n왼쪽 포크 따로, 오른쪽 포크 따로 집게 함수를 분리하면 데드락이 발생합니다.<br>\n모니터 자체의 특성으로 인해 해결되는 것이 아니라는 뜻입니다<br>\n라고 하셨는데</p>\n<p>교수님께서 주신 힌트를 종합해보면, 한 마디로<br>\n<strong>포크를 집으려다, 또는 하나 집고, CPU를 뺏겨도, 누군가 내가 집을 포크에 손 대지 못한다</strong><br>\n정도로 정리할 수 있을 것 같습니다<br>\nMonitor에서 <strong>포크를 둘 다 집어야만 모니터를 나온다</strong>라는 점이 중요한 셈인데<br>\nMonitor내에서 time-out당해도, Monitor 내부는 잠겨있어 다른 누군가 포크를 손도 대지 못합니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 225px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/f02bb9d4040baafec6b85094e4f736cc/3684f/image-22.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEAElEQVR42iVS+U9aWRR+v5nUJsYy2hGeZd9BQKECVkEEgfcARQYrglqXtqNxnIw2aeLEpeNMp8mgsjxlB0HABakmk4z/3nzCyc3NXc63nHMv8e9/zYsKk8/lGo3G1dXV9fX1faNppI0d9hdsJamWiSeC5LtNXXhdPbXGHnHzQmH68/bHX9dXPq4tEavvp+dXAodf9rLZ7M3NTblczhWK0053l/LFM+oH6ZBwelYb/lngjXRT8716E2d4WON2jRl1SrlMRPwUmN89+LNcqRSLRYhfVqv5UjkWO/16+Af1OcBa4/71z16KiUZPvh1HjxPxeOw0nmQYq9Xy/Pkzgp60nTHxh/uHy8sqZOv1eq1ardZqV/XrUvmC3nt7nI1/v3u4bTSazeb9/X3ze/Px8dFht3d2dhK0Y6xWR3K9Uinn8/lCoQAXmUwmFovlc/k0k2KSTD6fOzs7q1QqpVIJAnd3d3q9vqOjg1DIpdFo9Pb29uLiAmCYPz8/Zxgmm8nmcrlEIpFKpc5agaZge9kKmUzGYrGISbvlw/tVkOEI3CBGEsDIA1c6kwYdLMARFiDCi+B83PLG5bASnklbMODL5jKoFOIwBsGTkxM4r9VqIAIMpLhq8+Iwk0lvfFheX40QPJKjVsnj8TjAgLXBSMUMfNsz5nQ6jQUqKuTz6ENoOaSUigg+75V6QJlIopjq8fHx0dERZMGFhjGtwCLTCiDBUSoW40ycmnKJuByColyOScf+/j5c4RqwZDIJEbjFFphsKyCOGXZQwsHBnl6v1Q6oiLmgL+D3bf+2A3AMX+D0FGCYRB400TbYaZNii0P0dff3XcrtmvL6CL+XCgaDyyvLeEzooD5kIBv4NgB4bBOtgD56vvPpk2XU6J6wEFqNyu/3Ynz9+xueJJVIZlPpbMttu/mFVjw9WzqNGV94Z3vbZrOZDIOEXC4feTMcnJ0JhUJut9NtsUQ8vik3vbgY8XlpdGRldWVra2vzl03ExsbG4eGXpYWQTqvm9nOIEZNZLuI7nA6KojQD0nGLNRgIGM0mg2GIxyV7elhmk5FCiU63fcJmtZpcLpfDPiqR8EkOm/DyBLa+fqVcopCKNGqFheR7+0VjAqHRoJdJJSSnb8Q07KHdXtrjcjoNOq35td6gVXBfsVVKBREiBUE2f1DMF4t5SoV4tOelr6t3ktVnNZrkcsmTstnon/LN+Gcop0spFsiEpELEk4qFPg9NhIWytyT/NY8vEHKlEoG5t49+SVp+ZGvUarVK2d3dZbWOLS5EFsIL016fXMxTSXlSQb9+SDc3GyS8XPFcv8Cu1Q3qdQqZeJDk0BLJCJ8rkYg0AwNQHrdal5feYfg8HiGfVEmewC6nIxIO/Q9hw/Xg5m7o4QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"취급주의\"\n        title=\"\"\n        src=\"/static/f02bb9d4040baafec6b85094e4f736cc/3684f/image-22.png\"\n        srcset=\"/static/f02bb9d4040baafec6b85094e4f736cc/c26ae/image-22.png 158w,\n/static/f02bb9d4040baafec6b85094e4f736cc/3684f/image-22.png 225w\"\n        sizes=\"(max-width: 225px) 100vw, 225px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이렇게 생각해보면, 함수를 둘로 나누어 왼쪽 포크 집는 함수, 오른쪽 포크 집는 함수로 나누면 데드락이 여전히 발생한다는 점이 납득이 갑니다<br>\n그렇게 되면 왼쪽 포크를 집은 뒤 Monitor를 나오게 되는데, 이 타이밍에 CPU를 뺏기면, 다른 누군가 포크에 손을 댈 수 있습니다..<br>\n결국 <code class=\"language-text\">semaphore</code> 경우와 다를 바가 없어지는 셈이네요</p>\n<hr>\n<p><br>\n이렇게 프로세스 세계의 평화를 지켜냈습니다.. 후</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1b6a742585951ed7d0dfd074d5b16193/7608e/image-23.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 55.06329113924051%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AHNeNlRCIUhALkxDLVpFG19JJKqikLOrmrGmlZqUjlxcU1BEIEY3GEk5GE1FKz5GQGpeOJN5PoFtPFNIKAB2akEyODc3OTY3OzsxNTBnVSqmiUSfhEWymD+vnDdeWjc3PDtDPCQ+NiNBSEAiKClVTC7Bm0ZtWzEnMTAAPkM3Ky4rLy4xQj49OTs8UlA9pph+moVWv61I28lQqppAHyItOToxR0YzLDQ4LjAxIyojloNTVU84GCAdACw2MCgrJykrL0A/PU9MRUlLQJCHdIpzO7inYsq+g4t9PyIhJ0A4KE1CIycnJi8qJCYiE3l4dFdSSDorEQBALRM5Jg46Jg9DMhk/LhpCMyOJf2aLczyhjWmYhFmNezo+KhNHMRBFLxJHMRNHMBJILg9/eG1nXVBFLhcARjgtRzkrQTMrd2g0rZQtdGQ6nJaSnYlgnYhXrZlNt6+DWlRSPDAhQzQfPTMqOjUxKSMmdHFwYmFhKioxACUnLyEoLyYpLlttb6ahWNzJRbeqZK6jZ8izQMO0U8O4c5eLPT45MD8yHC4uLSYtMQoQHGNkZmVlZQ4SHQAXGR8jLDA/Pz1JXmhLaHuEg0jPuTPHtES8rmbHsz/MtzPYwz6HfUVaV1hFREMrMTYKEB1aXWBxcG4PFSAAMSgRNy0VNiwXNCsTMioSKycgeHNdvLmn0dXezMi0zMBu2cVCkII6YF1aOC8eNS4ZKSELXVlLeXdxMCgRADMtIzIrIjErIDAoHjMqHDMuJl1bWY6OkZmbnqirtp2fo5qYgGlkWVZTTDw0IzMpFyshD3JsYZOQjDQqGQA2Njc6OTs7Ojw4Nzk2NTczNTxqam6qq6uusbSzt7ivsrSxtr53eX5bWldCQUI3NjooJytvbm6Rj4xBQEF/Y9zt8bQnhQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"평화와 치킨을!\"\n        title=\"\"\n        src=\"/static/1b6a742585951ed7d0dfd074d5b16193/f058b/image-23.png\"\n        srcset=\"/static/1b6a742585951ed7d0dfd074d5b16193/c26ae/image-23.png 158w,\n/static/1b6a742585951ed7d0dfd074d5b16193/6bdcf/image-23.png 315w,\n/static/1b6a742585951ed7d0dfd074d5b16193/f058b/image-23.png 630w,\n/static/1b6a742585951ed7d0dfd074d5b16193/7608e/image-23.png 735w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>치킨 먹고싶네요~</p>","frontmatter":{"title":"🔒 데드락도 락이다. - 데드락과 철학자 문제","date":"June 16, 2024","description":"누가 철학자들한테 밥은 꼭 양손에 포크 들고 먹으라고 칼 들고 협박함?","tag":["OS"],"ogImage":null},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EB%8D%B0%EB%93%9C%EB%9D%BD%EC%9D%B4-%EB%AD%94%EB%8D%B0%EC%9A%94\">데드락이 뭔데요?</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%8D%B0%EB%93%9C%EB%9D%BD-%ED%95%B4%EA%B2%B0%EC%9D%84-%EC%9C%84%ED%95%9C-%EB%B0%A9%EB%B2%95\">데드락 해결을 위한 방법</a></p>\n<ul>\n<li>\n<p><a href=\"#deadlock-prevention\">Deadlock Prevention</a></p>\n</li>\n<li>\n<p><a href=\"#deadlock-avoidance\">Deadlock Avoidance</a></p>\n<ul>\n<li><a href=\"#process-initation-denial\">Process Initation Denial</a></li>\n<li><a href=\"#process-allocation-denial\">Process Allocation Denial</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#deadlock-detection\">Deadlock Detection</a></p>\n<ul>\n<li><a href=\"#%EB%8D%B0%EB%93%9C%EB%9D%BD-%EB%B0%9C%EC%83%9D-%EC%8B%9C-%EC%A1%B0%EC%B9%98\">데드락 발생 시 조치</a></li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B2%A0%ED%95%99%EC%9E%90-%EB%AC%B8%EC%A0%9C--dining-philosophers-problem\">철학자 문제 : Dining Philosophers' Problem</a></p>\n<ul>\n<li><a href=\"#%EC%9D%B4%EB%A0%87%EA%B2%8C-%ED%95%98%EB%A9%B4-%EB%8D%B0%EB%93%9C%EB%9D%BD%EC%9D%B4-%EB%B0%9C%EC%83%9D%ED%95%B4%EC%9A%94\">이렇게 하면 데드락이 발생해요</a></li>\n<li><a href=\"#circular-wait-prevetion%EC%9C%BC%EB%A1%9C-%ED%95%B4%EA%B2%B0%ED%95%B4%EB%B4%90%EC%9A%94\">Circular Wait Prevetion으로 해결해봐요</a></li>\n<li><a href=\"#%EB%B0%A5-%EB%A8%B9%EB%8A%94-%EA%B3%B5%EA%B0%84%EC%9D%80-%EB%94%B0%EB%A1%9C-%EB%B6%84%EB%A6%AC%ED%95%98%EA%B3%A0-%EC%9D%B8%EC%9B%90-%EC%A0%9C%ED%95%9C%EC%9D%84-%EB%91%AC%EC%9A%94\">밥 먹는 공간은 따로 분리하고, 인원 제한을 둬요</a></li>\n<li><a href=\"#monitor%EB%A1%9C-%ED%95%B4%EA%B2%B0%ED%95%B4%EC%9A%94\">Monitor로 해결해요</a></li>\n</ul>\n</li>\n</ul>"},"previous":{"fields":{"slug":"/multiprocessor-scheduling/"},"frontmatter":{"title":"👥 Scheduling을 어떻게 해야 잘 했다고 소문이 날까? - Multiprocessor"}},"next":{"fields":{"slug":"/react-hooks-guide-with-examples/"},"frontmatter":{"title":"🪝 리액트 훅(React Hooks) 예제와 함께 톺아보기"}}},"pageContext":{"id":"633997d7-a207-5b82-91ba-a2d0eb569d38","previousPostId":"10a7a7f3-8caa-552b-adde-8882b1f8bff5","nextPostId":"27d75176-5f2f-5268-90a9-ae14877f5624"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}