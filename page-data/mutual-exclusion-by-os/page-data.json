{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/mutual-exclusion-by-os/","result":{"data":{"site":{"siteMetadata":{"title":"성훈 블로그"}},"markdownRemark":{"id":"4731dcc2-6182-51ca-9f5c-da0807f06419","excerpt":"Software 로직으로 이리 보고 Hardware Instruction으로 저리 봐도 로 가짜로 대기하는 Busy-Waiting이슈를 피할 수는 없었고 이외에도 다른 이슈가 생기기 마련이었습니다 그럼 어떡하면 좋죠..?  사실 프로세스 다루는 일은 OS가 전문입니다 그런 OS…","html":"<p>Software 로직으로 이리 보고<br>\nHardware Instruction으로 저리 봐도<br>\n<code class=\"language-text\">while</code>로 가짜로 대기하는 <strong>Busy-Waiting</strong>이슈를 피할 수는 없었고<br>\n이외에도 다른 이슈가 생기기 마련이었습니다<br>\n그럼 어떡하면 좋죠..?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 527px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b44a7c601af199c2b2ebd24b10bba70f/44385/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 53.79746835443038%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAYAAAB/Ca1DAAAACXBIWXMAAA7DAAAOwwHHb6hkAAACjUlEQVR42kVT30uaYRT+7rf/Yexv2O6322CDbrb/YcFgo92MVkYrSfFiTgURZmtSJmaF5fz8sYj6VPz5qWVphvZDyaxUikwoeXbOC2svvDfnnPec5zzP80qZTAbFYhGlUgmKomBubg7pdBper1fE9vf3Hy7X8a1Wq7BYLDAajVBVFZFIBIXtbcTjcUjNZhN8er2eaCjLMg4ODhAMBnF/f49yuYzd3V0Rq9frohmfUCgkcrVaDTWKd25uUKah0tnZmSiIxWKIRqMPaCuVCjjHyHZ2drC3t4dCoSAQtVttKFtb6FKTAsUrVO8Zeo+MmoV0cXGBZDIJn88nUITDYTF5m1bgRtfX1+h0Omg0Gjg+PsYRITw/P0ckFsUf2qJyegrvh4/4JUn4/uo1pPn5ebhcLrEWI9TpdBgfH4fBYBDNLy8v0W630af17+h2ul3IYxpEllcQJyDVeg0xhwPud0OwvXgJiblyOp24vb1FKpUSBE9MTIAHMZJsNotgIIBZEuubTo+vz57D8egxhp88hUf2o1wsYXl1FSvEadjjgcSPGF2XJjNn+XweVqsVbrdbcMucKjQkxIPfvIVMjQKDg/g8MADN9DS+jIxAMzYG7eQkNjY2/qv8j0tWeWFhQYgkEJKtXGShqm8NYeIpa/+BLtUHVtcEELbP6Ogo/H6/EE66uroSCbZMq9WCVqvF4uKiSPb7fWxtbuI3DXH9nIXyaRi5UAAuWi2jZgQIpshutwsR2VYSK8gccoDP0tKS8BhTwD7kNWw2G1okTJ5ccHRyApVQT01NwUFi5HI56PV6zMzMIJFIQGIkrPImIWHT8s/h1dk6rDo3ZxSHh4dI0k9gkThnMplgNpvFqvyeaVpfX8dfb3LRtQeJflYAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이렇게 된 이상\"\n        title=\"\"\n        src=\"/static/b44a7c601af199c2b2ebd24b10bba70f/44385/image-2.png\"\n        srcset=\"/static/b44a7c601af199c2b2ebd24b10bba70f/c26ae/image-2.png 158w,\n/static/b44a7c601af199c2b2ebd24b10bba70f/6bdcf/image-2.png 315w,\n/static/b44a7c601af199c2b2ebd24b10bba70f/44385/image-2.png 527w\"\n        sizes=\"(max-width: 527px) 100vw, 527px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>사실 프로세스 다루는 일은 OS가 전문입니다<br>\n그런 OS가 미리 만들어두고 제공하는, Mutual Exclusion을 위한 툴이 있는데<br>\n<strong>Semaphore</strong>와 <strong>Monitor</strong>입니다</p>\n<p>바로 알아봅시다</p>\n<h1>Semaphore</h1>\n<p><strong>Semaphore</strong>는 하나의 구조체 변수로, 정수 변수 하나와 큐를 가집니다.<br>\n또한 이 semaphore는 세 가지의 <em>atomic</em>한 operation을 가지는데,</p>\n<ul>\n<li>Semaphore 정수 변수를 초기화</li>\n<li><code class=\"language-text\">SemWait</code> : 정수 변수의 값을 하나 빼고, 결과가 0보다 작으면 현재 프로세스(값을 하나 뺀 프로세스)를 block시킨다 => 큐로 이동</li>\n<li><code class=\"language-text\">SemSignal</code> : 정수 변수의 값을 하나 더하고, 결과가 0보다 작거나 같으면 큐에서 (블락되었던) 프로세스를 하나 꺼내준다.</li>\n</ul>\n<p>Semaphore의 구조와 operation을 코드처럼 나타내보면 다음과 같습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">struct</span> <span class=\"token class-name\">semaphore</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">int</span> count<span class=\"token punctuation\">;</span>\n\tqueueType queue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">semWait</span><span class=\"token punctuation\">(</span>semahore s<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\ts<span class=\"token punctuation\">.</span>count<span class=\"token operator\">--</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 하나 빼고,</span>\n\t<span class=\"token keyword\">if</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>count <span class=\"token operator\">&lt;</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//뺀 결과가 0보다 작으면,</span>\n\t\t<span class=\"token comment\">/* place this process in s.queue */</span> <span class=\"token comment\">//큐에 넣고</span>\n\t\t<span class=\"token comment\">/* block this process */</span> <span class=\"token comment\">//블락</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">semSignal</span><span class=\"token punctuation\">(</span>semaphore s<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\ts<span class=\"token punctuation\">.</span>count<span class=\"token operator\">++</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//하나 더하고,</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>count <span class=\"token operator\">&lt;=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//결과가 0보다 작거나 같으면,</span>\n\t\t<span class=\"token comment\">/* remove a process P from s.queue */</span> <span class=\"token comment\">//큐에서 아무거나 하나 제거하고</span>\n\t\t<span class=\"token comment\">/* place process P on ready list */</span> <span class=\"token comment\">//레디 큐로 보낸다 (실행하라고 보냄)</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">semWait</code>을 실행하면, <code class=\"language-text\">s.count</code>값에 따라 <em>블락되어 <code class=\"language-text\">s.queue</code>로 들어갈 수도, 넘어갈 수도</em> 있습니다.</li>\n<li><code class=\"language-text\">semSignal</code>을 실행하면, <code class=\"language-text\">s.count</code>값에 따라 <em><code class=\"language-text\">s.queue</code>에서 프로세스를 하나 꺼내 실행가능하게</em> 할 수 있습니다.</li>\n</ul>\n<p>그럼, <code class=\"language-text\">s.count</code>값을 2으로 초기화한 경우 <code class=\"language-text\">semWait</code>과 <code class=\"language-text\">semSignal</code>에 따라 어떻게 되는지 생각해봅시다</p>\n<ul>\n<li><code class=\"language-text\">s.count==2</code>이고, <code class=\"language-text\">semWait</code>: <code class=\"language-text\">s.count--</code> 이후 값이 1이므로 블락되지 않음</li>\n<li><code class=\"language-text\">s.count==1</code>이고, <code class=\"language-text\">semWait</code>: <code class=\"language-text\">s.count--</code> 이후 값이 0이므로 블락되지 않음</li>\n<li><code class=\"language-text\">s.count==0</code>이고, <code class=\"language-text\">semSignal</code>: <code class=\"language-text\">s.count++</code> 이후 값이 1이므로, 큐에서 프로세스를 꺼내지 않음(사실은, 큐에 프로세스가 하나도 없음)</li>\n<li><code class=\"language-text\">s.count==1</code>이고, <code class=\"language-text\">semWait</code>: 위에서와 동일하게, 블락되지 않음</li>\n<li><code class=\"language-text\">s.count==0</code>이고, <code class=\"language-text\">semWait</code>: <code class=\"language-text\">s.count--</code> 이후 값이 -1이므로, <u>해당 프로세스는 블락되어 큐에 들어감</u>\n<ul>\n<li><code class=\"language-text\">s.queue</code>에는 프로세스가 1개</li>\n</ul>\n</li>\n<li><code class=\"language-text\">s.count==-1</code>이고, <code class=\"language-text\">semWait</code>: <code class=\"language-text\">s.count--</code> 이후 값이 -2이므로, 해당 프로세스는 블락되어 큐에 들어감\n<ul>\n<li><code class=\"language-text\">s.queue</code>에는 프로세스가 2개</li>\n</ul>\n</li>\n<li><code class=\"language-text\">s.count==-2</code>이고, <code class=\"language-text\">semSignal</code>: <code class=\"language-text\">s.count++</code> 이후 값이 -1이므로, <u>큐에서 프로세스를 하나 해방</u>\n<ul>\n<li><code class=\"language-text\">s.queue</code>에는 프로세스가 1개</li>\n</ul>\n</li>\n<li><code class=\"language-text\">s.count==-1</code>이고, <code class=\"language-text\">semSignal</code>: <code class=\"language-text\">s.count++</code> 이후 값이 0이므로, 큐에서 프로세스를 하나 해방\n<ul>\n<li><code class=\"language-text\">s.queue</code>에는 프로세스가 0개</li>\n</ul>\n</li>\n<li><code class=\"language-text\">s.count==0</code>이고, <code class=\"language-text\">semSignal</code>: <code class=\"language-text\">s.count++</code> 이후 값이 1이므로, 큐에서 프로세스를 꺼내지 않음(사실은, 큐에 프로세스가 하나도 없음)</li>\n</ul>\n<p>구구절절 썼는데요.. 규칙이 보이시나요?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 512px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/21c49c01b21e0334ed2ec892ca13a372/01e7c/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 60.12658227848101%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC50lEQVR42gHcAiP9AIeMjj9FSTAyNTAzNSsvNCMpMS4uMzQ2OjAzNi0yNC40NRYbHUdLSqmpoXJuboV8e5WQh5OKgqWQh7ikmgA3PUEyNjoqLTAvMzI7RWVkbplUVlk4PENSWGBGTFFXW1t3fICIjIyjpJpnaF1qa2ibk4h9dG11cGt7dnEARkpLREdFOTo5LS8wTVJdiYqXT1NVHiUubnaGQ0hROD48eYB+hIiBmpqXTUw6V11GPkM+EBMXFBkcHyMnAE5YREtNUDU5OE9RTl9kZkpMUD9ERy40O2JwdkhhYDE4Ph0kLUNNQIGRYTY5OB8kITs/QVFUV09TVlNXWgAqNyUkKSsfIiNNTUxiYGBdYWhIT1MyNzlAY1sykXBAUE0WISYsOx9WeA06QDErMDE6Pz9iZmmEiYuYnaAAKDUuJzUvGSolO0pIjI6Tmp2mWGFoLzU1bXBrS41wKFI+Rl1XTF5DWnsSSlxEO0NEFxgWJSYmYmlsgnh4AKmuq7/Dw93Exu20ufi6wNe1uUZRVy0zNXNxcWCRfDFXQ2JuaE9gSmZvGX5rNWtZQD0/QCElLA8ZI045OADu6/Dg3OK4pKiSf39tZ2tTVFdFTE4oMDNTW15BgmpEZ1F3fHBQYlE4SiZRUSdKUDg6TkI0SUQuTlJsTkgA6OLk3t3eWmRWSkcoPkE6FB4jFx8jHycnP0lHLmtQPWVMcHxsbHxrYHVhSGVWW1xMR1A6IUIuMk07VlhHAM3Q0HeDgkxaUGFcR3BeMjs7MS8uIxMaHRMfJQ8fJS5HOTlVQTpZRExnUVBuXJyRhoeHdj9lUj9gTThXRABqd3FNXFU5T0ZJWkxjZl6Ic0S9ixVbSBtPRCKhfA+LhkdFZFxLY1FJYE02V0F9fW6Vk4Zrhnd9k4R3kIAAbX1zV2ZcPUxCKz8zPVJEcHdrq4xI56oQ+cAb9cQ/ybmTm6ahZYFyTW1cQGRQhXpniX9qM2JLS3NeXoRxuM/+UEI4XGwAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"주차장\"\n        title=\"\"\n        src=\"/static/21c49c01b21e0334ed2ec892ca13a372/01e7c/image.png\"\n        srcset=\"/static/21c49c01b21e0334ed2ec892ca13a372/c26ae/image.png 158w,\n/static/21c49c01b21e0334ed2ec892ca13a372/6bdcf/image.png 315w,\n/static/21c49c01b21e0334ed2ec892ca13a372/01e7c/image.png 512w\"\n        sizes=\"(max-width: 512px) 100vw, 512px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>결국 semaphore의 값, 즉<br>\n<code class=\"language-text\">s.count</code>의 값은 음수냐 양수냐에 따라서</p>\n<ul>\n<li><code class=\"language-text\">s.count &lt;= 0</code> : <code class=\"language-text\">s.count</code>값 == <strong>블락되어 큐에 들어가 있는 프로세스 개수</strong></li>\n<li><code class=\"language-text\">s.count >= 0</code> : <code class=\"language-text\">s.count</code>값 == <strong>블락되지 않고 지나갈 수 있는 프로세스 개수</strong></li>\n</ul>\n<p>라는 결론에 도달합니다</p>\n<p>그럼 이제, Semaphore로 C.S에 한 번에 한 프로세스만 진입하도록<br>\nMutual Exclusion을 보장하려면..</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\">semaphore s <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span>\n<span class=\"token function\">semWait</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token comment\">/* Critical Section */</span><span class=\"token punctuation\">;</span>\n<span class=\"token function\">semSignal</span><span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span></code></pre></div>\n<p>이렇게, semaphore 값을 1로 초기화하여 단 하나의 프로세스만 <code class=\"language-text\">semWait</code>를 통과할 수 있도록 하고,<br>\nC.S에 들어가기 전에 <code class=\"language-text\">semWait</code>를 실행하여 semaphore 값이 1이었다면 진입, 0 이하였다면 대기하도록 하며,<br>\nC.S를 나오면 <code class=\"language-text\">semSignal</code>로 대기하던 프로세스를 하나 깨워줍니다.</p>\n<p>매우 간단해졌죠??</p>\n<h2>Binary Semaphore</h2>\n<p>위에서 이야기한 semaphore는 굳이 따지면 <em>Counting Semaphore</em>이고,<br>\n<em>Binary Semaphore</em>도 있는데요<br>\n이 경우 정수 변수인 <code class=\"language-text\">int count</code> 대신 <code class=\"language-text\">enum {zero, one} value;</code>와 같은 ON/OFF값을 가집니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 225px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/b32bc46d44680817f9d75ed7dad959f2/3684f/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 100%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAIAAAAC64paAAAACXBIWXMAAAsTAAALEwEAmpwYAAAD+klEQVR42n2U60+aVxzH+27/xJK9abIu65ZdrLMKyAMi1+cCwnPjIgID0VK5CPLwcPXxAsqwOHVLNucEFHYxcVuWzBdbuy7Zur2A6mLii85YK/aiqGmMNVPXgZK+WNZ+c87JyTn5nG9+Oed8zz091T8v1NPn6NwZeVLpJ8+DTyr6734V3t/fz+fzDx88WF1dLW5uFgqFpaWllZWVv+7cWVy8vby8fHR09P/Ox8fHPywsTKdT2S9ymdnZ3MzMTDpTblOTk5lUam5u/vuFn278cuvmr3/8duv3fL6wuPhn+fDN4v0KXNrZURGYQCIGmgV8fqOIzVKAMAQiMimoREm0VW+nGLov2enwdtpsPpoOhcPObs9MNluBt0slUk0iMIyrUEQixBFIo9OTJrPW/D5hbNNaTOGh0cRE2hNkKNpHB/xemrJ0Wqcz6Qq8W9oh5ApIKCSxMggrCRw3GhCttvWKRaVVawxtwWgimvyEYgapUMDl9bgpyuZ0fPb51Knz1jauUCoQuRzDIAKVt5HKdgOk02Fms5TASL3OHexj4hPe3gEH7aX7In3xISoSyH395anz7t6VbgdIqEANKSIVslYUMWqEWq2SJ4q9Vt/A5hhs3Ux83BUIu4P+ULQ/HBtwh+jZM7hUKoFkCwCLII0aUEr4OCjT4YBGo3+P+/PL9YBY0kEzkcR4f2JkKDk6NPrh8NhoJBad+3a+Am+VtsSojAs2y0icDYs4LWKxlhCq1Wxek4THfbMFMvrDgWsTnuhgYHigLxGPXksy0dj8N9+d1rxTkqAwW8KX4CiAwFwFLFDjdUrFO3YTcf2rl4wI7g8Ekh+ZvD1tbquXCQb6GTvlSefOrmq7JEXlbGkTgEjYkLgWFLK02HkSedVnMRZ+fMXequ/2hkc+bnM5ja6OYD8TGGTsPncqN3tW806jVPB6Qw1HDr4r4r3RxKlXKS5higuw6LxMUAOCJqcvMjxmdDqtlMMZ8Xb39ljcHalspvq2r9+84fL7QA3xFpd1sb62QSZhIfClRqCmjlXLBkwOb+/wOGm1IibS6rN30S6jzfxpaqoKHz45PHhyYHE6LjZcfpvTwJZJOSB0mdtUz+UDUrjd7e+Nj5scLlW7wey22309ZsfVyfR0BS5/rcPDw/KoMugv1NbU8rg8COZKwToWwOLwoBbM0uXx939A0SHa5wuFQgzDlCe5XK7qnL9dyOSyli4bqtMIRBIFSoyOjcXjCRRFuQBw1R2IxJIYhkmbOSqQR8ibZfy6sZFYFd4obhSLxd3d3aOjv4sb99bX1w8ODsrre3t7a3fX7z/aevhoe7O4ea+su2sb62tra6uPH+9V4Wd6ljjl4Cj/8xcE0FkY/AuWOtVaEMbtZAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"신호등\"\n        title=\"\"\n        src=\"/static/b32bc46d44680817f9d75ed7dad959f2/3684f/image-1.png\"\n        srcset=\"/static/b32bc46d44680817f9d75ed7dad959f2/c26ae/image-1.png 158w,\n/static/b32bc46d44680817f9d75ed7dad959f2/3684f/image-1.png 225w\"\n        sizes=\"(max-width: 225px) 100vw, 225px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">struct</span> <span class=\"token class-name\">binary_semaphore</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">enum</span> <span class=\"token punctuation\">{</span>zero<span class=\"token punctuation\">,</span> one<span class=\"token punctuation\">}</span> value<span class=\"token punctuation\">;</span>\n\tqueueType queue<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">semWaitB</span><span class=\"token punctuation\">(</span>binary_semaphore s<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>value <span class=\"token operator\">==</span> one<span class=\"token punctuation\">)</span>\n\t\ts<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> zero<span class=\"token punctuation\">;</span> <span class=\"token comment\">//1인 경우에만 0으로 바꾼다 (통과)</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//0인 경우, 이 프로세스를 블락.</span>\n\t\t<span class=\"token comment\">/* place this process in s.queue */</span>\n\t\t<span class=\"token comment\">/* block this process */</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">semSignalB</span><span class=\"token punctuation\">(</span>binary_semaphore s<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>s<span class=\"token punctuation\">.</span>queue is <span class=\"token function\">empty</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span> <span class=\"token comment\">//큐가 비었는지 확인하고,</span>\n\t\ts<span class=\"token punctuation\">.</span>value <span class=\"token operator\">=</span> one<span class=\"token punctuation\">;</span> <span class=\"token comment\">//큐가 비어있으면 1로 돌린다</span>\n\t<span class=\"token keyword\">else</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//큐에 프로세스가 남아있다면 레디 큐로 하나 풀어준다</span>\n\t\t<span class=\"token comment\">/* remove a process P from s.queue */</span>\n\t\t<span class=\"token comment\">/* place process P on ready list */</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이 경우 큐에 프로세스가 얼마나 있다거나, 몇 개나 통과할 수 있다거나, 이런 것은 알 수없지만<br>\n<code class=\"language-text\">count</code>변수를 따로 유지하거나 할 수도 있긴 합니다<br>\n그리고 <a href=\"https://www.geeksforgeeks.org/mutex-vs-semaphore/\">geeksforgeeks</a>에 따르면<br>\n전에 썼던 <a href=\"https://sungpaks.github.io/multi-threading-in-cpp/\">C++에서 멀티스레딩 써보는 포스팅</a>에서 사용했던 <strong>Mutex</strong>가 이러한 Binary Semaphore의 일종이라는 것 같습니다<br>\n딱 하나만 지나갈 수 있게 허락하는 Semaphore로 상호배제를 구현하는 셈.</p>\n<h1>Monitors</h1>\n<p><strong>Monitor</strong>는 Program-Language Construct, 즉 어떤 라이브러리 함수나 패키지같은 것이라고 보시면 되고</p>","frontmatter":{"title":"OS 툴로 Critical Section 통제하기 : Mutual Exclusion By Semaphore & Monitor","date":"April 20, 2024","description":"OS에몽 도와줘~","tag":["OS"]}},"previous":{"fields":{"slug":"/mutual-exclusion-hardware-approach/"},"frontmatter":{"title":"🙋 선착순 한 명 Critical Section!! : Mutual Exclusion Hardware Approach"}},"next":null},"pageContext":{"id":"4731dcc2-6182-51ca-9f5c-da0807f06419","previousPostId":"b60ea0f0-b4fe-55cb-8688-8f0aa372e139","nextPostId":null}},"staticQueryHashes":["2841359383"],"slicesMap":{}}