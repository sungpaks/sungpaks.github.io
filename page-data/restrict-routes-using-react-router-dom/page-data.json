{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/restrict-routes-using-react-router-dom/","result":{"data":{"site":{"siteMetadata":{"title":"조성개발실록","siteUrl":"https://sungpaks.github.io"}},"markdownRemark":{"id":"d845e573-7c50-58a9-a3d0-00875eaa2f4a","excerpt":"아시다시피, React…","html":"<p>아시다시피, React는 미리 준비된 페이지를 가져다 보여주는 것이 아닌<br>\n클라이언트 사이드에서 자바스크립트를 사용하여 동적으로 뷰를 업데이트합니다.<br>\n이는 곧 경로 하나 깜빡 하지 않고도 모든 페이지를 그려내게 된다는 것인데<br>\n이렇게 페이지를 적당히 필요한 부분만 다시 그리며 뷰를 바꾸는 것을 <strong>SPA (Single Page Application)</strong> 이라고 하고<br>\n요청에 따라 미리 준비된 페이지를 보여주는 것은 <strong>MPA (Multi Page Application)</strong> 이라고 합니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d2fb08bdf156b14c70ee4e839f886c14/774b6/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.65822784810127%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAABGElEQVR42o2SyY6DMBBE/f9/iIQ4MIhl2Cbse+bJFTkIckgfrG67ylXutnneYlmWpmnatt22jZKkKIrjOO5Ic9/6OwVlnudBEKzr+hW5qqosy1Cr65ryYaPrOvKL/gfyMAxA+76f51m2EectXykT+75P0wRfbik/wt5kWUJWJtUt+GEYsnn3fFXm2PM8HnyGRlFUlqXK4xRvMsZQY0KISNPFZoMu4uKqzKu4hqnEcUxvuIKcxF2q/iEOeRxHBCh5Gvvm1waDAcoBOQhnm2n5vv9jI0kSlLBA88Fg50WmRgRNQLInMlBO1UKssZmmKYkmZ6DpS0gZHKsjcx13oQ+aFQH9Gbkzgw03GN6mvyEyIHZQQ18fjtVh/gF+2vQK5aXuWwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"MPA &amp; SPA\"\n        title=\"\"\n        src=\"/static/d2fb08bdf156b14c70ee4e839f886c14/f058b/image.png\"\n        srcset=\"/static/d2fb08bdf156b14c70ee4e839f886c14/c26ae/image.png 158w,\n/static/d2fb08bdf156b14c70ee4e839f886c14/6bdcf/image.png 315w,\n/static/d2fb08bdf156b14c70ee4e839f886c14/f058b/image.png 630w,\n/static/d2fb08bdf156b14c70ee4e839f886c14/774b6/image.png 738w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이런 식으로 된다는 것입니다</p>\n<p>근데 이렇게 SPA식으로 하면<br>\n로그인 페이지와 내 정보 페이지를 어떻게 구분할까요?<br>\nMPA라면 URL로 <code class=\"language-text\">sungpaks.com/login</code>, <code class=\"language-text\">/sungpaks.com/my-page</code> 이런 식으로 구분될 수 있습니다<br>\n그런데 SPA는 그렇지 못하죠.. 그냥 <code class=\"language-text\">sungpaks.com/</code>인데 어떨 때는 로그인 페이지고 어떨 때는 내 정보 페이지인겁니다<br>\n이러면 뒤로가기 또는 특정 페이지로 이동하기처럼, 경로가 필요한 동작이 제한적입니다.<br>\n특히 가장 중요한! 인증 여부에 따라 접근을 허가하거나 제한하는 일이 까다롭겠죠</p>\n<p>그래서 <a href=\"https://reactrouter.com/en/main\">React Router</a>라는 것이 등장하여<br>\n이 경로를 정의하고 구분하는, <strong>라우팅</strong>을 쉽게 할 수 있게 해주었습니다<br>\n이것만 있으면 제 맘대로 \"여기는 <code class=\"language-text\">/login</code> 경로에 해당하는 페이지야\" 라고 정의할 수 있습니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 264px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/d1a47b439b056700c0809621740561ae/e61aa/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 72.15189873417721%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAIAAACgpqunAAAACXBIWXMAAAsTAAALEwEAmpwYAAACZElEQVR42k2S20uqURDFv//VJ1MIlEzQB3vTINNIrB4CFbHSECs0oZJIMjXvl7Sbl9TqHDxqx7Q09fzUlzMPH/vbe9aatWZGeH5+/jOLdrvdarV+/xcvLy93d3culyufz/P0axak3c6iXC4LjUZjNBq9v78/PDzc399zVSwWOXx/f3MP3maz1Wq1yWQyGAy45JBMJiHlaQr++voiOxqN3tzccJtIJMLhMBXIq1arDocD8HA4/DsLGOPxOAVeX1+Fer3Of6/Xg5hDs9nsdDrAYCQVU4eHh1CMx2M09/t9nmB/fHyk6hQM7PPzE9jJyQmp29vbFovl4+OjUqnw6na7n56ejo6OZDKZUqmELpPJlEolnApkwAofABR6vd5IJLK4uLi+vg4djYTu+vr6/Pw8GAzq9XqNRpNOp6GgowInHjwez+7uLjZ8Ph91eFMoFHxRTrcvLy/RiXMK7u3tXV1d8TutTIbZbBaLxSaTaW1tTavVGgwGGBGSy+Vw7nQ60UmHCoUC5pHDnGg1wxOos7q6KpFIlpeXcWu1Wjc2NnZ2diiIMFK3trawHQgEorNgIgcHB/v7+xwEKI1Go1qt3tzcRLndbucglUqpjzB0Uvb4+Bg8jmKx2Onp6cXFRSgUwqyQzWbpGRoQo9Pp5p1cWFhYWVlhNsh+e3tjNqlUCkdLS0skoJknTAnYmMwCjEgk8vv9Z2dncrlcpVJRZz5w9FMADAWZBbuIf3ZW4IoMpvXz84MeAPQT2/QM2WCwPWdnQ0ijRzgHz55NK8Pd7Xb5ksFucEYqs517YyrsH5csEngWi3qkFQqFf8SXqvz8butPAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"맘대로하세용\"\n        title=\"\"\n        src=\"/static/d1a47b439b056700c0809621740561ae/e61aa/image-1.png\"\n        srcset=\"/static/d1a47b439b056700c0809621740561ae/c26ae/image-1.png 158w,\n/static/d1a47b439b056700c0809621740561ae/e61aa/image-1.png 264w\"\n        sizes=\"(max-width: 264px) 100vw, 264px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이제 저는 로그인 여부에 따라<br>\n어떤 페이지는 로그인을 해야만 들어갈 수 있고<br>\n어떤 페이지는 로그인을 안 했어야 들어갈 수 있게 하고 싶습니다<br>\n예를 들어, 마이페이지는 당연히 로그인을 해야 하니, 안 했다면 로그인 페이지로 리다이렉션<br>\n로그인 페이지는 응당 로그인을 안 했어야 들어가게, 로그인 했다면 홈으로 리다이렉션<br>\n이런거요</p>\n<p>React Router와 함께 이를 구현해봅시다</p>\n<h1 id=\"react-router\" style=\"position:relative;\"><a href=\"#react-router\" aria-label=\"react router permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>React Router</h1>\n<p><a href=\"https://reactrouter.com/en/main/start/tutorial\">React Router 튜토리얼</a>에 시작하는 법이 잘 나와있습니다<br>\n먼저 <code class=\"language-text\">npm install react-router-dom</code>으로 의존성을 설치해주시고</p>\n<p><code class=\"language-text\">/en/main/start/tutorial</code>같은 우리가 생각하는 url path는 <em>browser router</em> 라고 합니다.<br>\n우리는 이 browser router를 만드는 것인데요</p>\n<p>튜토리얼에 따르면, 먼저</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">\n<span class=\"token keyword\">import</span> <span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span>\n  createBrowserRouter<span class=\"token punctuation\">,</span>\n  RouterProvider<span class=\"token punctuation\">,</span>\n<span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router-dom\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">createBrowserRouter</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">[</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token literal-property property\">element</span><span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">{</span>\n\t\t<span class=\"token literal-property property\">path</span><span class=\"token operator\">:</span> <span class=\"token string\">\"/hello\"</span><span class=\"token punctuation\">,</span>\n\t\t<span class=\"token literal-property property\">element</span><span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">hello world!</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">,</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">]</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 <code class=\"language-text\">createBrowserRouter</code>로 라우터를 정의하고,<br>\n그 안에 경로와 그에 따른 요소들을 작성해줍니다.<br>\n그런 다음, 최상위 컴포넌트에서, 다음과 같이 작성합니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\">ReactDOM<span class=\"token punctuation\">.</span><span class=\"token function\">createRoot</span><span class=\"token punctuation\">(</span>document<span class=\"token punctuation\">.</span><span class=\"token function\">getElementById</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"root\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span>\n  <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RouterProvider</span></span> <span class=\"token attr-name\">router</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>router<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n  </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">React.StrictMode</span></span><span class=\"token punctuation\">></span></span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>미리 정의한 라우터를 <code class=\"language-text\">&lt;RouterProvider></code>에 집어넣어주면 완성입니다.</p>\n<p>그런데 좀 더 리액트스러운 방식으로, <a href=\"https://reactrouter.com/en/main/utils/create-routes-from-elements\">createRoutesFromElements</a>를 사용하여 아래와 같이 할 수도 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">createBrowserRouter</span><span class=\"token punctuation\">(</span>\n\t<span class=\"token function\">createRoutesFromElements</span><span class=\"token punctuation\">(</span>\n\t\t<span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/hello<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Hello</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t\t</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n\t)\n)</span></code></pre></div>\n<p>게다가 상위 <code class=\"language-text\">Route</code>로도 감싸서, 당초 원했던 <strong>권한에 따른 경로 분류</strong>를 구현할 수 있습니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 448px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/463999527a34a27db4690a2c00b35c58/33b38/image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 66.45569620253164%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACd0lEQVR42j1SO0iqYRj+TprBmRqU1hptyEVs0TZpcDiDQ9jk0CAEXgbRaCjJC1hN5hYkCjWIoSIiaKGiZqGloQclb2gXJelqQVp5Hn8PPcPHd3nf93me9/1Iv9/vdrtfFLDpU6jX65VK5fb2ttls9no93Hx/f/+sj4+P5+fn5XKZ4BwIBF5eXkqlUjqdHiZfX1+fnZ3VarVisdhqtXCD0nd3d+Fw2OVy2e32g4ODRCJBcHtycoJdKBRKJpM4IvTy8tLn88Xj8b8UPj4+kDA9PT0xMfGbAovFEovFA+aHhwfIazQa0IkjxO/t7dlsttPTU1ClUqmrq6u1tTUmk0kIGR0d/UVhZGSE/PgcasMai8W0Wu3x8TFsQxTWbDYLHkSDk8Fg0Ol0BgXy/v7++fkJQuQgFMoXFhZmZmY2NjaQg8Z0Oh04FwgEcrlcJBKBfGxsDPk0Go38oeBwOPb395GwurrK4/EQsb29DSMWi+Xp6eni4mJ9fR1agsEgm80eih/IBrhcLp/PNxqNPQpLS0scDmd5edlgMOj1+p2dHbQd7UC3MR48IeU/M2rMzs6iH1tbWyCBZ4VCsbi4iFpQYbVazWZzJpPBPfRHo9Ef2wDBbn5+3u/3ozDMIwjdkkqlmNPu7q5Op4MjOMf9/f398/OzTCYbHx+fnJzEtAjY5+bmcrnczc3N29sbgpRKpUqlQiYGZqeAhr++vrYoeL1eiUSiVquFQuHAM3pwdHSUz+fxyfAx8YfwSWD18PAQRTFwjKBareIVnqF8c3MTdkwmE5mamopEIu12G2lgxm/BEZqhFuVXVlY0Gk2hUAAnfKHhHo/H7XajrtPp/AcAYud4HYu6WwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이히히 못 가\"\n        title=\"\"\n        src=\"/static/463999527a34a27db4690a2c00b35c58/33b38/image-3.png\"\n        srcset=\"/static/463999527a34a27db4690a2c00b35c58/c26ae/image-3.png 158w,\n/static/463999527a34a27db4690a2c00b35c58/6bdcf/image-3.png 315w,\n/static/463999527a34a27db4690a2c00b35c58/33b38/image-3.png 448w\"\n        sizes=\"(max-width: 448px) 100vw, 448px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>아래처럼요</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">const</span> router <span class=\"token operator\">=</span> <span class=\"token function\">createBrowserRouter</span><span class=\"token punctuation\">(</span>\n  <span class=\"token function\">createRoutesFromElements</span><span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PrivateRoute</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* 로그인이 필요한 페이지 정의 */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/home<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Home</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">PublicRoute</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n        </span><span class=\"token punctuation\">{</span><span class=\"token comment\">/* 로그인 없이 접근하는 페이지 정의 */</span><span class=\"token punctuation\">}</span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">default page</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span>div</span><span class=\"token punctuation\">></span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n        </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Route</span></span> <span class=\"token attr-name\">path</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/login<span class=\"token punctuation\">\"</span></span> <span class=\"token attr-name\">element</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Login</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">Route</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">)</span></code></pre></div>\n<p>음.. 근데 사실 <code class=\"language-text\">&lt;PrivateRoute /></code>와 <code class=\"language-text\">&lt;PublicRoute /></code>는 공짜로 주어지는게 아니라서 직접 작성해줘야 합니다</p>\n<h1 id=\"privateroute\" style=\"position:relative;\"><a href=\"#privateroute\" aria-label=\"privateroute permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>PrivateRoute</h1>\n<p><code class=\"language-text\">&lt;PrivateRoute /></code>에는, \"로그인 상태가 아닌 경우 로그인 페이지로 리다이렉션, 그게 아니면 통과!\"<br>\n이렇게 되는 로직을 작성해야겠죠?<br>\n<code class=\"language-text\">AuthContext</code>가 최상위 컴포넌트에서 제공되어서, <code class=\"language-text\">useContext(AuthContext)</code>로 언제든 <code class=\"language-text\">isAuthenticated</code> 여부를 가져올 수 있다고 가정합시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> Navigate<span class=\"token punctuation\">,</span> Outlet <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react-router-dom\"</span>\n<span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> useContext <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"react\"</span>\n<span class=\"token keyword\">import</span> AuthContext <span class=\"token keyword\">from</span> <span class=\"token string\">\"../context/AuthContext\"</span>\n\n<span class=\"token keyword\">export</span> <span class=\"token keyword\">default</span> <span class=\"token keyword\">function</span> <span class=\"token function\">PrivateRoute</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">const</span> <span class=\"token punctuation\">{</span> isAuthenticated <span class=\"token punctuation\">}</span> <span class=\"token operator\">=</span> <span class=\"token function\">useContext</span><span class=\"token punctuation\">(</span>AuthContext<span class=\"token punctuation\">)</span>\n\n  <span class=\"token comment\">/* 다른 필요한 로직들 */</span>\n\n  <span class=\"token keyword\">return</span> isAuthenticated <span class=\"token operator\">?</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Outlet</span></span> <span class=\"token punctuation\">/></span></span> <span class=\"token operator\">:</span> <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">Navigate</span></span> <span class=\"token attr-name\">to</span><span class=\"token attr-value\"><span class=\"token punctuation attr-equals\">=</span><span class=\"token punctuation\">\"</span>/login<span class=\"token punctuation\">\"</span></span> <span class=\"token punctuation\">/></span></span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>그럼 간단히 이렇게 쓰면 되겠습니다.<br>\n<code class=\"language-text\">&lt;Outlet /></code>으로 하위 Route로 통과시킬 수 있으며,<br>\n<code class=\"language-text\">&lt;Navigate to={path}></code>로 원하는 Route로 리다이렉션시킬 수 있습니다</p>\n<p><code class=\"language-text\">AuthContext</code>말고도 전역 상태 관리 라이브러리를 이용하여 인증 여부를 어디서든 볼 수 있게 해도 괜찮겠네요<br>\n저같은 경우는 <code class=\"language-text\">AuthContext</code>라는 context를 사용하기로 했으니</p>\n<div class=\"gatsby-highlight\" data-language=\"jsx\"><pre class=\"language-jsx\"><code class=\"language-jsx\"><span class=\"token comment\">// App.jsx</span>\n\n<span class=\"token keyword\">function</span> <span class=\"token function\">App</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">return</span> <span class=\"token punctuation\">(</span>\n    <span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">AuthProvider</span></span><span class=\"token punctuation\">></span></span><span class=\"token plain-text\">\n      </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;</span><span class=\"token class-name\">RouterProvider</span></span> <span class=\"token attr-name\">router</span><span class=\"token script language-javascript\"><span class=\"token script-punctuation punctuation\">=</span><span class=\"token punctuation\">{</span>router<span class=\"token punctuation\">}</span></span> <span class=\"token punctuation\">/></span></span><span class=\"token plain-text\">\n    </span><span class=\"token tag\"><span class=\"token tag\"><span class=\"token punctuation\">&lt;/</span><span class=\"token class-name\">AuthProvider</span></span><span class=\"token punctuation\">></span></span>\n  <span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>이렇게 <code class=\"language-text\">Provider</code>로 감싸줬습니다</p>\n<h1 id=\"navigate-location\" style=\"position:relative;\"><a href=\"#navigate-location\" aria-label=\"navigate location permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>navigate, location</h1>\n<p>또한 React Router는 경로 관리와 관련하여 다른 편한 기능들도 제공하는데</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 218px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/9986fcd76ab8cf78ccb56e13f6e96da1/5c416/image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 105.69620253164558%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAVCAIAAADJt1n/AAAACXBIWXMAAAsTAAALEwEAmpwYAAAFDElEQVR42gEBBf76AEhLQCcmKCUpNS4xPygnNyUkNCAfLTU5T09XgkRXbjtnbUp0mUCGjidzdixgWlJ8gYm3wG64tWe8ll+1pABlYmk4OkgmLD4qKjgoKDciIjIeGykvLkI8Yn8lfZEklasjmbAkmLIkl60ii5wzhZN3pq6v3dRixLyN0soAZ1lMNDY/KjE/MjBAJiU2IiMzMzNGJV1sI5yuI6C4Jpq1Jpm1J5m0JZuzJp62H5yzNJeni6+/nrfRoLPMAD02JkBEUCYpNiwrOCEhLjIxQD5ygCGesSSbsyaXsiaZtCiatCOYtCWZtSeYsymatSOdtyR9lltni2VvmQA1OD13fpUkJTESEhckIS4mMj4mkKIkm7UmmLInmbQmmrQfmLIvma8nl6whmrUZkqwflq8gnK9Fc4VucpAANzg/UVRpHBsmEBETIx0oH0lVJqC2J5qzJ5u2JZm0HpmzRJ2nxdPDstLEKpCejsC8f7KwHJqtLn+Sc3eWACEiKUdHYR0dKAcLCxAKDyBgbCWlvRiRqCGTpy6bryWSpb3WyO3r0+Tq1Zy0qeTlz83SwCiXqSSMok1XdAAXFx5VVXQdGyoBBAMGAgIbZHAlnK96s7Guw7fO3s7B0cXo793W28i3vq69w7LY3crX4s8+mKMahZkcLUIAGxsiSElfGBgiAgQDBgAAGFBZj7637OnS7vHe4OLO6uza4OPTkZeJjoyBgn50o6ma2N7KzdnHTnt6N0NYABcbIFBYbCIiLAIBABhVYCdsd9DTw9ziz9fdyurv3Orv2+jt2szax59AT6lBVcbMuuHn0+zw2mtza0NMZgAZFRdINEYWERgXUVYpqL0XipuTrKLs7djf5NHu8uLt8OHu8uHv+uOpe3utZm/r8N3y+ubAyLcXICdXYH4ASRsknxo2HTg/I5qtJIueIJ+1L5CexNPF9/3p6/Hg6/Df7PDf8PTh1+TS4O7b7PPe2N3McniEBA4bXWaBACEeKTkeKSRpdyOhuSR/jSeZrhmbtEB/ib2onMrRvtrg0ufs2ufs2NLWxvTz4/r/6KOopEZMbwwUIkZPaQAnLkMXHSYmeYcjo7kjhZQggZEjobckipmlop22qo21uHu5v6a/xrLCybqTsahKU0wwNEs5Q2ECCREtM0wASkx6NzRZKHuNIaCzKZWoaZCPJo2eCJCkiby529y9jpVmn6eStr2s/P/qc4eGAAgfKDBNLDZVGSI1KjFPAFNWh0lFdTFwhyOesBuQqHKdmo+spk2eqH+ooL/Ftc/YzN/o1q61pqmuqGtthkpQe0dNc0JIbkdMdEhNdwBiZZVcV4tCZYoclagjmKsbfIu3x7bx79nk5tPl6Nnk59fb4dB9kpFQVoRqa59naZliYpFeX41bXYpjZZUAfH+wc3OocHybN5ObGYyfDYCVTYCB3+HL6O/W5+zb4eXTjKWdUYiNjpahf4Grf4Gvdnelc3ShcHGfdnemAKSn04+SxaOnqdHcwaK+sqDHuY+hmWlrfKiurqqupauzn6m7q9fj0NPXv5GUqZ2fyJKUuoyPtoiKs4yOtwCFeIu+v+qprMi3urvPz8XQzMadnKh1dqGAg6h9gJ2YnKTIy8PHy8CvsrOxs8+1uNqoq8uipcWcn8OeoMYAx8LLyszozc/pw8XivsDdu7zcw8Pi0NDr1tft2dzw09TqxsjewMbXyMrfx8jjvsDctbbVrq7Op6fLp6fOYWCOf6bnq8AAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"사차원주머니\"\n        title=\"\"\n        src=\"/static/9986fcd76ab8cf78ccb56e13f6e96da1/5c416/image-4.png\"\n        srcset=\"/static/9986fcd76ab8cf78ccb56e13f6e96da1/c26ae/image-4.png 158w,\n/static/9986fcd76ab8cf78ccb56e13f6e96da1/5c416/image-4.png 218w\"\n        sizes=\"(max-width: 218px) 100vw, 218px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p><a href=\"https://reactrouter.com/en/main/hooks/use-navigate\">useNavigate</a>와 <a href=\"https://reactrouter.com/en/main/hooks/use-location\">useLocation</a> 훅입니다<br>\n다른 어디서도 사용할 수 있게, <code class=\"language-text\">const navigate = useNavigate();</code>, <code class=\"language-text\">const location = useLocation();</code> 이렇게 해두고 시작합니다.</p>\n<p>먼저, <code class=\"language-text\">navigate</code>함수는<br>\n<code class=\"language-text\">navigate(-1)</code>과 같이 써서 뒤로가기를<br>\n<code class=\"language-text\">navigate(\"/to/go\")</code>와 같이 써서 리다이렉션을<br>\n할 수 있는데, 어라</p>\n<blockquote>\n<p>It's usually better to use <a href=\"https://reactrouter.com/en/main/fetch/redirect\">redirect</a> in <a href=\"https://reactrouter.com/en/main/route/loader\">loaders</a> and <a href=\"https://reactrouter.com/en/main/route/action\">actions</a> than this hook</p>\n</blockquote>\n<p>이라고 하네요.<br>\n이에 대해 잠깐 알아보고 가자면</p>\n<ul>\n<li><code class=\"language-text\">redirect</code> : 다른 route로 리다이렉션할 때 사용 (<code class=\"language-text\">navigate(/to/go)</code>처럼)</li>\n<li><code class=\"language-text\">loader</code> : route 요소가 렌더링되기 전에, 해당 요소에 제공할 데이터를 fetch하는 함수를 정의합니다.\n<ul>\n<li><code class=\"language-text\">createBrowserRouter</code>에서, <code class=\"language-text\">loader: async () => fetch(url)</code> 처럼</li>\n</ul>\n</li>\n<li><code class=\"language-text\">action</code> : 해당 경로로 non-get 요청이 호출되면 실행할 콜백함수입니다.</li>\n</ul>\n<p>아차, 이런 data api들은 <code class=\"language-text\">&lt;BrowserRouter></code>같은 라우터에는 사용할 수 없으니 <a href=\"https://reactrouter.com/en/main/routers/picking-a-router\">Picking a Router</a> 여기를 참고합시다.</p>\n<p>그리고 <code class=\"language-text\">location</code>은 현재 경로에 대한 여러 정보를 사용할 수 있습니다.<br>\n예를 들면, <code class=\"language-text\">google.com/foo</code>같은 경로에서<br>\n<code class=\"language-text\">location.pathname</code>으로 <code class=\"language-text\">/foo</code>만 가져올 수 있습니다.</p>\n<p>그리고 <code class=\"language-text\">location</code>과 <code class=\"language-text\">navigate</code>를 조합하여 사용하면<br>\n아까부터 느꼈던.. 그럼 props는 어디로 전달하지?? 라는 충동을 해결할 수 있는데<br>\n바로. <code class=\"language-text\">location</code>과 <code class=\"language-text\">navigate</code>에서 <code class=\"language-text\">state</code>를 사용하는 거십니다.</p>\n<figure>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 304px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a233b350ea4630d83241552aad1bb170/c1724/image-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 54.43037974683544%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAB40lEQVR42mN4hQO8fPnyzZs3X799/fzlMy41DLh0vn379v7du0vmzd+wZu3rVy9evX5NpOaXL1+8+PDxQ29DjaepkZ+V2eqlS4D2v3j+nJBmoKWvXr15//7Royez6kvOzGhYXJUxqaX546fPL4AyIElcmoFyr9+8evLkxfWrr16/OrR07v6+up099We2bnz/8cOrp09evoEYjk0z0OTXL188P7z72e0b7778eHF63/HeitPTGl/dvfns2IH7GxY+v3XjzfsPQE9haH754tW7969vX320bvHzCxceXz24tid6Y03msvK4VX0x55e1np3d+3DXuvu3rr999wHifgakiHn76vGDl8d3nlnQvbQmYUGdR0uacV2y76TsiI5Mi2lVNmu64tZ2Fyxoyb1y9uibN++AmhigOt++e3r/xu6ZDf3poQvrY9uSrSaUunTku3UXRixtyu0vdJtSZNad7rikMXLn9IRdc9MfP3gItIwB7t29C7u3TMmYXRHWm+HXm2m9rNFsRrHF/JqgJfXBUwqt5lUYV0badqZ5za6J2jsz6O6Vg2/efWQAW/v2wa3ru2aV7p0RvLItaEqRR2eq6cIakwmZJrMqgqeWOE0sdFhUbTQh36k13m5Jc9jx9Y0vnj159fo1AN2f9dbu+JbfAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"PPAP\"\n        title=\"\"\n        src=\"/static/a233b350ea4630d83241552aad1bb170/c1724/image-5.png\"\n        srcset=\"/static/a233b350ea4630d83241552aad1bb170/c26ae/image-5.png 158w,\n/static/a233b350ea4630d83241552aad1bb170/c1724/image-5.png 304w\"\n        sizes=\"(max-width: 304px) 100vw, 304px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<figcaption>\nuse-navigate-location-use\n</figcaption>\n</figure>\n<p>예를 들어, <code class=\"language-text\">userId = 1</code>이라는 값을 <code class=\"language-text\">/my-page</code> 경로에 전달하고 싶다면<br>\n<code class=\"language-text\">navigate('my-page', { state : { userId : 1 }})</code>과 같이 작성하여 <code class=\"language-text\">state</code>에 키-밸류 쌍으로 넘겨줍니다.<br>\n그럼 이제, 도착한 컴포넌트에서는<br>\n<code class=\"language-text\">location.state.userId</code>로 해당 정보를 가져올 수 있습니다.</p>\n<h1 id=\"끝\" style=\"position:relative;\"><a href=\"#%EB%81%9D\" aria-label=\"끝 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>끝</h1>\n<p>입니다.</p>","frontmatter":{"title":"⛔ React Router : 경로를 정의하고 접근을 제한하기","date":"August 07, 2024","description":"아 좀 들어갑시다","tag":["React","React-Router"],"ogImage":null},"tableOfContents":"<ul>\n<li><a href=\"#react-router\">React Router</a></li>\n<li><a href=\"#privateroute\">PrivateRoute</a></li>\n<li><a href=\"#navigate-location\">navigate, location</a></li>\n<li><a href=\"#%EB%81%9D\">끝</a></li>\n</ul>"},"previous":{"fields":{"slug":"/til/html-audio-volume-control-with-recoil/"},"frontmatter":{"title":"HTML <audio> 태그로 음향 넣기 & Recoil로 전역 음량관리"}},"next":{"fields":{"slug":"/til/spring-boot-crud-and-trying-hexagonal-architecture/"},"frontmatter":{"title":"Spring Boot CRUD TIL기록 (1)"}}},"pageContext":{"id":"d845e573-7c50-58a9-a3d0-00875eaa2f4a","previousPostId":"f57f5ed1-193e-557a-9776-5fc17d228b39","nextPostId":"23e5322e-4bbf-54d2-a242-6e75fabfb9bd"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}