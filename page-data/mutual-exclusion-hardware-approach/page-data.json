{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/mutual-exclusion-hardware-approach/","result":{"data":{"site":{"siteMetadata":{"title":"조성개발실록"}},"markdownRemark":{"id":"8c7479f0-93fd-5147-9d0f-899d9307b474","excerpt":"저번 포스팅에서 Software 로직으로 Mutual Exclusion을 지키는 방법을 살펴봤습니다 Dekker 선생님이나 Peterson 선생님께서 빈틈없는 알고리즘을 만들어 주셨지만 여전히 문제가 존재했습니다.. 같은 반복문을 이용하여 가짜로 기다리기 때문에 busy-waiting…","html":"<p>저번 포스팅에서 Software 로직으로 Mutual Exclusion을 지키는 방법을 살펴봤습니다<br>\nDekker 선생님이나 Peterson 선생님께서 빈틈없는 알고리즘을 만들어 주셨지만<br>\n여전히 문제가 존재했습니다..</p>\n<ul>\n<li><code class=\"language-text\">while</code>같은 반복문을 이용하여 가짜로 기다리기 때문에 busy-waiting 문제가 있고</li>\n<li>프로세스가 세 개, 열 개, ... 이렇게 많아지면 이걸 다 막기 너무 복잡해지고</li>\n<li>결국 닝겐의 손으로 매번 코드를 짜야하기 때문에 구멍이 날 수 있고</li>\n</ul>\n<p>대충 이런 단점들이 있었는데요<br>\n그래서, Mutual Exclusion을 위한 <strong>Hardware Instruction</strong>을 미리 정의해두고 사용한다는 발상이 나왔습니다<br>\n이렇게 하면 매우 간단히, 진짜 한 줄 정도로 Mutual Exclusion을 보장할 수 있고,<br>\n프로세스가 여럿 존재해도 끄떡없이 막아낼 수 있습니다.</p>\n<p>그래서 어떻게 하는 것인지 이제부터 알아볼건데, 주의할 점은<br>\n아래에서 설명할 instruction에 대한 코드는 실제로 어떤 함수같은 코드가 아니라,<br>\n<em>이렇게 동작한다는 것을 나타내기 위한 것</em>일 뿐입니다.<br>\n미리 정의되어 있는, 하나의 <strong>atomic한 과정</strong>이며,<br>\n즉 중간에 interrupt를 받아 중단되거나 하지 않습니다.<br>\n또한 어떤 메모리를 참조할 때도, 해당 메모리를 블락시킨 채로 접근하기 때문에,<br>\n<strong>hardware instruction은 진짜진짜 독립적</strong>입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 251px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/c0342ca4f8efb9178020b5fe75dcc62a/26abe/image.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 80.37974683544303%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAIAAACZeshMAAAACXBIWXMAAAsTAAALEwEAmpwYAAADvUlEQVR42h2R2W/bBACH/dqVnmkcO7HjOLYT23F85HDsxLmaNHGaNE3brcfakk7aGkpv2nVdWcWklgoGWddm7cp6DMZWYB0SncQDDwwkJLRNGyrSgFcGT/BXkCF9r58+6fcDggIU5CFNhBMBLOrBfCzMO0CONLJ2I2JuMcEgRdmiMjXYIWdCfIC2xAR7xI1rbmuEw4HeNNyXhvt1uE+HBzLw2axlKGcp5s3DOZTAmhw4nNWYBx+OrE9nix3u9jCkh6BMBE6FoIRiAmrBmlpjTZ2xpgE81QjWtcAtbxhqFU9TSIKMUP3lolaZy9xfGShPZvQwwbvqz6QtHqFB9rQoHhNgcBqaHYYmR6PB0WQgDUbSWI/ViwE4EHOVZkcrCz13rnTtLRY+Hk85RaQBq49GkRpLXa258RTUDLgkEyuCtGikBSMhGHC/mW11srrXmfbOr17ZWJn+oBRZn27vz6pmFrJyBoRrRlzNCNNkYRoBlTeFRFjmYR8PBcJOTz4gFFSxoJJpqfOtwc3Na6tTuaWZ4vx7y0xE8mtO2WX0My0+xuCjDQAeV2HZbgk6YIWgMl6xOyTlZa5DJlNSfFD//Kv7t/e2y5WNwvkhKsLzaZkOu1CvDfPZbRIG0JkkGiSsUYZWiVSM08NsX4CU8qqz3ecthLbv3Cpv3tja/UQ702YPsUxccsZFVHVUsaokQCQjaAgHQw6vaJujTO8U3CMMlCvITGfQlfUvl1ev36zsHOx1jPYTMTcdl0iNRRXKWiVgB8jWoFmxu3Wmd0C8mnV+t9n2/UHHzFIci0tEUphcLO3ubx0+POp5e4hMuEmNwxXaqpBWlUCrMhagzQol6uwX17qf35367dvFXx/NffPRud3K8MW5xEQpVV5fPjx60D9erJaJIGv1EK/lIIkEcCAS9YN+cmBM+fnexNP9q8/uzT7dm36yN/bv86XtGzORHv32Z/s7+zv5N7sxla5mERG38FZU/V8ezOug11bZyr44LP10c/L3RxdeHk+8ejL+98no1HSGjvt2DnY2tzdSuTj+WmYg3ER4KEeMt/hxoCeXaBDQZC//4uvhl0ezv9wde/bp2KsfJ09+6HYqNioqXFxeeHf5sqLylMYhAgnaTKTmYpOSKykBFhREFSfXyjw+7vrzZOivk3P//HH+8cPOtfcTpy+EqYQ3lgufHels64zZqlP5HYiHMHtsVpmM6hogB/0mwR7rki7Nq0GdPF30rK6EtS6ezih8XuOy8qW10pfH1xfWJqwyhflJRKGqJ0MCynDkf4lACmEYl2KOAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"건드리지마\"\n        title=\"\"\n        src=\"/static/c0342ca4f8efb9178020b5fe75dcc62a/26abe/image.png\"\n        srcset=\"/static/c0342ca4f8efb9178020b5fe75dcc62a/c26ae/image.png 158w,\n/static/c0342ca4f8efb9178020b5fe75dcc62a/26abe/image.png 251w\"\n        sizes=\"(max-width: 251px) 100vw, 251px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>아무튼 시작합시다.<br>\nInstruction이 두 가지 나옵니다.</p>\n<h1 id=\"1-compare--swap-instruction\" style=\"position:relative;\"><a href=\"#1-compare--swap-instruction\" aria-label=\"1 compare  swap instruction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>1. Compare &#x26; Swap Instruction</h1>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">int</span> <span class=\"token function\">compare_and_swap</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> <span class=\"token operator\">*</span>word<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> testval<span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span> newval<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">int</span> oldval<span class=\"token punctuation\">;</span>\n\n\toldval <span class=\"token operator\">=</span> <span class=\"token operator\">*</span>word<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">if</span> <span class=\"token punctuation\">(</span>oldval <span class=\"token operator\">==</span> testval<span class=\"token punctuation\">)</span> <span class=\"token operator\">*</span>word <span class=\"token operator\">=</span> newval<span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">return</span> oldval<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>첫 번째 Instruction은 위와 같이 생겨먹었는데,<br>\n<code class=\"language-text\">word</code>의 값이 <code class=\"language-text\">testval</code>와 같아야 <code class=\"language-text\">newval</code>로 값을 바꾸고, 이전의 <code class=\"language-text\">word</code>값을 반환합니다.<br>\n당장 이것만 봐서는 어떻게 써먹는지 잘 모르겠으니, 실제로 어떻게 사용하여 Mutual Exclusion을 구현하는지 봅시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">int</span> bolt<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">P</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span> <span class=\"token comment\">//i번째 프로세스의 작업</span>\n\t<span class=\"token keyword\">while</span><span class=\"token punctuation\">(</span>ture<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span><span class=\"token function\">compare_and_swap</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>bolt<span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">==</span> <span class=\"token number\">1</span><span class=\"token punctuation\">)</span>\n\t\t\t<span class=\"token comment\">/* do nothing */</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">/* Critical Section */</span>\n\t\tbolt <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t\t<span class=\"token comment\">/* remainder */</span>\n\t<span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">{</span>\n\tbolt <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">parbegin</span><span class=\"token punctuation\">(</span><span class=\"token function\">P</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">P</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span> <span class=\"token punctuation\">,</span> <span class=\"token function\">P</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li><code class=\"language-text\">bolt</code>값이 0이면, <code class=\"language-text\">compare_and_swap</code>은 bolt값을 1로 바꾸고 0을 반환합니다.</li>\n<li><code class=\"language-text\">bolt</code>값이 1이면, <code class=\"language-text\">compare_and_swap</code>은 1이 반환됩니다.</li>\n</ul>\n<p>이 <code class=\"language-text\">bolt</code>값은 사실상 C.S가 잠겨있는지 여부입니다.<br>\nn개의 프로세스가 아무리 한꺼번에 <code class=\"language-text\">compare_and_swap</code>으로 도달하더라도,<br>\n해당 instruction은 atomic하므로 단 하나의 프로세스만이 <code class=\"language-text\">bolt</code>값을 1로 바꾸고 0의 반환값을 얻는 데 성공합니다.<br>\n그럼 나머지 프로세스들은 <code class=\"language-text\">bolt</code>값이 이미 1이므로 계속 기다릴 뿐입니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 296px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/51e90ecf8acd898070640e35bc368757/b1a44/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 57.59493670886076%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAIAAADtbgqsAAAACXBIWXMAAAsTAAALEwEAmpwYAAABsUlEQVR42o2SzS/DcBjH+y+5uImTXUmEk3BxEAdCOCBBHARpHGZaOsUE2cHElOpqU3shC1batWvZi7Zr91Y2jGxHPxdEMiSfPPnmST7Jk+d5oPp6S6Olpam53dLSPuf0bpwl8JPYqjdmp4U/gXo75rfc51pGv02k9LyZUNNaJssldTvN4bTwO5DzTGHkwmP5zTBLeq5wl1I1PcPGVRtxuUhE7J7oCi3UAmruHmjrGW7tGeoaHMdI1sHIaz4RPxYxigem3SP8Jo/19cMItuNyTSw40MPrFVr80/mSdwk2IOWq1QoRubeR/H+cL9lK8nvncsowrm+TkXh6nQFdMPb/5FVf3C/l3l7Lxcdi6flpzcsiByxGccD/pKY8DOMD07ZReGkERhF3CKWiViKyeHiDHvEo+QFC8liNnUMNda2d3YOTM7MjE1PbR4GgnGU4xc+rp5xywikMCLy66ZfAS4AT/JRh5Ji+SFYrZbOQLxXNp5KZNdIPhRyo+ayR0bXXl6I7LFj3r5YpDqOi34Gc4aQrnAiIqj+qBEUtFEuDGhT1UAxk7SNLujMg4Z4bh0/YPJW/8w4BHgvPfBqVugAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"선착순!!\"\n        title=\"\"\n        src=\"/static/51e90ecf8acd898070640e35bc368757/b1a44/image-1.png\"\n        srcset=\"/static/51e90ecf8acd898070640e35bc368757/c26ae/image-1.png 158w,\n/static/51e90ecf8acd898070640e35bc368757/b1a44/image-1.png 296w\"\n        sizes=\"(max-width: 296px) 100vw, 296px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>선착순 1명만 반환값 0을 받아서 C.S로 들어가겠네요<br>\n당연히 끝나고 나면, <code class=\"language-text\">bolt = 0</code>으로 또 선착순 1명을 받도록 해줍니다.<br>\n화장실 변기 칸 쓰고 다시 나올려면 잠갔던 문을 다시 열어야겠죠..<br>\n나가면서 잠그고 나가는 사람은 아주 정신이 이상한 사람임에 논란의 여지가 없어보입니다.</p>\n<h1 id=\"2-exchange-instruction\" style=\"position:relative;\"><a href=\"#2-exchange-instruction\" aria-label=\"2 exchange instruction permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>2. Exchange Instruction</h1>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">void</span> <span class=\"token function\">exchange</span> <span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span><span class=\"token operator\">*</span> <span class=\"token keyword\">register</span><span class=\"token punctuation\">,</span> <span class=\"token keyword\">int</span><span class=\"token operator\">*</span> memory<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">int</span> temp<span class=\"token punctuation\">;</span>\n\n\ttemp <span class=\"token operator\">=</span> <span class=\"token operator\">*</span>memory<span class=\"token punctuation\">;</span>\n\t<span class=\"token operator\">*</span>memory <span class=\"token operator\">=</span> <span class=\"token operator\">*</span><span class=\"token keyword\">register</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token operator\">*</span><span class=\"token keyword\">register</span> <span class=\"token operator\">=</span> temp<span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>두 번째 Instruction은 너무 친근하게 생겨먹었습니다<br>\n코딩 처음 배울 때 이런거 자주 하셨죠?</p>\n<iframe width=\"50%\" src=\"https://www.youtube.com/embed/vpQUw8MQ3c4?si=7H7YgNLTojpf00-k\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" referrerpolicy=\"strict-origin-when-cross-origin\" allowfullscreen></iframe>\n<p><span style=\"font-size:70%\">from. 유튜브 채널 [유준호]</span></p>\n<p><del><strong><em>나랑 차 바꾸자!!!</em></strong></del></p>\n<p>아.. 그리고 쓰는건</p>\n<div class=\"gatsby-highlight\" data-language=\"c\"><pre class=\"language-c\"><code class=\"language-c\"><span class=\"token keyword\">int</span> bolt<span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">P</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">int</span> i<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">int</span> keyi <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token keyword\">do</span> <span class=\"token function\">exchange</span><span class=\"token punctuation\">(</span><span class=\"token operator\">&amp;</span>keyi<span class=\"token punctuation\">,</span> <span class=\"token operator\">&amp;</span>bolt<span class=\"token punctuation\">)</span> <span class=\"token keyword\">while</span> <span class=\"token punctuation\">(</span>keyi <span class=\"token operator\">!=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">/* critical section */</span><span class=\"token punctuation\">;</span>\n\tbolt <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token comment\">/* remainder */</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span>\n<span class=\"token keyword\">void</span> <span class=\"token function\">main</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n\tbolt <span class=\"token operator\">=</span> <span class=\"token number\">0</span><span class=\"token punctuation\">;</span>\n\t<span class=\"token function\">parbegin</span><span class=\"token punctuation\">(</span><span class=\"token function\">P</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token function\">P</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">.</span><span class=\"token punctuation\">,</span> <span class=\"token function\">P</span><span class=\"token punctuation\">(</span>n<span class=\"token punctuation\">)</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<ul>\n<li>C.S에 들어가려는 프로세스들은 각자의 <code class=\"language-text\">key</code>를 가집니다. 잠긴 방 문을 열기 위한 키라고 생각합시다.</li>\n<li><code class=\"language-text\">do-while</code>로 프로세스들은 <code class=\"language-text\">exchange</code>를 계----속 시도하며 <code class=\"language-text\">bolt</code>와 <code class=\"language-text\">keyi</code>값을 교체합니다.</li>\n<li>단 하나의 프로세스만이 <code class=\"language-text\">bolt</code>값이 0일 때 <code class=\"language-text\">exchange</code>에 성공하고, <code class=\"language-text\">keyi</code>가 1이 아닌 0이 되어 C.S에 진입합니다</li>\n</ul>\n<p>잠긴 방 문을 열기 위해 모든 프로세스가 자물쇠 키인 <code class=\"language-text\">keyi</code>를 가지고 있지만, 이 값이 1이면 키가 가짜 키입니다 ㅜㅜ<br>\n여러 프로세스들이 이 가짜 키를 진짜 키로 바꾸기 위해 <code class=\"language-text\">bolt</code>와 <code class=\"language-text\">keyi</code>를 바꿔먹지만,<br>\n단 하나의 프로세스만이 <code class=\"language-text\">bolt==0</code>일 때 키를 바꾸는데 성공하여 C.S로 진입합니다.<br>\n그럼 프로세스가 C.S를 빠져나오기 전까지는 모든 프로세스가 본인의 열쇠를 진짜 열쇠로 바꿀 수 없고,<br>\nC.S를 빠져나온 프로세스가 진짜 열쇠를 두고 가면(<code class=\"language-text\">bolt=0</code>) 다시 또 선착순으로 진짜 열쇠를 누군가 얻게 됩니다.</p>\n<h1 id=\"장점과-단점\" style=\"position:relative;\"><a href=\"#%EC%9E%A5%EC%A0%90%EA%B3%BC-%EB%8B%A8%EC%A0%90\" aria-label=\"장점과 단점 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>장점과 단점</h1>\n<p>Hardware Instruction을 통해 Mutual Exclusion을 구현하는 두 가지 방법을 알아보았습니다\\</p>\n<p>Software Approach로 구현할 때와 비교해보면</p>\n<ul>\n<li>process가 많아도 간단히 적용할 수 있다</li>\n<li>C.S가 여러번 반복되어도 여전히 강력하다</li>\n</ul>\n<p>라는 장점이 존재합니다<br>\n그러나..</p>\n<ul>\n<li>여전히 <code class=\"language-text\">while</code>과 같이 가짜로 기다리기 때문에, <em>busy-waiting</em>문제가 여전히 존재한다</li>\n<li>starvation을 막을 방법이 없다..\n<ul>\n<li>어떤 프로세스가 C.S를 빠져나와 다시 줄을 서고는, 대기중인 프로세스를 제끼고 또 C.S에 들어가버릴 수 있다는 뜻</li>\n<li>{<code class=\"language-text\">bolt=0</code> --> non-CS구간 지나서 --> 다시 C.S 직전의 hardware instruction 실행 --> 바로 C.S로 재진입 성공}과 같은 과정을 timeout 되기 전에 반복해버릴 수 있습니다\n<span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8850ac30bef064408dd481da7b34e476/8c557/image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 56.9620253164557%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAALCAIAAADwazoUAAAACXBIWXMAAAsTAAALEwEAmpwYAAACqklEQVR42gGfAmD9AB4aFh0ZFh8YFCEWERQPDYBZQZhsT31aRJ55ZLCNeYVrXY1xYtPEtti+qbOJcDwtJhMNCyYZFBkTERoUEQAjHhscGhk6KSCLXkh2UD2EZlR4XkyefWu6jXpINChtTD1POC1RQDeFbl2vk32IZFCGW0ZiQjMeGhghHRoAPS0mSDEncUk1y5B0q3NZk2VJxJmE056HbT4kXT0ty45yp3VeeU47hl1Hd1pFlmFHypB0nWpRSzElRzMpAIpbR7h3W6BrUcKJb7R7Yb1+Y+y2n7h0RpBNHo9cP8mKb7x9Yrl4TqpyU6tzWq1yVsWOc6t0WqhuVbh2XACGUj7AfWKveV65gmbCim2JVUB5Uj93VEFYOitFMCVdOyxgPi5aOylMOC+EUkCzeV/CjHCveF26fWKxblUAoWlPwIFlo2xRr3tduINlnl9FRCwcFRIWLicrOTA0IxsbHRUTGhgdLCIhkFY8rnNYu4dpoGxQtXldu31hALt/Ybl+YKRrTZBfQ4tfR65vSalsQzEhGSskJjUqKzctLiwlJk49O5JVLbBnOoxdQ41fRJhjRrJ4Wb2DZACtc1nAgmCmbEuAUDVIMCFBKh1ZOCVSOSkhHR8uJScuJicxJys0JiewZzigYjhcQC5vRzCWXz+6fVu7fl0AOS0thlxJkFs+dVVBTjouNikhUjwvPjApHBgaJx8hKiEkIhweKiAiXjkjUDUkZkg1YUc3g1lDm2ZNVT44AB4aHyQeIioeH0UtIItkTFhEOV5STltUU0dDR09KTTs4PFdUWE1JTF1ZWUI4NG9RQHFURTAlIiohIxwZHwApISUiHB8dGiAkGBRULRVePSuGZ1VOQDofHB8jHiAoIyUpJSc8MzR4XlB4WEhuSzk/KB4XFRkhHCElHiI+79upA6Py9QAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"무한으로 즐겨요\"\n        title=\"\"\n        src=\"/static/8850ac30bef064408dd481da7b34e476/f058b/image-4.png\"\n        srcset=\"/static/8850ac30bef064408dd481da7b34e476/c26ae/image-4.png 158w,\n/static/8850ac30bef064408dd481da7b34e476/6bdcf/image-4.png 315w,\n/static/8850ac30bef064408dd481da7b34e476/f058b/image-4.png 630w,\n/static/8850ac30bef064408dd481da7b34e476/8c557/image-4.png 700w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span>\n<span style=\"font-size:70%\">from. 명륜진사갈비</span><br>\n무한으로 즐겨요~</li>\n</ul>\n</li>\n</ul>\n<p>와 같은 단점이 존재합니다.\n또한 deadlock 발생 가능성이 존재하지만,<br>\n이건 C.S를 다중으로 구현하여 <code class=\"language-text\">while</code>(또는 <code class=\"language-text\">do-while</code>)문을 여러 개 쓰게 되면 발생하는 문제라서<br>\nhardware instruction 방법 자체의 문제라기에는 좀 .. 애매하네요</p>\n<hr>\n<p><br>\n이런 노력에도 불구하고 문제를 완전히 해결할 수는 없었네요..</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 564px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/37a2bc9380036d77b48295e8724ae5f5/ba4d9/image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 148.7341772151899%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,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'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"역시 형이야\"\n        title=\"\"\n        src=\"/static/37a2bc9380036d77b48295e8724ae5f5/ba4d9/image-3.png\"\n        srcset=\"/static/37a2bc9380036d77b48295e8724ae5f5/c26ae/image-3.png 158w,\n/static/37a2bc9380036d77b48295e8724ae5f5/6bdcf/image-3.png 315w,\n/static/37a2bc9380036d77b48295e8724ae5f5/ba4d9/image-3.png 564w\"\n        sizes=\"(max-width: 564px) 100vw, 564px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>결국 우리의 친구 OS가 도와줘야겠습니다..<br>\nOS는 <code class=\"language-text\">while</code>로 가짜로 기다린다거나 그러지 않습니다.<br>\n<em>그냥 블락시켜버리면 그만이야~</em> 거든요<br>\n다음 포스팅에서는 OS가 제공하는 툴로 Mutual Exclusion을 구현하는 방법에 대해 알아보겠습니더</p>\n<p>이만 마칩니다</p>","frontmatter":{"title":"🙋 선착순 한 명 Critical Section!! : Mutual Exclusion Hardware Approach","date":"April 20, 2024","description":"축하합니다. 당신은 Critical Section입니다.","tag":["OS"]},"tableOfContents":"<ul>\n<li><a href=\"#1-compare--swap-instruction\">1. Compare &#x26; Swap Instruction</a></li>\n<li><a href=\"#2-exchange-instruction\">2. Exchange Instruction</a></li>\n<li><a href=\"#%EC%9E%A5%EC%A0%90%EA%B3%BC-%EB%8B%A8%EC%A0%90\">장점과 단점</a></li>\n</ul>"},"previous":{"fields":{"slug":"/mutual-exclusion-software-approach/"},"frontmatter":{"title":"🤼 코드 몇 줄로 Critical Section에 혼자 진입하기 : Mutual Exclusion Software Approach"}},"next":{"fields":{"slug":"/mutual-exclusion-by-os/"},"frontmatter":{"title":" 🕹️ OS 툴로 Critical Section 통제하기 : Mutual Exclusion By Semaphore & Monitor"}}},"pageContext":{"id":"8c7479f0-93fd-5147-9d0f-899d9307b474","previousPostId":"e94a1b8f-b92f-5000-bbe1-4b7124e50ca0","nextPostId":"d998cde2-9647-5fad-bb23-819aa08899d1"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}