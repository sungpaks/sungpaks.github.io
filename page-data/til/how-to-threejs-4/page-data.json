{"componentChunkName":"component---src-templates-blog-post-tsx","path":"/til/how-to-threejs-4/","result":{"data":{"site":{"siteMetadata":{"title":"조성개발실록"}},"markdownRemark":{"id":"bb1435ee-5b29-508d-b966-d8914a39240d","excerpt":"! 주의 : TIL 게시글입니다. 다듬지 않고 올리거나 기록을 통째로 복붙했을 수 있는 뒷고기 포스팅입니다. 공부하러 밖에 나가서 음~ 오늘은 또 타입스크립트로 즐기는 Three.js…","html":"<blockquote>\n<p>! 주의 : TIL 게시글입니다. 다듬지 않고 올리거나 기록을 통째로 복붙했을 수 있는 뒷고기 포스팅입니다.</p>\n</blockquote>\n<p>공부하러 밖에 나가서 음~ 오늘은 또 타입스크립트로 즐기는 Three.js 강의 하나 더 봐야겠다~<br>\n했는데 웬걸? 이어폰을 안 가져왔습니다<br>\n제 기억 상 그 강의가 자막은 그냥 자동생성이었던거같아서<br>\n그냥 코드베이스만 그 강의에서 했던 것처럼 클래스 형태를 따라가는거로 하고<br>\n공식 문서를 봤습니다.</p>\n<p>제가 이 시리즈 1~3까지 봤던 공식문서는 three.js documentation이었는데<br>\n알고보니 <a href=\"https://threejs.org/manual/\">manual</a>도 따로 있습니다<br>\n여기서는 Three.js가 뭔지, 개발환경과 알아두고 시작할 것들, 반응형 디자인, 기본 구조, ... 이런걸 설명해줍니다.<br>\n게다가 documentation에는 번역이 빠진 것도 은근 있고, 그냥 번역체인데<br>\n여기는 역주도 달려있고, 모양새도 뭔가 각잡고 누군가 번역해주신 모양새입니다<br>\n그래서 꽤 좋은 것 같아요. 이런저런 기본구조에 대해서도 잘 알려주고, 예제도 적당하구요</p>\n<p>그래서 이거로 기본구조 > 텍스처까지 따라가며 공부해보고 기록한걸 정리해서 올려둡니다.<br>\n사실 조명, 카메라까지도 봤는데 이건 그냥 쭉 보기만 하면서 이런 종류의 조명/카메라가 있구나, 만 봤어요</p>\n<p>밑에 태양계를 간단히 느낌만 나게 구현해본 예제 있으니까 구경해보세요</p>\n<h1 id=\"원시-모델primitives\" style=\"position:relative;\"><a href=\"#%EC%9B%90%EC%8B%9C-%EB%AA%A8%EB%8D%B8primitives\" aria-label=\"원시 모델primitives permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>원시 모델(Primitives)</h1>\n<p><a href=\"https://threejs.org/manual/#ko/primitives\">https://threejs.org/manual/#ko/primitives</a><br>\nThree.js 원시 모델이란 : 주로 런타임에서 다양한 인자들로 정의한 3D 모양들입니다<br>\n<code class=\"language-text\">BoxGeometry, CircleGeometry, ConeGeometry, ...</code><br>\n얘네들은 다 비슷비슷하게 인자를 넣고, 기하학 구조를 정의하고, .. 보통 그렇습니다</p>\n<p>근데 특히 <code class=\"language-text\">TextGeometry</code>는 다른 원시 모델들과 다른데<br>\n일단 비동기적으로 폰트를 로드해야해요</p>\n<div class=\"gatsby-highlight\" data-language=\"js\"><pre class=\"language-js\"><code class=\"language-js\"><span class=\"token keyword\">const</span> loader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">THREE<span class=\"token punctuation\">.</span>FontLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nloader<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token string\">'../resources/threejs/fonts/helvetiker_regular.typeface.json'</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">(</span><span class=\"token parameter\">font</span><span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n\t<span class=\"token keyword\">const</span> text <span class=\"token operator\">=</span> <span class=\"token string\">'three.js'</span>\n\t<span class=\"token keyword\">const</span> geometry <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">THREE<span class=\"token punctuation\">.</span>TextGeometry</span><span class=\"token punctuation\">(</span>text<span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n\t\t<span class=\"token literal-property property\">font</span><span class=\"token operator\">:</span> font<span class=\"token punctuation\">,</span>\n\t\t<span class=\"token literal-property property\">size</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">,</span>\n\t\t<span class=\"token literal-property property\">depth</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">,</span>\n\t\t<span class=\"token literal-property property\">curveSegments</span><span class=\"token operator\">:</span> <span class=\"token punctuation\">,</span>\n\t\t<span class=\"token literal-property property\">bevelEnabled</span><span class=\"token operator\">:</span> <span class=\"token comment\">// 깎아낸 사각</span>\n\t<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span>\n<span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span></code></pre></div>\n<p>그래서 이렇게 프로미스 콜백으로 하거나, 비동기함수를 만들고 <code class=\"language-text\">await</code>으로 폰트를 가져오거나 합니다</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"> <span class=\"token keyword\">private</span> <span class=\"token keyword\">async</span> <span class=\"token function\">setupText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> loader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FontLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> font <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> loader<span class=\"token punctuation\">.</span><span class=\"token function\">loadAsync</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"https://threejs.org/examples/fonts/helvetiker_regular.typeface.json\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> geometry <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TextGeometry</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HELLO!\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      font<span class=\"token operator\">:</span> font<span class=\"token punctuation\">,</span>\n      size<span class=\"token operator\">:</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span>\n      height<span class=\"token operator\">:</span> <span class=\"token number\">0.05</span><span class=\"token punctuation\">,</span>\n      curveSegments<span class=\"token operator\">:</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span>\n      bevelEnabled<span class=\"token operator\">:</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> material <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">MeshPhongMaterial</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> color<span class=\"token operator\">:</span> <span class=\"token number\">0x2200ff</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> textMesh <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">Mesh</span><span class=\"token punctuation\">(</span>geometry<span class=\"token punctuation\">,</span> material<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> textMesh<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>textMesh<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>그리고 폰트는 기본적으로 중앙이 아닌 왼쪽모서리를 중심으로 회전축이 설정되어있어요<br>\n중앙을 중심으로 돌게 하려면 Three.js에게 geometry의 경계 좌표(bounding box)를 계산해달라고 하고, <code class=\"language-text\">getCenter</code> 메서드에 해당 mesh의 위치값 객체를 넘겨줍니다.<br>\n=> <code class=\"language-text\">getCenter</code> 메서드는 그 받은 위치값의 중앙 좌표값을 자신의 위치값으로 복사.<br>\n=> 그런 다음 해당 메서드는 변경된 위치값 객체를 반환.<br>\n=> 이 객체의 <code class=\"language-text\">.multiplyScalar(-1)</code> 메서드로 전체 텍스트의 회전 중심이 텍스트 중앙에 오도록 조정하면 됨</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\">geometry<span class=\"token punctuation\">.</span><span class=\"token function\">computeBoundingBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\ngeometry<span class=\"token punctuation\">.</span>boundingBox<span class=\"token operator\">?.</span><span class=\"token function\">getCenter</span><span class=\"token punctuation\">(</span>textMesh<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">multiplyScalar</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>근데 이대로 씬에 넣어버리면 위치값을 자동으로 재할당해버려요<br>\n따라서 그 대신, Three.js 씬 그래프의 가장 기본 요소인 <code class=\"language-text\">Object3D</code>를 하나 만들고 이를 부모로 두게 합시다.<br>\n이 기본 요소인 <code class=\"language-text\">Object3D</code>로 감싸는 테크닉은 꽤 자주 나옵니다<br>\n이런 식으로 <code class=\"language-text\">Object3D</code>를 생성하고 텍스트를 감싸면, 텍스트의 회전 중심은 유지한 채로 위치값을 얼마든지 조정할 수 있습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">const</span> parent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">Object3D</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\nparent<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>textMesh<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> parent<span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게</p>\n<p>전체 코드</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">private</span> <span class=\"token keyword\">async</span> <span class=\"token function\">setupText</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> loader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">FontLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> font <span class=\"token operator\">=</span> <span class=\"token keyword\">await</span> loader<span class=\"token punctuation\">.</span><span class=\"token function\">loadAsync</span><span class=\"token punctuation\">(</span>\n      <span class=\"token string\">\"https://threejs.org/examples/fonts/helvetiker_regular.typeface.json\"</span>\n    <span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> geometry <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">TextGeometry</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"HELLO!\"</span><span class=\"token punctuation\">,</span> <span class=\"token punctuation\">{</span>\n      font<span class=\"token operator\">:</span> font<span class=\"token punctuation\">,</span>\n      size<span class=\"token operator\">:</span> <span class=\"token number\">0.2</span><span class=\"token punctuation\">,</span>\n      height<span class=\"token operator\">:</span> <span class=\"token number\">0.05</span><span class=\"token punctuation\">,</span>\n      curveSegments<span class=\"token operator\">:</span> <span class=\"token number\">30</span><span class=\"token punctuation\">,</span>\n      bevelEnabled<span class=\"token operator\">:</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">,</span>\n      bevelThickness<span class=\"token operator\">:</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">,</span>\n      bevelSize<span class=\"token operator\">:</span> <span class=\"token number\">0.01</span><span class=\"token punctuation\">,</span>\n      bevelSegments<span class=\"token operator\">:</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> material <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">MeshPhongMaterial</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span> color<span class=\"token operator\">:</span> <span class=\"token number\">0xffff00</span> <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> textMesh <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">Mesh</span><span class=\"token punctuation\">(</span>geometry<span class=\"token punctuation\">,</span> material<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    geometry<span class=\"token punctuation\">.</span><span class=\"token function\">computeBoundingBox</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    geometry<span class=\"token punctuation\">.</span>boundingBox<span class=\"token operator\">?.</span><span class=\"token function\">getCenter</span><span class=\"token punctuation\">(</span>textMesh<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">multiplyScalar</span><span class=\"token punctuation\">(</span><span class=\"token operator\">-</span><span class=\"token number\">1</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">const</span> parent <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">Object3D</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    parent<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>textMesh<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>text <span class=\"token operator\">=</span> parent<span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>parent<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"씬-그래프scene-graph\" style=\"position:relative;\"><a href=\"#%EC%94%AC-%EA%B7%B8%EB%9E%98%ED%94%84scene-graph\" aria-label=\"씬 그래프scene graph permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>씬 그래프(Scene Graph)</h1>\n<p><a href=\"https://threejs.org/manual/#ko/scenegraph\">https://threejs.org/manual/#ko/scenegraph</a><br>\n3D엔진에서 씬 그래프란 요소의 계층 구조를 나타낸 그림.<br>\n<strong>각 요소는 각각의 지역공간(local space)을 가진다</strong>(3편에서 살펴봤었습니다)</p>\n<p>예시</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 493px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/bd2e2c1ca45e2510d7c58403210e8c7a/f88d0/image-1.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 65.82278481012659%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAIAAAAmMtkJAAAACXBIWXMAAAsTAAALEwEAmpwYAAACCklEQVR42m1S72/SQBjm/5hwd+0d7d31WlpKWUtbOybikAUGQcLi5sAfG1v8YKLRxWkW5zfj/+zbAnNuvnmaNH2f9/rc87wl7UHpeVGNYK5qdnss04HMxlazTXWib2rFLN2bA2BMMNFQeYvX4+z0VzK/yZa/a72FjssIWpgQUjDvDUMHHsFNITjAcet+2k27w6gzcLcTKQV8lIJXmY5RRSOkdFctNYQbRFlnz/W3XdezlbKEWXOUYwl4cxw4rRGm7XS3qxuSVY31MEgxDEM+e+NNLxuzS6N3XhV2pfwINFYQQhgDCCqLx2Nx8DE5vpIHn6xgp7T6KZB0SsXOxB8st0fnonNkCIUxppTdmgSGWfFzu3/aGl/I7kJ4YT6MUZkbLI2jhmvHrTBNooZnR2GgJMeV8l9HcmrF4ixqNija0jVSooypbBTsv26NzmR7wgyTVbm1Ow2Hb5uDd1Y6ZIyt/SVYhk9rvXkyPlOdl8JtluDe9uB9PP/pH36zhh+4VFWh3MmXZHHjzb6r/QvTNFfDVMPqySw4+pGcXKsXXyH5XDYsA7frAGHXV9erCssLQr8ZMVPcSZKYAkz3ue1Jx1+7TRAiuEJQAULAJGpKyCRoZRDe7T4Vi4ByTkHe5FwsVg5KoW3AsdPP8cm1N7uy+0uIsJCt/cN8uGGFNAxSa93DoD93916BlxvD/lN/AKgWjyski1ZeAAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"씬그래프\"\n        title=\"\"\n        src=\"/static/bd2e2c1ca45e2510d7c58403210e8c7a/f88d0/image-1.png\"\n        srcset=\"/static/bd2e2c1ca45e2510d7c58403210e8c7a/c26ae/image-1.png 158w,\n/static/bd2e2c1ca45e2510d7c58403210e8c7a/6bdcf/image-1.png 315w,\n/static/bd2e2c1ca45e2510d7c58403210e8c7a/f88d0/image-1.png 493w\"\n        sizes=\"(max-width: 493px) 100vw, 493px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이 씬그래프를 잘 이해하기 위한 예제로 태양계 구현이 있습니다</p>\n<h2 id=\"태양계-구현하기-태양-지구-달의-자전공전\" style=\"position:relative;\"><a href=\"#%ED%83%9C%EC%96%91%EA%B3%84-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-%ED%83%9C%EC%96%91-%EC%A7%80%EA%B5%AC-%EB%8B%AC%EC%9D%98-%EC%9E%90%EC%A0%84%EA%B3%B5%EC%A0%84\" aria-label=\"태양계 구현하기 태양 지구 달의 자전공전 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>태양계 구현하기 (태양, 지구, 달의 자전/공전)</h2>\n<p>태양과 지구와 달만 생각해봅시다<br>\n태양은 자전만 하구요<br>\n지구는 태양 주변을 공전하고 자전합니다<br>\n달은 지구를 공전하고 또한 자전합니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 217px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/1c5337a136e05e2039bad65af66f4ae2/7ba77/image-2.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.67088607594937%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAAAsTAAALEwEAmpwYAAACm0lEQVR42qVUTWsUQRCdaBRPInoTD4rgQQQPSUwy0zM70z3dOzvZTdzEjcmuiSviWfQv6EUR8Q8I+jv8APGWv+BR8Kg3MRp81uud1Rg3H+Ch6K7aqlev3tR2kOc5djNjLQxPsay6azn3qgn+AdlWtJCmuFarVWeC+TTDVbk7Y3ye3Q+QSaXWWBKQ22GIthRridG/VfkNbbzfkLxRbIPtYM1swICFi1JEdv4uxpHpk9VykviG85I/rP0LkAGOsRrHPtiSRFousTWlsCLxBfFvyH01TiQ3/y0Fm+WjALtSxAImEpj+uvhksZCl6MXKA/QkXpdG14UlPxonKitNPSAvDNKoTeIcegJEhqXRqGV1zIQNREnhAToCRNAVOdm8K7mMURLKEbgKkAKzK5n1VAxnDVRSR3NO4f69S1jrTSFRFqk0bMoHYZ6SO7WmLEXFMrDVuB35oVONawUsqdXR70/g08ejAAJsbY7h6ZNziFQdpdVeHhJoV2vUllqS8hremR18MY57M4rQzDVmI4vXr04OwL6Py3kIXz4fxmJ71stAOagxZSK7JQH2DKnVcDWG2liXQymDjY3jAjSGza9H8PPHODa/HUKvO4k4LdCPI8zJ6GRH4HYlW8Ddo1FUN1whZxCGdTx+dH7AcGvMn+/fnUCWamTOemYdboEArXMqwfCApMtxzYi/UZoaPHxwAW/fnMLLF2fQaimkmUNLZ1hNInQL+WiZ9hvRrDACs2PTt5uVjmFYYGrKYXpa1kY7aGHXVyHKSMYtW6iJzy9dyPhm1OOw04pCoywNGg0tDfgCyaOhEhy7+AGnLz/HcjopC6//LPZ+gKNMi0xnJ55h8spdzJtIHhC3+/N1UCvsjDCOBczu/R4e1AxZGbv/A/u/9gsyhsGtgH2QPwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"달 움직임\"\n        title=\"\"\n        src=\"/static/1c5337a136e05e2039bad65af66f4ae2/7ba77/image-2.png\"\n        srcset=\"/static/1c5337a136e05e2039bad65af66f4ae2/c26ae/image-2.png 158w,\n/static/1c5337a136e05e2039bad65af66f4ae2/7ba77/image-2.png 217w\"\n        sizes=\"(max-width: 217px) 100vw, 217px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>그럼 달 움직임이 이렇게 되는데<br>\n달의 이 움직임을 그냥 수학적으로 구현하려면 너무 머리가 아픕니다 ㅜㅜ</p>\n<p>그러나 이를 상대좌표(지역공간)로 나타내면 훨씬 쉽습니다<br>\n달이 그냥 지구를 중심으로 하는 상대좌표 내에 놓이게 하면, 달은 지구의 움직임에 종속되면서도 본인의 공전 운동에만 집중하면 됩니다</p>\n<p>이제 태양, 지구 달을 만들어봅시다?<br>\n그 전에 먼저 <code class=\"language-text\">private objects: object3D[] = []</code>와 같이 물체들의 배열을 만들어둡시다.<br>\n이제 내려다보는 평면에서 자전하게 하려고 합니다</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">private</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>time<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    time <span class=\"token operator\">*=</span> <span class=\"token number\">0.001</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ms -> s</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      obj<span class=\"token punctuation\">.</span>rotation<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> time<span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>카메라가 <code class=\"language-text\">position.set(0,30,0)</code>처럼 y축방향 위쪽으로 이동해있고, <code class=\"language-text\">lookAt(0,0,0)</code>상태인 경우입니다<br>\n그럼 바라보는 평면상에서 자전하는 양상을 그려내려면 <code class=\"language-text\">rotation.y</code>값을 변경시켜줍니다<br>\n공전은 나중에 알아보겠지만, 지역공간 자체를 회전시키게 될 예정입니다.</p>\n<p>그리고 다 똑같은 구형체니까 geometry는 똑같은걸 재활용합시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token comment\">// radius, width-segment, height-segment</span>\n<span class=\"token keyword\">const</span> geometry <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">SphereGeometry</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">,</span> <span class=\"token number\">6</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>높이/너비 분할을 좀 적게 해서 자전운동이 눈에 잘 보이게 좀 해줍시다.<br>\n나중에는 진짜 태양/지구/달같은 텍스처를 넣어서 좀 더 분할수를 높여볼것입니다</p>\n<h3 id=\"조명-세팅\" style=\"position:relative;\"><a href=\"#%EC%A1%B0%EB%AA%85-%EC%84%B8%ED%8C%85\" aria-label=\"조명 세팅 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>조명 세팅</h3>\n<p>아 근데 먼저 조명이 있어야하는데<br>\n태양은 응당 태양계의 빛이니까, 태양 중심에서 뻗어나오는 점광원이 필요합니다</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">private</span> <span class=\"token function\">setupLight</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> color <span class=\"token operator\">=</span> <span class=\"token number\">0xffffff</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> intensity <span class=\"token operator\">=</span> <span class=\"token number\">500</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> light <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">PointLight</span><span class=\"token punctuation\">(</span>color<span class=\"token punctuation\">,</span> intensity<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    light<span class=\"token punctuation\">.</span>position<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>light<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h3 id=\"태양-만들기\" style=\"position:relative;\"><a href=\"#%ED%83%9C%EC%96%91-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"태양 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>태양 만들기</h3>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">private</span> <span class=\"token function\">setupSun</span><span class=\"token punctuation\">(</span>geometry<span class=\"token operator\">:</span> <span class=\"token constant\">THREE</span><span class=\"token punctuation\">.</span>SphereGeometry<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> material <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">MeshStandardMaterial</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      emissive<span class=\"token operator\">:</span> <span class=\"token number\">0xffff00</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> sun <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">Mesh</span><span class=\"token punctuation\">(</span>geometry<span class=\"token punctuation\">,</span> material<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    sun<span class=\"token punctuation\">.</span>scale<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">,</span> <span class=\"token number\">5</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 태양은 더 크게</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>sun<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>sun<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">setupSun</code> 메서드를 정의하고 콜해줍시다.<br>\n태양은 응당 좀 커야겠으니까 5배씩 확대해주고요<br>\n씬에 그대로 넣습니다.</p>\n<h3 id=\"지구-만들기\" style=\"position:relative;\"><a href=\"#%EC%A7%80%EA%B5%AC-%EB%A7%8C%EB%93%A4%EA%B8%B0\" aria-label=\"지구 만들기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>지구 만들기</h3>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">private</span> <span class=\"token function\">setupEarth</span><span class=\"token punctuation\">(</span>geometry<span class=\"token operator\">:</span> <span class=\"token constant\">THREE</span><span class=\"token punctuation\">.</span>SphereGeometry<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> material <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">MeshStandardMaterial</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      color<span class=\"token operator\">:</span> <span class=\"token number\">0x2233ff</span><span class=\"token punctuation\">,</span>\n      emissive<span class=\"token operator\">:</span> <span class=\"token number\">0x112244</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> earth <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">Mesh</span><span class=\"token punctuation\">(</span>geometry<span class=\"token punctuation\">,</span> material<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>sun<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>earth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    earth<span class=\"token punctuation\">.</span><span class=\"token function\">translateX</span><span class=\"token punctuation\">(</span><span class=\"token number\">10</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 태양에서 10만큼 떨어진 곳에 지구</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>earth<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>태양의 로컬공간에 편입하기 위해 <code class=\"language-text\">scene.add</code>가 아닌 <code class=\"language-text\">this.sun.add</code>로 태양의 자식요소로 넣어줍시다.<br>\n이제 <code class=\"language-text\">earth.translateX(10)</code>처럼 조금 떨어진 곳에 위치하게 해준다면, 태양이 회전함에 따라 로컬좌표계도 함께 회전하고, 그럼 그 안에 속한 지구가 공전하는 듯 보이게 됩니다</p>\n<p>근데 아래처럼 태양과 지구의 크기가 똑같아보이게 되는데<br>\n<code class=\"language-text\">sun.scale(5,5,5)</code>로 크기를 확대한게 <strong>지역공간 자체를 확대</strong>한 것입니다..<br>\n그래서 지구의 크기도 그만큼 크게 되고, 거리도 사실 5x10만큼 적용되는 셈입니다</p>\n<p>지금까지의 씬 그래프가 <code class=\"language-text\">Scene --> this.sun(5x) --> this.earth</code> 이렇게 되었기 때문입니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/a6a921a7244948efc95804797e304fb8/2cffa/image-3.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 132.91139240506328%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAbCAYAAAB836/YAAAACXBIWXMAABYlAAAWJQFJUiTwAAABOUlEQVR42mNgYGD4jxMzMgFpxv941WBiYhQxUmIgRDMru9h/Yeno/3yiTv+ZmDkpN1Bcqei/itm2/4rGS/6LKcUDvU+WgRDDGJlY/kuqFf+X0Z30X0qz6b+Yeup/Fg4BYr2P3YV8Elb/xTWz/4uqx/3nl7P/z8jMSlmkgFzJIaT4n0tU8z8zOy81Ypnk5EJEsmFkhGDKkg3FeNTAUQNHDUQtQIDZkpmZEUhTwUCQYUxMkDwOohmZqOBCbm6W/7q6wv/5eFnJdyEjI8RVoqKc/w8cTPv/73///wsX0/4rK/OQZyALCxOYLi62+P///9z/339MBdL9/7t7DMgzEBQJIDojQwtoUOv/nz87gXTa/4YGQXK9DKE5OZn+z5yl/v/5S8P/K1fx/RcRpUKkMAFjVkAAFAywkp3hPwCAs0TMXPVpmQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"이상한 지구와 태양\"\n        title=\"\"\n        src=\"/static/a6a921a7244948efc95804797e304fb8/f058b/image-3.png\"\n        srcset=\"/static/a6a921a7244948efc95804797e304fb8/c26ae/image-3.png 158w,\n/static/a6a921a7244948efc95804797e304fb8/6bdcf/image-3.png 315w,\n/static/a6a921a7244948efc95804797e304fb8/f058b/image-3.png 630w,\n/static/a6a921a7244948efc95804797e304fb8/40601/image-3.png 945w,\n/static/a6a921a7244948efc95804797e304fb8/2cffa/image-3.png 1092w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이를 해결하려면 비어있는 씬 그래프 요소를 추가하여 해결합니다.<br>\n<strong>하나의 비어있는 지역 공간을 추가</strong>하여 사실상 태양계를 나타내는 좌표계를 추가한다고 생각하시면 됩니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">private</span> <span class=\"token function\">setupSolarSystem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> solarSystem <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">Object3D</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>solarSystem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>solarSystem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>solarSystem <span class=\"token operator\">=</span> solarSystem<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>이러면 잘 나옵니다. 아래처럼</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 532px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/44541a743a507c3cebbfe489cf31c52d/89a37/image-4.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 93.67088607594937%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAATCAYAAACQjC21AAAACXBIWXMAABYlAAAWJQFJUiTwAAABuklEQVR42q2Tu0oDQRiFZ3Y30Y0iXopUKQRBvEBAhQTURhCChQYttBEFIYqliIULikZ0QQOKFprCRlDyBPoO9hY+gXY2kpvZ40nWFTawMWqKwyz/zPn2zD8zQgiBBqv+xVLxoamlh6P/n0CpVEa9rR/dIzcce131PydUtVa0dA1B0QKN2XLDeqgo0u6hlFBV9e9AKb3rXnPCG2anCgZ17OyO4/5hCZnMPPb2R9He4a/1Q+8tTkyE8Pa2DSANy7qm0vw+w/PzCqLRDtdaT6CTrLPTj6enNQIuUSxSH2VdIF84Yc3E4+MkfL6yR1Ynrboaqg1cXx+k8YiQc1iEWriiLqgUa0nOLSAe97s8NYGmOUxTkubTL1BZ5W+TtR3OTcEwlC9PHQlTqTBN2zSbhJxQx9QhtcvaJufCSCTsLdcEOk0eG29FqbTInhkEGChZBmFbKBQ3WJtGLq8jEnE8P5yyczC3dyEmWSZgFblCAtncGoEzrLUheWCnq4J5Ae1R1wUOj4J4z4aZLkpQH15emyuwQEB63cWfX0r/gEAsJjA7JxAKeSarD2j31LkW8rtnv3567oOyr4am1QRV9AlUHhkB4wqjLwAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"잘 나오는 지구와 태양\"\n        title=\"\"\n        src=\"/static/44541a743a507c3cebbfe489cf31c52d/89a37/image-4.png\"\n        srcset=\"/static/44541a743a507c3cebbfe489cf31c52d/c26ae/image-4.png 158w,\n/static/44541a743a507c3cebbfe489cf31c52d/6bdcf/image-4.png 315w,\n/static/44541a743a507c3cebbfe489cf31c52d/89a37/image-4.png 532w\"\n        sizes=\"(max-width: 532px) 100vw, 532px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>이러면 태양계에 해당하는 로컬 좌표공간은 (0,0,0)을 중심으로 회전함에 따라 (10,0,0)의 지구는 그 중심을 기준으로 회전합니다<br>\n물체가 직접 회전하는게 아니라 공간 자체가 회전하는거십니다</p>\n<p>그리고 이제 씬 그래프가 <code class=\"language-text\">scene --> solarSystem --> sun(5x), earth</code>처럼, 더이상 지구가 태양 밑에 속하지 않습니다<br>\n따라서 태양의 지역공간이 확대되었지만 지구는 태양계의 지역공간에 속하므로 영향을 받지 않습니다</p>\n<h3 id=\"달-추가하기\" style=\"position:relative;\"><a href=\"#%EB%8B%AC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\" aria-label=\"달 추가하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>달 추가하기</h3>\n<div class=\"gatsby-highlight\" data-language=\"tsx\"><pre class=\"language-tsx\"><code class=\"language-tsx\"><span class=\"token keyword\">private</span> <span class=\"token function\">setupEarth</span><span class=\"token punctuation\">(</span>geometry<span class=\"token operator\">:</span> <span class=\"token constant\">THREE</span><span class=\"token punctuation\">.</span>SphereGeometry<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token operator\">...</span>\n\n    <span class=\"token comment\">// 지구계를 정의하여 나중에 달 넣을때 사용</span>\n    <span class=\"token keyword\">const</span> earthSystem <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">Object3D</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    earth<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>earthSystem<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>earthSystem <span class=\"token operator\">=</span> earthSystem<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n <span class=\"token keyword\">private</span> <span class=\"token function\">setupMoon</span><span class=\"token punctuation\">(</span>geomtry<span class=\"token operator\">:</span> <span class=\"token constant\">THREE</span><span class=\"token punctuation\">.</span>SphereGeometry<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> material <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">MeshStandardMaterial</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n      color<span class=\"token operator\">:</span> <span class=\"token number\">0x888888</span><span class=\"token punctuation\">,</span>\n      emissive<span class=\"token operator\">:</span> <span class=\"token number\">0x222222</span><span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> moon <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">Mesh</span><span class=\"token punctuation\">(</span>geomtry<span class=\"token punctuation\">,</span> material<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    moon<span class=\"token punctuation\">.</span><span class=\"token function\">translateX</span><span class=\"token punctuation\">(</span><span class=\"token number\">2</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 지구에서 2만큼 떨어진 곳에 달</span>\n    moon<span class=\"token punctuation\">.</span>scale<span class=\"token punctuation\">.</span><span class=\"token function\">set</span><span class=\"token punctuation\">(</span><span class=\"token number\">0.25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.25</span><span class=\"token punctuation\">,</span> <span class=\"token number\">0.25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// 달은 지구의 1/4 크기</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">push</span><span class=\"token punctuation\">(</span>moon<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>earthSystem<span class=\"token operator\">!</span><span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>moon<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>달을 추가할건데, 아까 빈 로컬공간을 만들었던 것처럼 지구계를 먼저 추가합시다<br>\n그런 다음 적당히, 태양계에 지구 넣은 것처럼, 지구계에 달을 넣으면 됩니다</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8672d155b11162c51d16879c48bbe222/e9140/image-5.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 62.0253164556962%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAMCAYAAABiDJ37AAAACXBIWXMAABYlAAAWJQFJUiTwAAABT0lEQVR42o2Sy0rDUBCG56SJBGlaSCh05cYnENwoFHRjFxaz8oK61gfQx9CFddVdd10o4nsoXhCsiKgPIbaaJr85Tk8upW2yGH7OzJmPuRERIcuEIBQK8btSIThO/E7GKA9Q01g3twhX14SPT8LbO+HikrDhpv9QXtjRMQGILQhY/VAPDlN/J8NUK9s7nPzjEfqheT5b/zfUAcMbjRwVKmCnEwN9pE36ZKzVmggU0SKklsuEl1dOklWNAqVPxh4eCaY5pUIFLFqE52428OaWYBgRkKvS9FnY1XUYM/awZfa329ktN8+TLQtONJ15LKw9oTq3z0Bd/9d6nYcvNyoBg4BNLigIYV/fhFptZIalkgXDtFC0F6EbTjRPdTa7eyHUi09GnU2vR3DdMWcjhlVOu8WVVcJZkxdwd084OSUsLWcdttCimY6DqoWppUlNxv4AHkSI4+YCEbAAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"태양과 지구와 달\"\n        title=\"\"\n        src=\"/static/8672d155b11162c51d16879c48bbe222/f058b/image-5.png\"\n        srcset=\"/static/8672d155b11162c51d16879c48bbe222/c26ae/image-5.png 158w,\n/static/8672d155b11162c51d16879c48bbe222/6bdcf/image-5.png 315w,\n/static/8672d155b11162c51d16879c48bbe222/f058b/image-5.png 630w,\n/static/8672d155b11162c51d16879c48bbe222/40601/image-5.png 945w,\n/static/8672d155b11162c51d16879c48bbe222/e9140/image-5.png 1226w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<h3 id=\"시각적으로-축을-확인하기\" style=\"position:relative;\"><a href=\"#%EC%8B%9C%EA%B0%81%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%B6%95%EC%9D%84-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\" aria-label=\"시각적으로 축을 확인하기 permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>시각적으로 축을 확인하기</h3>\n<p>Three.js에는 씬그래프 요소들의 좌표계, 축, 등등을 확인할 수 있는 헬퍼 클래스가 있습니다<br>\n예를 들어, 축을 시각적으로 확인하고 싶다면 <code class=\"language-text\">AxesHelper</code>를 사용해요</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">private</span> <span class=\"token function\">update</span><span class=\"token punctuation\">(</span>time<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    time <span class=\"token operator\">*=</span> <span class=\"token number\">0.001</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">// ms -> s</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>objects<span class=\"token punctuation\">.</span><span class=\"token function\">forEach</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">)</span> <span class=\"token operator\">=></span> <span class=\"token punctuation\">{</span>\n      <span class=\"token keyword\">const</span> axes <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">AxesHelper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      <span class=\"token comment\">// @ts-ignore</span>\n      axes<span class=\"token punctuation\">.</span>material<span class=\"token punctuation\">.</span>depthTest <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n      axes<span class=\"token punctuation\">.</span>renderOrder <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n      obj<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>axes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n      obj<span class=\"token punctuation\">.</span>rotation<span class=\"token punctuation\">.</span>y <span class=\"token operator\">=</span> time <span class=\"token operator\">/</span> <span class=\"token number\">3</span><span class=\"token punctuation\">;</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p><code class=\"language-text\">axes.material.depthTest = false</code>로 물체 내부에도 축이 그려지게 하고<br>\n<code class=\"language-text\">axes.renderOrder=1</code>로 설정(기본은 0임)하여 구체 렌더링 후에 그려지게 합니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/8b17a182987ef4b4a1ef9dd621929d49/669eb/image-6.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 64.55696202531645%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAANCAYAAACpUE5eAAAACXBIWXMAABYlAAAWJQFJUiTwAAABdElEQVR42pXTz0sCQRQH8DczJlKBF0X6IUQQHUS0+guSBMGge97C/oH6e/LUX1B/gNE/UNc6JF09pESp67rzbWZnx9x1STsMs77d9+E9Zx4REZZZnBMYi49HYosxCwlBOK4wXDQFKhXCxmb4/VKgRvReqxGengkeBByZAkD46BPOG3OV/t2m3ktlldwjHxl7At+uAT3PxK6uQ98HAGMBxENt6L39YBIdl+BKgYECpcYnJv7WIaTTcRVqNIAtmM0Qen2TOJG6ZcKns65g7j9btNGYATnn/n+V2T3D3mHLx2y75QOVpCqTCpvofUwYDVcUzkJg83IGTCaTWF1LIbNTx/7RrQL5tMJ8ntDthiucXa4076rV2JaFghJzh3LTMklDJ4yOxib+8qq6y0bB6aGwObBYJHTeTbK0YFCZo9CTatwpL7g621uEu3vC14D8E9ZQ+5FQP/3HPYyOXSJByOXUvSwRCoXfmxAZv+VnOTq3+redJLt+AL5vlZCZJm87AAAAAElFTkSuQmCC'); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"alt text\"\n        title=\"\"\n        src=\"/static/8b17a182987ef4b4a1ef9dd621929d49/f058b/image-6.png\"\n        srcset=\"/static/8b17a182987ef4b4a1ef9dd621929d49/c26ae/image-6.png 158w,\n/static/8b17a182987ef4b4a1ef9dd621929d49/6bdcf/image-6.png 315w,\n/static/8b17a182987ef4b4a1ef9dd621929d49/f058b/image-6.png 630w,\n/static/8b17a182987ef4b4a1ef9dd621929d49/40601/image-6.png 945w,\n/static/8b17a182987ef4b4a1ef9dd621929d49/669eb/image-6.png 1244w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>근데 돌아가는 모습을 보다보면 태양과 지구에 축이 막 두 가지가 존재합니다<br>\n이게 태양이랑 태양계 축이 같이 있고, 지구와 지구계 축이 같이 있어서 그렇습니다.<br>\n이런 문제를 해결하고, 축(그리고 좌표격자도)을 켜고 끌 수 있게 하기 위해 컨트롤 패널을 만들어봅시다.</p>\n<h4 id=\"컨트롤-패널-만들기---lil-gui\" style=\"position:relative;\"><a href=\"#%EC%BB%A8%ED%8A%B8%EB%A1%A4-%ED%8C%A8%EB%84%90-%EB%A7%8C%EB%93%A4%EA%B8%B0---lil-gui\" aria-label=\"컨트롤 패널 만들기   lil gui permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>컨트롤 패널 만들기 - lil-gui</h4>\n<p><a href=\"https://github.com/georgealways/lil-gui\">lil-gui</a>는 Three.js가 함께 쓰면 좋다고 권장하고, 실제로 같이 번들에 포함되어있습니다.<br>\n뭐하는 라이브러리냐면, 객체와 속성 이름을 받아서 해당 속성의 타입을 기반으로 속성값을 UI로 조정할 수 있게 만들어주는 라이브러리입니다</p>\n<p>Three.js 문서 보다보면 아래같은 예시들이 꽤 많은데</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 570px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/e712ee1ecd4afb96b126c71a4bdeee61/432e7/image-7.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 69.62025316455697%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAOCAYAAAAvxDzwAAAACXBIWXMAAAsTAAALEwEAmpwYAAACPklEQVR42pVUa2saQRRdtVYaUkKgBuojCPGRIppkfRAK5lO/BPFRjXYTdWd3ZzQKLS2lWjVWBf0T/oYU/ImnM6OGhBSSLBzO3Htnzpy7M7vKbDbDZDLBdDrFeDyWLOLRaIRer4flconFYgExr9vtwjAMMMbQbDYlbyDicrkMZX9/HwI+n0+y3++X7PV6EQwGkUwmEY1GZRwIBJBOp5HJZBCLxaCqqqwLFnEkEoHCHzwFm80meWdnB6lUSgq73W5MeDd/b28xm8+ROTuTeUVMfg6E4Pb2NuLxuHS7t7eHIzWB09NTqIkEjo5P4PG8f+zQZrs3fob7+3A6nf9v2WG3443rNexrZy8WFC3ZuYgYe9y70PMZ/Gic4/L8I97tvpV5u/3pV/LI4SuHA+3qJ8y+VjBgecy/VUEKZy9z6HK5cHBwgGAojNRJDDetIn7TPPqsINE1c1DjUV4PyWsRihxyfJAI8zgcDvP8oTzhra0tKKVSiV9MCsuiYNTkYkXcsJXgkHOPfuZ5C5RSyVqri4vOGJXOCF/aA5i0xWuWvNjZbBaKaZpoNBor6AQtoqFnFXjLBSnWJFeoN/T1nDpK1k/k6BB52ud8gyrpQG/UQAiBpmlQxERd12VCsBAlfCHjQoa+2kTkNyjTX8izAYqsjwIb4sq45oJ1GNxYpVKBUq/X5ff5UJRDjh+KiY0urO/INf9w0SHnES4Jg0FWdelQtCxE78S44834TmgdE1E3KDRyjZrZRlVn0IlYX+NnYMmfwz9kU80GDfNbTAAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"lil-gui 예시\"\n        title=\"\"\n        src=\"/static/e712ee1ecd4afb96b126c71a4bdeee61/432e7/image-7.png\"\n        srcset=\"/static/e712ee1ecd4afb96b126c71a4bdeee61/c26ae/image-7.png 158w,\n/static/e712ee1ecd4afb96b126c71a4bdeee61/6bdcf/image-7.png 315w,\n/static/e712ee1ecd4afb96b126c71a4bdeee61/432e7/image-7.png 570w\"\n        sizes=\"(max-width: 570px) 100vw, 570px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>우상단의 \"controls\" 패널이 바로 이것입니다</p>\n<p>일단 우리는 격자와 축을 둘 다 같이 통합하고싶어서, 아래같은 클래스를 추가합시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token operator\">*</span> <span class=\"token keyword\">as</span> <span class=\"token constant\">THREE</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"three\"</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">class</span> <span class=\"token class-name\">AxisGridHelper</span> <span class=\"token punctuation\">{</span>\n  <span class=\"token keyword\">private</span> grid<span class=\"token operator\">:</span> <span class=\"token constant\">THREE</span><span class=\"token punctuation\">.</span>GridHelper<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> axes<span class=\"token operator\">:</span> <span class=\"token constant\">THREE</span><span class=\"token punctuation\">.</span>AxesHelper<span class=\"token punctuation\">;</span>\n  <span class=\"token keyword\">private</span> _visible<span class=\"token operator\">:</span> <span class=\"token builtin\">boolean</span><span class=\"token punctuation\">;</span>\n  <span class=\"token function\">constructor</span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">THREE</span><span class=\"token punctuation\">.</span>Object3D<span class=\"token punctuation\">,</span> units<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span> <span class=\"token operator\">=</span> <span class=\"token number\">10</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> grid <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">GridHelper</span><span class=\"token punctuation\">(</span>units<span class=\"token punctuation\">,</span> units<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> axes <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">AxesHelper</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token comment\">// @ts-ignore &lt;-- 왜 타입에러 ;</span>\n    axes<span class=\"token punctuation\">.</span>material<span class=\"token punctuation\">.</span>depthTest <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    axes<span class=\"token punctuation\">.</span>renderOrder <span class=\"token operator\">=</span> <span class=\"token number\">2</span><span class=\"token punctuation\">;</span>\n\n    grid<span class=\"token punctuation\">.</span>material<span class=\"token punctuation\">.</span>depthTest <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    grid<span class=\"token punctuation\">.</span>renderOrder <span class=\"token operator\">=</span> <span class=\"token number\">1</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>grid <span class=\"token operator\">=</span> grid<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>axes <span class=\"token operator\">=</span> axes<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_visible <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n\n    obj<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>grid<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    obj<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>axes<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n\n  <span class=\"token keyword\">get</span> <span class=\"token function\">visible</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">return</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_visible<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n  <span class=\"token keyword\">set</span> <span class=\"token function\">visible</span><span class=\"token punctuation\">(</span>v<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_visible <span class=\"token operator\">=</span> v<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>grid<span class=\"token punctuation\">.</span>visible <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_visible<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>axes<span class=\"token punctuation\">.</span>visible <span class=\"token operator\">=</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>_visible<span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span>\n<span class=\"token punctuation\">}</span></code></pre></div>\n<p>둘 다 <code class=\"language-text\">depthTest</code>를 끄고, 물체 -> 격자 -> 축 순으로 그려지게 해줍시다.<br>\n그리고 <code class=\"language-text\">visible</code> 프로퍼티를 관리하여 컨트롤할 수 있게 합니다.</p>\n<p>이제 다시 돌아가서 이를 이용한 <code class=\"language-text\">makeAxisGrid</code> 메서드를 정의합시다<br>\n3D오브젝트와 그 이름인 <code class=\"language-text\">label</code>, 그리고 선택적으로 격자 크기를 받아서 컨트롤패널에 추가하는 메서드입니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">private</span> <span class=\"token function\">makeAxisGrid</span><span class=\"token punctuation\">(</span>obj<span class=\"token operator\">:</span> <span class=\"token constant\">THREE</span><span class=\"token punctuation\">.</span>Object3D<span class=\"token punctuation\">,</span> label<span class=\"token operator\">:</span> <span class=\"token builtin\">string</span><span class=\"token punctuation\">,</span> units<span class=\"token operator\">?</span><span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> helper <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">AxisGridHelper</span><span class=\"token punctuation\">(</span>obj<span class=\"token punctuation\">,</span> units<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    helper<span class=\"token punctuation\">.</span>visible <span class=\"token operator\">=</span> <span class=\"token boolean\">false</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>gui<span class=\"token punctuation\">.</span><span class=\"token function\">add</span><span class=\"token punctuation\">(</span>helper<span class=\"token punctuation\">,</span> <span class=\"token string\">\"visible\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">.</span><span class=\"token function\">name</span><span class=\"token punctuation\">(</span>label<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>이제 <code class=\"language-text\">setupModels()</code>에서 태양/지구/달을 모두 선언한 다음에 이 메서드들을 호출합시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">private</span> <span class=\"token function\">setupModels</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> geometry <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">SphereGeometry</span><span class=\"token punctuation\">(</span><span class=\"token number\">1</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">,</span> <span class=\"token number\">12</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setupSolarSystem</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setupSun</span><span class=\"token punctuation\">(</span>geometry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setupEarth</span><span class=\"token punctuation\">(</span>geometry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">setupMoon</span><span class=\"token punctuation\">(</span>geometry<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">makeAxisGrid</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>solarSystem<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"solarSystem\"</span><span class=\"token punctuation\">,</span> <span class=\"token number\">25</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">makeAxisGrid</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>earthSystem<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"earthSystem\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">makeAxisGrid</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>sun<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"sun\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">makeAxisGrid</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>earth<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"earth\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">makeAxisGrid</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>moon<span class=\"token operator\">!</span><span class=\"token punctuation\">,</span> <span class=\"token string\">\"moon\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<p>그럼 이렇게 됩니다.</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/dc675ed547cf4e77254ce37e718ab869/b79a5/image-8.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 87.34177215189874%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAARCAYAAADdRIy+AAAACXBIWXMAABYlAAAWJQFJUiTwAAABlklEQVR42pWTS07CUBSGCy333FJjgoYBbcMjYAgBAsxYgS4BpyyAJaAr0gVJnJEYZz5iok5++dvUttDyGJy0aXu/+3/n9BqGYeDUMk0To9EIg8EAvu+j2WyiVqvBdV2+Px0oIphOp5hMJmi32+j1emg0GgH4aGCxWESpVPoHDofDANLpdNDtdgNYq9U6DkhFQrTWAVgphX6/D8/zUK/XAxDvqb8XWCgUglQEERgVn+9ZlwUyYFkW7PI5bNtOwViR+lHAsFcmbKcCrz2D45xtNlAbbSrHULbhIJCp4iTUdDbPBdWqoFKhqhyjHt6w0cmPmcayFO7uBS+vGqtnwexWgg1sOxxQjvpuOi7gwusbASD4+eVVY70WeL6k9DPU44lGKcvlEDifh8C3d42vb42PT8F4HKfMUU8PJNJliporeFrpIB3r4ZETlq3W7KinexCpE8ohdK4Ey6VgsdC4uEzrEkYrBskFJtXDHoWKLKXSvw43z5h09rnlggjAniZ7plRpO9V+IIt92T4hUaoDZz//HCfVM3qVWX8WpIcaAln/SQAAAABJRU5ErkJggg=='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"결과\"\n        title=\"\"\n        src=\"/static/dc675ed547cf4e77254ce37e718ab869/f058b/image-8.png\"\n        srcset=\"/static/dc675ed547cf4e77254ce37e718ab869/c26ae/image-8.png 158w,\n/static/dc675ed547cf4e77254ce37e718ab869/6bdcf/image-8.png 315w,\n/static/dc675ed547cf4e77254ce37e718ab869/f058b/image-8.png 630w,\n/static/dc675ed547cf4e77254ce37e718ab869/40601/image-8.png 945w,\n/static/dc675ed547cf4e77254ce37e718ab869/78612/image-8.png 1260w,\n/static/dc675ed547cf4e77254ce37e718ab869/b79a5/image-8.png 1372w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>실제로 한 칸 한 칸이 위치 1씩에 대응되어, 10으로 설정한 지구-태양 사이의 거리가 격자판에서 10칸에 대응하는 것을 볼 수 있습니다.<br>\n또한 태양계공간에서의 지구 위치는 변하지 않고 태양계공간이 회전함에 따라 같이 박혀서 움직이는 것을 볼 수 있습니다</p>\n<h3 id=\"카메라-인터랙션-추가하기--orbitcontrol\" style=\"position:relative;\"><a href=\"#%EC%B9%B4%EB%A9%94%EB%9D%BC-%EC%9D%B8%ED%84%B0%EB%9E%99%EC%85%98-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0--orbitcontrol\" aria-label=\"카메라 인터랙션 추가하기  orbitcontrol permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>카메라 인터랙션 추가하기 : OrbitControl</h3>\n<p>그리고 마우스로 잡아끌어서 시점을 바꾸고, 줌인도 가능하게 하고싶습니다<br>\n<code class=\"language-text\">OrbitControls</code>를 이용하면 쉽습니다</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">import</span> <span class=\"token punctuation\">{</span> OrbitControls <span class=\"token punctuation\">}</span> <span class=\"token keyword\">from</span> <span class=\"token string\">\"three/examples/jsm/Addons.js\"</span><span class=\"token punctuation\">;</span>\n\n<span class=\"token operator\">...</span>\n\n<span class=\"token comment\">// OrbitControls만 생성하고 추가해줘도 이미 마우스로 잡아끌기 가능함</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>controls <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\">OrbitControls</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>camera<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderer<span class=\"token punctuation\">.</span>domElement<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>controls<span class=\"token punctuation\">.</span>enableDamping <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//부드럽게 전환</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>controls<span class=\"token punctuation\">.</span>dampingFactor <span class=\"token operator\">=</span> <span class=\"token number\">0.05</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//부드럽게 전환하는 정도</span>\n<span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>controls<span class=\"token punctuation\">.</span>enableZoom <span class=\"token operator\">=</span> <span class=\"token boolean\">true</span><span class=\"token punctuation\">;</span> <span class=\"token comment\">//줌 가능하게</span></code></pre></div>\n<p>그리고 <code class=\"language-text\">render</code> 메서드에서 <code class=\"language-text\">OrbitControl</code> 업데이트 한 줄도 추가해줍시다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\"><span class=\"token keyword\">private</span> <span class=\"token function\">render</span><span class=\"token punctuation\">(</span>time<span class=\"token operator\">:</span> <span class=\"token builtin\">number</span><span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span>time<span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>controls<span class=\"token operator\">?.</span><span class=\"token function\">update</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>renderer<span class=\"token punctuation\">.</span><span class=\"token function\">render</span><span class=\"token punctuation\">(</span><span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>scene<span class=\"token punctuation\">,</span> <span class=\"token keyword\">this</span><span class=\"token punctuation\">.</span>camera<span class=\"token operator\">!</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n  <span class=\"token punctuation\">}</span></code></pre></div>\n<h1 id=\"재질materials\" style=\"position:relative;\"><a href=\"#%EC%9E%AC%EC%A7%88materials\" aria-label=\"재질materials permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>재질(materials)</h1>\n<p><a href=\"https://threejs.org/manual/#ko/materials\">https://threejs.org/manual/#ko/materials</a><br>\n이제 대충 태양계는 끝났구요, 텍스처를 적용하러 가기 전에 재질을 한번 살펴보고 갑시다</p>\n<p>Three.js의 기본 재질들 :</p>\n<ul>\n<li><code class=\"language-text\">MeshBasicMaterial</code> : 광원의 영향을 받지 않음</li>\n<li><code class=\"language-text\">MeshLambertMaterial</code> : 정점에서만 광원을 계산함..</li>\n<li><code class=\"language-text\">MeshPhongMaterial</code> : 픽셀 하나하나 광원을 전부 계산하고, + 반사점을 지원함.</li>\n<li><code class=\"language-text\">MeshToonMaterial</code> : Phong과 비슷하지만, 부드러운 쉐이딩 대신 그라디언트 맵을 사용하여 투톤의 카툰 느낌을 줌.</li>\n</ul>\n<p>이 친구들은 3D처럼 보이기 위해 간단한 수학을 사용하지만, 실제와는 좀 다른데요<br>\n얘네 말고도 물리 기반 렌더링을 위한 재질들이 따로 또 있습니다.</p>\n<p><em>물리 기반 렌더링을 위한</em> 재질들 => 물리기반렌더링은 줄여서 PBR(Physically Based Rendering) => 얘네들은 좀 더 복잡한 수학을 사용해요</p>\n<ul>\n<li><code class=\"language-text\">MeshStandardMaterial</code> : phong과 달리 얘는 <code class=\"language-text\">roughness, metalness</code>를 0~1 사이 값으로 설정가능.</li>\n<li><code class=\"language-text\">MeshPhysicalMaterial</code> : standard와 비슷하지만, 0~1의 <code class=\"language-text\">clearcoat</code> 속성으로 코팅 세기를 정하고, <code class=\"language-text\">clearcoatRoughness</code>로 코팅의 거침 정도를 정한다.</li>\n</ul>\n<p>basic &#x3C; lambert &#x3C; phong &#x3C; standard &#x3C; physical 순으로 성능부담이 큽니다.</p>\n<p>이외 특수한 재질로 <code class=\"language-text\">ShadowMaterial, MeshDepthMaterial, MeshNormalMetrial</code>은 각각 그림자, 픽셀의 깊이, 기하학의 법선을 나타낼 수 있습니다.</p>\n<p><code class=\"language-text\">ShaderMaterial, RawShaderMaterial</code>은 재질 커스텀 시 사용하는데<br>\n전자는 Three.js의 쉐이더 시스템을 사용하지만, 후자는 아예 Three.js 없이 작성합니다.</p>\n<p>재질 속성은 <a href=\"https://threejs.org/docs/#api/ko/materials/Material\">docs</a>를 참고하되, 두 가지 자주 쓰이는거는</p>\n<ul>\n<li><code class=\"language-text\">flatShading</code> : 물체를 각지게 표현할지. <code class=\"language-text\">false</code>가 기본</li>\n<li><code class=\"language-text\">side</code> : 어떤 면을 렌더링할지? => 그때 원규님이 말씀하신 뒷면문제다\n<ul>\n<li><code class=\"language-text\">THREE.FrontSide</code>(기본값) : 앞면</li>\n<li><code class=\"language-text\">THREE.BackSide</code> : 뒷면</li>\n<li><code class=\"language-text\">THREE.DoubleSide</code> : 양면</li>\n</ul>\n</li>\n</ul>\n<p>예를 들어 직육면체면 안쪽은 렌더링하지 않아도 되겠죠?</p>\n<p><span\n      class=\"gatsby-resp-image-wrapper\"\n      style=\"position: relative; display: block; margin-left: auto; margin-right: auto; max-width: 630px; \"\n    >\n      <a\n    class=\"gatsby-resp-image-link\"\n    href=\"/static/cad1d6f550fb38c60bb8d331d7788141/ad00e/image-9.png\"\n    style=\"display: block\"\n    target=\"_blank\"\n    rel=\"noopener\"\n  >\n    <span\n    class=\"gatsby-resp-image-background-image\"\n    style=\"padding-bottom: 82.27848101265823%; position: relative; bottom: 0; left: 0; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAQCAYAAAAWGF8bAAAACXBIWXMAABYlAAAWJQFJUiTwAAADC0lEQVR42oWTwW8UVRzH549ogd3ZmTdv3szsdrdluztbttttJUtdUsViTRNICKEkamTZULbF7W5XiQUTNVVQgcoBTlyMR7lw4sTJg8YEIgmcCNUgN2JI9PTxzYgHsQuHXybze7/v9/f9vt/7GcIVzHqzrARt2v77zLvzKFfhum7fkK7Ed32O+Efopju0vBavymkiLiN0Q1b9VU5nT+vDVdqyTdWpYrv2lsRRznItZtQMa8EavWyPrt+lKY+TkzmMqltlRa3Q1gqXvSVazklqdi0G9SNMuSnm3Dl6Xo9T3jJLqsUx8R6jYhQjkGkWxAJLTosTzgkOm4fJiRyOcra0GxFG1kqyRMNpsOgs0rSP82ZyP0oqDMd1yDpZ9ph7qCVqZK0sQoqX3mOEK4gCdbPOZGIS3/bjnJHL5qhUK5SrZcbGxyhPlMnn8ziO059Mn+0c2cnEKxNxfVgOKe0qkQ7SGFLKuMhXPp7y/gN6UUS4CKOUinGRoyhv/FswmBzEtMz4HoQQLyWzRIqB5AAiJbBsgf0MYzjSibsc3H2QC0cvsnfXXlK6OMr1HYq0KWaKdN7o8uXyV5Tyw2Q8P25kKC23M9fho7kPqXgh8pmCLcl0E8uxqGSmuNTc4Pufv+P85ucsvD3L0ckaCdvCGPKHGJYZ5MgQM8snWbp+ncLUlLbyf5XRf9K0+bh7iObiPho31/j6jx9oXP2G5nSdIPAxXOWysHGJz+7d5/yjR1x88oS3Oh3MwUE8339u5fQAtN1vb37K1c07nL1zn3O/PuaDH39if71OPpqybZocOHOGC5po/cEDNp4+pXfr1j8kz1lXnt4S02L69d1cfniXL35/zLnfNrn815/sa7UQO3ZohbowlUhw7No1zt6+zTtXrvBao4GK1G1xl8rzMLdtY/7dA3xy9xdO3bjBofV1xrRCYduRZf1+9Mj9TIasftDW9u2kdLxoS6KwtNJcoRA3SA7o52NZRFxGEASUSiUKo6OM6W8YhoxXKowMD/fdloImKoZFSkUdur48Pk5FY9LpNH8DpUEZZcIxqZsAAAAASUVORK5CYII='); background-size: cover; display: block;\"\n  ></span>\n  <img\n        class=\"gatsby-resp-image-image\"\n        alt=\"재질 속성 예시\"\n        title=\"\"\n        src=\"/static/cad1d6f550fb38c60bb8d331d7788141/f058b/image-9.png\"\n        srcset=\"/static/cad1d6f550fb38c60bb8d331d7788141/c26ae/image-9.png 158w,\n/static/cad1d6f550fb38c60bb8d331d7788141/6bdcf/image-9.png 315w,\n/static/cad1d6f550fb38c60bb8d331d7788141/f058b/image-9.png 630w,\n/static/cad1d6f550fb38c60bb8d331d7788141/40601/image-9.png 945w,\n/static/cad1d6f550fb38c60bb8d331d7788141/78612/image-9.png 1260w,\n/static/cad1d6f550fb38c60bb8d331d7788141/ad00e/image-9.png 1366w\"\n        sizes=\"(max-width: 630px) 100vw, 630px\"\n        style=\"width:100%;height:100%;margin:0;vertical-align:middle;position:absolute;top:0;left:0;\"\n        loading=\"lazy\"\n        decoding=\"async\"\n      />\n  </a>\n    </span></p>\n<p>참고 : Three.js는 기본적으로 처음 한 번만 재질의 설정을 적용합니다. 만약 런타임에 재질의 속성을 바꿨으면 <code class=\"language-text\">material.needsUpdate = true</code>로 반영을 해줍시다.</p>\n<ul>\n<li><code class=\"language-text\">flatShading</code> 속성 변경</li>\n<li>텍스처 추가/제거 시</li>\n</ul>\n<h1 id=\"텍스처textures\" style=\"position:relative;\"><a href=\"#%ED%85%8D%EC%8A%A4%EC%B2%98textures\" aria-label=\"텍스처textures permalink\" class=\"anchor before\"><svg aria-hidden=\"true\" focusable=\"false\" height=\"16\" version=\"1.1\" viewBox=\"0 0 16 16\" width=\"16\"><path fill-rule=\"evenodd\" d=\"M4 9h1v1H4c-1.5 0-3-1.69-3-3.5S2.55 3 4 3h4c1.45 0 3 1.69 3 3.5 0 1.41-.91 2.72-2 3.25V8.59c.58-.45 1-1.27 1-2.09C10 5.22 8.98 4 8 4H4c-.98 0-2 1.22-2 2.5S3 9 4 9zm9-3h-1v1h1c1 0 2 1.22 2 2.5S13.98 12 13 12H9c-.98 0-2-1.22-2-2.5 0-.83.42-1.64 1-2.09V6.25c-1.09.53-2 1.84-2 3.25C6 11.31 7.55 13 9 13h4c1.45 0 3-1.69 3-3.5S14.5 6 13 6z\"></path></svg></a>텍스처(Textures)</h1>\n<p><a href=\"https://threejs.org/manual/#ko/textures\">https://threejs.org/manual/#ko/textures</a><br>\n텍스처를 적용해봅시다.<br>\n텍스처가 뭔지는 말 안해도 대충 느낌적인 느낌으로 알고계시죠?</p>\n<p><code class=\"language-text\">new THREE.TextureLoader()</code>로 로더객체를 만들어주고<br>\n<code class=\"language-text\">loader.load(url)</code>로 불러와줍니다<br>\n이게 비동기실행이라고 겁주던데, 예제코드에서도 비동기처럼 취급 안하고 쓰길래 아래처럼 썼습니다.</p>\n<div class=\"gatsby-highlight\" data-language=\"ts\"><pre class=\"language-ts\"><code class=\"language-ts\">  <span class=\"token keyword\">private</span> <span class=\"token function\">setupSun</span><span class=\"token punctuation\">(</span>geometry<span class=\"token operator\">:</span> <span class=\"token constant\">THREE</span><span class=\"token punctuation\">.</span>SphereGeometry<span class=\"token punctuation\">)</span> <span class=\"token punctuation\">{</span>\n    <span class=\"token keyword\">const</span> loader <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">TextureLoader</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> sunTexture <span class=\"token operator\">=</span> loader<span class=\"token punctuation\">.</span><span class=\"token function\">load</span><span class=\"token punctuation\">(</span><span class=\"token string\">\"/src/textures/sun.png\"</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span>\n    sunTexture<span class=\"token punctuation\">.</span>colorSpace <span class=\"token operator\">=</span> <span class=\"token constant\">THREE</span><span class=\"token punctuation\">.</span>SRGBColorSpace<span class=\"token punctuation\">;</span>\n    <span class=\"token keyword\">const</span> material <span class=\"token operator\">=</span> <span class=\"token keyword\">new</span> <span class=\"token class-name\"><span class=\"token constant\">THREE</span></span><span class=\"token punctuation\">.</span><span class=\"token function\">MeshBasicMaterial</span><span class=\"token punctuation\">(</span><span class=\"token punctuation\">{</span>\n\\      map<span class=\"token operator\">:</span> sunTexture<span class=\"token punctuation\">,</span>\n    <span class=\"token punctuation\">}</span><span class=\"token punctuation\">)</span><span class=\"token punctuation\">;</span></code></pre></div>\n<p>이렇게 하면 되십니다<br>\n근데 <code class=\"language-text\">\"textures/sun.png\"</code> 이렇게 아니면 <code class=\"language-text\">\"./textures/sun.png\"</code> 이런 식으로 상대경로로 하니까 불러와지지가 않더라구요<br>\n절대경로로 해주니까 되더랍니다</p>\n<p>텍스쳐는 여러 무료 사이트도 있고 한데, <a href=\"https://www.solarsystemscope.com/textures/\">태양계 텍스쳐 사이트</a>가 있어서 여기서 가져왔습니다<br>\n확실히 확실해요</p>\n<p>그리고 이제 color값은 필요없고, 로더에서 텍스처를 가져와서 씁니다.<br>\n<code class=\"language-text\">material</code>만들 때 <code class=\"language-text\">map: texture</code>처럼 컬러 대신 텍스처를 넣으면 됩니다.<br>\n<code class=\"language-text\">colorSpace</code>를 안바꾸면 좀 쨍하더라구요? 공식문서의 예제에서도 이 줄을 넣어두길래 따라했습니다.</p>\n<p><code class=\"language-text\">emissive</code> 속성은 => 지구와 달은 <code class=\"language-text\">#222222</code>로 유지하면 좋은데요, 이게 아니면 광원이 비추지 않는 뒷면은 아예 보이지도 않습니다<br>\n그림자라도 보이게 하려면 있는게 좋더라구요</p>\n<hr>\n<p>완성한 태양계(데모)입니다</p>\n<iframe src=\"https://codesandbox.io/embed/rzcztw?view=preview&hidenavigation=1\"\n     style=\"width:100%; height: 500px; border:0; border-radius: 4px; overflow:hidden;\"\n     title=\"three.js (forked)\"\n     allow=\"accelerometer; ambient-light-sensor; camera; encrypted-media; geolocation; gyroscope; hid; microphone; midi; payment; usb; vr; xr-spatial-tracking\"\n     sandbox=\"allow-forms allow-modals allow-popups allow-presentation allow-same-origin allow-scripts\"\n   ></iframe>","frontmatter":{"title":"Three.js 공식문서로 시작해보기. - 4","date":"November 16, 2024","description":"밖에서 강의보려는데 아차? 이어폰을 두고와서 공식문서로 공부했습니다.","tag":["TIL","Three.js"]},"tableOfContents":"<ul>\n<li>\n<p><a href=\"#%EC%9B%90%EC%8B%9C-%EB%AA%A8%EB%8D%B8primitives\">원시 모델(Primitives)</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%94%AC-%EA%B7%B8%EB%9E%98%ED%94%84scene-graph\">씬 그래프(Scene Graph)</a></p>\n<ul>\n<li>\n<p><a href=\"#%ED%83%9C%EC%96%91%EA%B3%84-%EA%B5%AC%ED%98%84%ED%95%98%EA%B8%B0-%ED%83%9C%EC%96%91-%EC%A7%80%EA%B5%AC-%EB%8B%AC%EC%9D%98-%EC%9E%90%EC%A0%84%EA%B3%B5%EC%A0%84\">태양계 구현하기 (태양, 지구, 달의 자전/공전)</a></p>\n<ul>\n<li>\n<p><a href=\"#%EC%A1%B0%EB%AA%85-%EC%84%B8%ED%8C%85\">조명 세팅</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%83%9C%EC%96%91-%EB%A7%8C%EB%93%A4%EA%B8%B0\">태양 만들기</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%A7%80%EA%B5%AC-%EB%A7%8C%EB%93%A4%EA%B8%B0\">지구 만들기</a></p>\n</li>\n<li>\n<p><a href=\"#%EB%8B%AC-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0\">달 추가하기</a></p>\n</li>\n<li>\n<p><a href=\"#%EC%8B%9C%EA%B0%81%EC%A0%81%EC%9C%BC%EB%A1%9C-%EC%B6%95%EC%9D%84-%ED%99%95%EC%9D%B8%ED%95%98%EA%B8%B0\">시각적으로 축을 확인하기</a></p>\n<ul>\n<li><a href=\"#%EC%BB%A8%ED%8A%B8%EB%A1%A4-%ED%8C%A8%EB%84%90-%EB%A7%8C%EB%93%A4%EA%B8%B0---lil-gui\">컨트롤 패널 만들기 - lil-gui</a></li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%B9%B4%EB%A9%94%EB%9D%BC-%EC%9D%B8%ED%84%B0%EB%9E%99%EC%85%98-%EC%B6%94%EA%B0%80%ED%95%98%EA%B8%B0--orbitcontrol\">카메라 인터랙션 추가하기 : OrbitControl</a></p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li>\n<p><a href=\"#%EC%9E%AC%EC%A7%88materials\">재질(materials)</a></p>\n</li>\n<li>\n<p><a href=\"#%ED%85%8D%EC%8A%A4%EC%B2%98textures\">텍스처(Textures)</a></p>\n</li>\n</ul>"},"previous":{"fields":{"slug":"/til/threejs-with-typescript-01/"},"frontmatter":{"title":"TypeScript로 즐기는 Three.js 강의 정리 - 01"}},"next":{"fields":{"slug":"/what-and-why-and-how-bundler/"},"frontmatter":{"title":"🎁 면접관께서 가로되, 번들러가 무엇이냐 물으니"}}},"pageContext":{"id":"bb1435ee-5b29-508d-b966-d8914a39240d","previousPostId":"0b7f8015-fb86-5290-989e-9eed60321794","nextPostId":"26072a52-0201-5492-89dc-9ac18873f00b"}},"staticQueryHashes":["2841359383"],"slicesMap":{}}